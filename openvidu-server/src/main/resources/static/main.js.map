{"version":3,"sources":["webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/Connection.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/LocalRecorder.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/OpenVidu.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/Publisher.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/Session.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/Stream.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/StreamManager.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenVidu/Subscriber.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Enums/LocalRecorderState.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Enums/OpenViduError.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Enums/VideoInsertMode.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/ConnectionEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/Event.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/PublisherSpeakingEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/RecordingEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/SessionDisconnectedEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/SignalEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/StreamEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/StreamManagerEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/StreamPropertyChangedEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/Events/VideoElementEvent.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/Mapper.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/clients/index.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/clients/jsonrpcclient.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/clients/transports/index.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/clients/transports/webSocketWithReconnection.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/index.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/packers/JsonRPC.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/packers/XmlRPC.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/KurentoUtils/kurento-jsonrpc/packers/index.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/ScreenSharing/Screen-Capturing-Auto.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/ScreenSharing/Screen-Capturing.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/WebRtcPeer/WebRtcPeer.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/OpenViduInternal/WebRtcStats/WebRtcStats.js","webpack:////home/pablo/Documents/Git/openvidu/openvidu-browser/lib/index.js","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.material.module.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.routing.ts","webpack:///./src/app/components/dashboard/credentials-dialog.component.ts","webpack:///./src/app/components/dashboard/dashboard.component.css","webpack:///./src/app/components/dashboard/dashboard.component.html","webpack:///./src/app/components/dashboard/dashboard.component.ts","webpack:///./src/app/components/layouts/layout-best-fit/layout-best-fit.component.css","webpack:///./src/app/components/layouts/layout-best-fit/layout-best-fit.component.html","webpack:///./src/app/components/layouts/layout-best-fit/layout-best-fit.component.ts","webpack:///./src/app/components/layouts/openvidu-layout.ts","webpack:///./src/app/components/layouts/ov-video.component.ts","webpack:///./src/app/components/session-details/session-details.component.css","webpack:///./src/app/components/session-details/session-details.component.html","webpack:///./src/app/components/session-details/session-details.component.ts","webpack:///./src/app/services/info.service.ts","webpack:///./src/app/services/rest.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,mCAAmC,uBAAuB;AAC1D;AACA,uEAAuE;AACvE,mCAAmC,uBAAuB;AAC1D;AACA,uEAAuE;AACvE,mCAAmC,uBAAuB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY,EAAE,wBAAwB,YAAY,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,gBAAgB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,gBAAgB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2CAA2C,qBAAqB;AAChE;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;;;;;;;ACtUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,uNAAuN,qCAAqC;AAC5P,+MAA+M,qCAAqC;AACpP;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,qCAAqC;AACrC,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY,gCAAgC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,gEAAgE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;;;;;;ACzkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sIAAsI,sDAAsD,EAAE;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;;;;;;ACxeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,oDAAoD;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mC;;;;;;;;;;;;ACx2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wBAAwB,EAAE,6BAA6B,sBAAsB,EAAE;AACxH,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,kC;;;;;;;;;;;;ACncA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,gBAAgB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,QAAQ;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;;;;;;;ACtWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qFAAqF;AACtF,8C;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4EAA4E;AAC7E,2C;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,CAAC;AACD;AACA,2C;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,CAAC;AACD;AACA,iC;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,CAAC;AACD;AACA,kD;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA,CAAC;AACD;AACA,0C;;;;;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oD;;;;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,CAAC;AACD;AACA,uC;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+BAA+B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA,CAAC;AACD;AACA,8C;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA,CAAC;AACD;AACA,sD;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA,CAAC;AACD;AACA,6C;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;;;;;AC5CA;AACA;AACA,iC;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;;;;;AChMA;AACA;AACA,iC;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qD;;;;;;;;;;;ACrKA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kCAAkC;AACjF,+CAA+C,kCAAkC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;;;;;ACleA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA,iC;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iD;;;;;;;;;;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4C;;;;;;;;;;;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4CAA4C;AACrF;AACA;AACA;AACA;AACA,iDAAiD,iCAAiC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,sBAAsB,EAAE;AAClE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,sBAAsB,EAAE;AAClE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kBAAkB,EAAE,6BAA6B,sBAAsB,EAAE;AAC7I,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,kBAAkB,EAAE,6BAA6B,sBAAsB,EAAE;AAC1J;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;;;;;;ACvQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,oBAAoB,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;;;;;;AC3WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,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","file":"main.js","sourcesContent":["\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar Stream_1 = require(\"./Stream\");\n/**\n * Represents each one of the user's connection to the session (the local one and other user's connections).\n * Therefore each [[Session]] and [[Stream]] object has an attribute of type Connection\n */\nvar Connection = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function Connection(session, opts) {\n        this.session = session;\n        /**\n         * @hidden\n         */\n        this.disposed = false;\n        var msg = \"'Connection' created \";\n        if (!!opts) {\n            msg += \"(remote) with 'connectionId' [\" + opts.id + ']';\n        }\n        else {\n            msg += '(local)';\n        }\n        console.info(msg);\n        this.options = opts;\n        if (!!opts) {\n            // Connection is remote\n            this.connectionId = opts.id;\n            if (opts.metadata) {\n                this.data = opts.metadata;\n            }\n            if (opts.streams) {\n                this.initRemoteStreams(opts.streams);\n            }\n        }\n        this.creationTime = new Date().getTime();\n    }\n    /* Hidden methods */\n    /**\n     * @hidden\n     */\n    Connection.prototype.sendIceCandidate = function (candidate) {\n        console.debug((!!this.stream.outboundStreamOpts ? 'Local' : 'Remote'), 'candidate for', this.connectionId, JSON.stringify(candidate));\n        this.session.openvidu.sendRequest('onIceCandidate', {\n            endpointName: this.connectionId,\n            candidate: candidate.candidate,\n            sdpMid: candidate.sdpMid,\n            sdpMLineIndex: candidate.sdpMLineIndex\n        }, function (error, response) {\n            if (error) {\n                console.error('Error sending ICE candidate: '\n                    + JSON.stringify(error));\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Connection.prototype.initRemoteStreams = function (options) {\n        var _this = this;\n        // This is ready for supporting multiple streams per Connection object. Right now the loop will always run just once\n        // this.stream should also be replaced by a collection of streams to support multiple streams per Connection\n        options.forEach(function (opts) {\n            var streamOptions = {\n                id: opts.id,\n                connection: _this,\n                hasAudio: opts.hasAudio,\n                hasVideo: opts.hasVideo,\n                audioActive: opts.audioActive,\n                videoActive: opts.videoActive,\n                typeOfVideo: opts.typeOfVideo,\n                frameRate: opts.frameRate,\n                videoDimensions: !!opts.videoDimensions ? JSON.parse(opts.videoDimensions) : undefined\n            };\n            var stream = new Stream_1.Stream(_this.session, streamOptions);\n            _this.addStream(stream);\n        });\n        console.info(\"Remote 'Connection' with 'connectionId' [\" + this.connectionId + '] is now configured for receiving Streams with options: ', this.stream.inboundStreamOpts);\n    };\n    /**\n     * @hidden\n     */\n    Connection.prototype.addStream = function (stream) {\n        stream.connection = this;\n        this.stream = stream;\n    };\n    /**\n     * @hidden\n     */\n    Connection.prototype.removeStream = function (streamId) {\n        delete this.stream;\n    };\n    /**\n     * @hidden\n     */\n    Connection.prototype.dispose = function () {\n        if (!!this.stream) {\n            delete this.stream;\n        }\n        this.disposed = true;\n    };\n    return Connection;\n}());\nexports.Connection = Connection;\n//# sourceMappingURL=Connection.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar LocalRecorderState_1 = require(\"../OpenViduInternal/Enums/LocalRecorderState\");\n/**\n * Easy recording of [[Stream]] objects straightaway from the browser.\n *\n * > WARNING: Performing browser local recording of **remote streams** may cause some troubles. A long waiting time may be required after calling _LocalRecorder.stop()_ in this case\n */\nvar LocalRecorder = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function LocalRecorder(stream) {\n        this.stream = stream;\n        this.chunks = [];\n        this.count = 0;\n        this.connectionId = (!!this.stream.connection) ? this.stream.connection.connectionId : 'default-connection';\n        this.id = this.stream.streamId + '_' + this.connectionId + '_localrecord';\n        this.state = LocalRecorderState_1.LocalRecorderState.READY;\n    }\n    /**\n     * Starts the recording of the Stream. [[state]] property must be `READY`. After method succeeds is set to `RECORDING`\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved if the recording successfully started and rejected with an Error object if not\n     */\n    LocalRecorder.prototype.record = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            try {\n                if (typeof MediaRecorder === 'undefined') {\n                    console.error('MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder');\n                    throw (Error('MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder'));\n                }\n                if (_this.state !== LocalRecorderState_1.LocalRecorderState.READY) {\n                    throw (Error('\\'LocalRecord.record()\\' needs \\'LocalRecord.state\\' to be \\'READY\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.clean()\\' or init a new LocalRecorder before'));\n                }\n                console.log(\"Starting local recording of stream '\" + _this.stream.streamId + \"' of connection '\" + _this.connectionId + \"'\");\n                if (typeof MediaRecorder.isTypeSupported === 'function') {\n                    var options = void 0;\n                    if (MediaRecorder.isTypeSupported('video/webm;codecs=vp9')) {\n                        options = { mimeType: 'video/webm;codecs=vp9' };\n                    }\n                    else if (MediaRecorder.isTypeSupported('video/webm;codecs=h264')) {\n                        options = { mimeType: 'video/webm;codecs=h264' };\n                    }\n                    else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp8')) {\n                        options = { mimeType: 'video/webm;codecs=vp8' };\n                    }\n                    console.log('Using mimeType ' + options.mimeType);\n                    _this.mediaRecorder = new MediaRecorder(_this.stream.getMediaStream(), options);\n                }\n                else {\n                    console.warn('isTypeSupported is not supported, using default codecs for browser');\n                    _this.mediaRecorder = new MediaRecorder(_this.stream.getMediaStream());\n                }\n                _this.mediaRecorder.start(10);\n            }\n            catch (err) {\n                reject(err);\n            }\n            _this.mediaRecorder.ondataavailable = function (e) {\n                _this.chunks.push(e.data);\n            };\n            _this.mediaRecorder.onerror = function (e) {\n                console.error('MediaRecorder error: ', e);\n            };\n            _this.mediaRecorder.onstart = function () {\n                console.log('MediaRecorder started (state=' + _this.mediaRecorder.state + ')');\n            };\n            _this.mediaRecorder.onstop = function () {\n                _this.onStopDefault();\n            };\n            _this.mediaRecorder.onpause = function () {\n                console.log('MediaRecorder paused (state=' + _this.mediaRecorder.state + ')');\n            };\n            _this.mediaRecorder.onresume = function () {\n                console.log('MediaRecorder resumed (state=' + _this.mediaRecorder.state + ')');\n            };\n            _this.mediaRecorder.onwarning = function (e) {\n                console.log('MediaRecorder warning: ' + e);\n            };\n            _this.state = LocalRecorderState_1.LocalRecorderState.RECORDING;\n            resolve();\n        });\n    };\n    /**\n     * Ends the recording of the Stream. [[state]] property must be `RECORDING` or `PAUSED`. After method succeeds is set to `FINISHED`\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved if the recording successfully stopped and rejected with an Error object if not\n     */\n    LocalRecorder.prototype.stop = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            try {\n                if (_this.state === LocalRecorderState_1.LocalRecorderState.READY || _this.state === LocalRecorderState_1.LocalRecorderState.FINISHED) {\n                    throw (Error('\\'LocalRecord.stop()\\' needs \\'LocalRecord.state\\' to be \\'RECORDING\\' or \\'PAUSED\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.start()\\' before'));\n                }\n                _this.mediaRecorder.onstop = function () {\n                    _this.onStopDefault();\n                    resolve();\n                };\n                _this.mediaRecorder.stop();\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    };\n    /**\n     * Pauses the recording of the Stream. [[state]] property must be `RECORDING`. After method succeeds is set to `PAUSED`\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved if the recording was successfully paused and rejected with an Error object if not\n     */\n    LocalRecorder.prototype.pause = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            try {\n                if (_this.state !== LocalRecorderState_1.LocalRecorderState.RECORDING) {\n                    reject(Error('\\'LocalRecord.pause()\\' needs \\'LocalRecord.state\\' to be \\'RECORDING\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.start()\\' or \\'LocalRecorder.resume()\\' before'));\n                }\n                _this.mediaRecorder.pause();\n                _this.state = LocalRecorderState_1.LocalRecorderState.PAUSED;\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    /**\n     * Resumes the recording of the Stream. [[state]] property must be `PAUSED`. After method succeeds is set to `RECORDING`\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved if the recording was successfully resumed and rejected with an Error object if not\n     */\n    LocalRecorder.prototype.resume = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            try {\n                if (_this.state !== LocalRecorderState_1.LocalRecorderState.PAUSED) {\n                    throw (Error('\\'LocalRecord.resume()\\' needs \\'LocalRecord.state\\' to be \\'PAUSED\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.pause()\\' before'));\n                }\n                _this.mediaRecorder.resume();\n                _this.state = LocalRecorderState_1.LocalRecorderState.RECORDING;\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    /**\n     * Previews the recording, appending a new HTMLVideoElement to element with id `parentId`. [[state]] property must be `FINISHED`\n     */\n    LocalRecorder.prototype.preview = function (parentElement) {\n        if (this.state !== LocalRecorderState_1.LocalRecorderState.FINISHED) {\n            throw (Error('\\'LocalRecord.preview()\\' needs \\'LocalRecord.state\\' to be \\'FINISHED\\' (current value: \\'' + this.state + '\\'). Call \\'LocalRecorder.stop()\\' before'));\n        }\n        this.videoPreview = document.createElement('video');\n        this.videoPreview.id = this.id;\n        this.videoPreview.autoplay = true;\n        if (typeof parentElement === 'string') {\n            this.htmlParentElementId = parentElement;\n            var parentElementDom = document.getElementById(parentElement);\n            if (parentElementDom) {\n                this.videoPreview = parentElementDom.appendChild(this.videoPreview);\n            }\n        }\n        else {\n            this.htmlParentElementId = parentElement.id;\n            this.videoPreview = parentElement.appendChild(this.videoPreview);\n        }\n        this.videoPreview.src = this.videoPreviewSrc;\n        return this.videoPreview;\n    };\n    /**\n     * Gracefully stops and cleans the current recording (WARNING: it is completely dismissed). Sets [[state]] to `READY` so the recording can start again\n     */\n    LocalRecorder.prototype.clean = function () {\n        var _this = this;\n        var f = function () {\n            delete _this.blob;\n            _this.chunks = [];\n            _this.count = 0;\n            delete _this.mediaRecorder;\n            _this.state = LocalRecorderState_1.LocalRecorderState.READY;\n        };\n        if (this.state === LocalRecorderState_1.LocalRecorderState.RECORDING || this.state === LocalRecorderState_1.LocalRecorderState.PAUSED) {\n            this.stop().then(function () { return f(); })[\"catch\"](function () { return f(); });\n        }\n        else {\n            f();\n        }\n    };\n    /**\n     * Downloads the recorded video through the browser. [[state]] property must be `FINISHED`\n     */\n    LocalRecorder.prototype.download = function () {\n        if (this.state !== LocalRecorderState_1.LocalRecorderState.FINISHED) {\n            throw (Error('\\'LocalRecord.download()\\' needs \\'LocalRecord.state\\' to be \\'FINISHED\\' (current value: \\'' + this.state + '\\'). Call \\'LocalRecorder.stop()\\' before'));\n        }\n        else {\n            var a = document.createElement('a');\n            a.style.display = 'none';\n            document.body.appendChild(a);\n            var url = window.URL.createObjectURL(this.blob);\n            a.href = url;\n            a.download = this.id + '.webm';\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        }\n    };\n    /**\n     * Gets the raw Blob file. Methods preview, download, uploadAsBinary and uploadAsMultipartfile use this same file to perform their specific actions. [[state]] property must be `FINISHED`\n     */\n    LocalRecorder.prototype.getBlob = function () {\n        if (this.state !== LocalRecorderState_1.LocalRecorderState.FINISHED) {\n            throw (Error('Call \\'LocalRecord.stop()\\' before getting Blob file'));\n        }\n        else {\n            return this.blob;\n        }\n    };\n    /**\n     * Uploads the recorded video as a binary file performing an HTTP/POST operation to URL `endpoint`. [[state]] property must be `FINISHED`. Optional HTTP headers can be passed as second parameter. For example:\n     * ```\n     * var headers = {\n     *  \"Cookie\": \"$Version=1; Skin=new;\",\n     *  \"Authorization\":\"Basic QWxhZGpbjpuIHNlctZQ==\"\n     * }\n     * ```\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved with the `http.responseText` from server if the operation was successful and rejected with the failed `http.status` if not\n     */\n    LocalRecorder.prototype.uploadAsBinary = function (endpoint, headers) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.state !== LocalRecorderState_1.LocalRecorderState.FINISHED) {\n                reject(Error('\\'LocalRecord.uploadAsBinary()\\' needs \\'LocalRecord.state\\' to be \\'FINISHED\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.stop()\\' before'));\n            }\n            else {\n                var http_1 = new XMLHttpRequest();\n                http_1.open('POST', endpoint, true);\n                if (typeof headers === 'object') {\n                    for (var _i = 0, _a = Object.keys(headers); _i < _a.length; _i++) {\n                        var key = _a[_i];\n                        http_1.setRequestHeader(key, headers[key]);\n                    }\n                }\n                http_1.onreadystatechange = function () {\n                    if (http_1.readyState === 4) {\n                        if (http_1.status.toString().charAt(0) === '2') {\n                            // Success response from server (HTTP status standard: 2XX is success)\n                            resolve(http_1.responseText);\n                        }\n                        else {\n                            reject(http_1.status);\n                        }\n                    }\n                };\n                http_1.send(_this.blob);\n            }\n        });\n    };\n    /**\n     * Uploads the recorded video as a multipart file performing an HTTP/POST operation to URL `endpoint`. [[state]] property must be `FINISHED`. Optional HTTP headers can be passed as second parameter. For example:\n     * ```\n     * var headers = {\n     *  \"Cookie\": \"$Version=1; Skin=new;\",\n     *  \"Authorization\":\"Basic QWxhZGpbjpuIHNlctZQ==\"\n     * }\n     * ```\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved with the `http.responseText` from server if the operation was successful and rejected with the failed `http.status` if not:\n     */\n    LocalRecorder.prototype.uploadAsMultipartfile = function (endpoint, headers) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.state !== LocalRecorderState_1.LocalRecorderState.FINISHED) {\n                reject(Error('\\'LocalRecord.uploadAsMultipartfile()\\' needs \\'LocalRecord.state\\' to be \\'FINISHED\\' (current value: \\'' + _this.state + '\\'). Call \\'LocalRecorder.stop()\\' before'));\n            }\n            else {\n                var http_2 = new XMLHttpRequest();\n                http_2.open('POST', endpoint, true);\n                if (typeof headers === 'object') {\n                    for (var _i = 0, _a = Object.keys(headers); _i < _a.length; _i++) {\n                        var key = _a[_i];\n                        http_2.setRequestHeader(key, headers[key]);\n                    }\n                }\n                var sendable = new FormData();\n                sendable.append('file', _this.blob, _this.id + '.webm');\n                http_2.onreadystatechange = function () {\n                    if (http_2.readyState === 4) {\n                        if (http_2.status.toString().charAt(0) === '2') {\n                            // Success response from server (HTTP status standard: 2XX is success)\n                            resolve(http_2.responseText);\n                        }\n                        else {\n                            reject(http_2.status);\n                        }\n                    }\n                };\n                http_2.send(sendable);\n            }\n        });\n    };\n    /* Private methods */\n    LocalRecorder.prototype.onStopDefault = function () {\n        console.log('MediaRecorder stopped  (state=' + this.mediaRecorder.state + ')');\n        this.blob = new Blob(this.chunks, { type: 'video/webm' });\n        this.chunks = [];\n        this.videoPreviewSrc = window.URL.createObjectURL(this.blob);\n        this.state = LocalRecorderState_1.LocalRecorderState.FINISHED;\n    };\n    return LocalRecorder;\n}());\nexports.LocalRecorder = LocalRecorder;\n//# sourceMappingURL=LocalRecorder.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar LocalRecorder_1 = require(\"./LocalRecorder\");\nvar Publisher_1 = require(\"./Publisher\");\nvar Session_1 = require(\"./Session\");\nvar StreamPropertyChangedEvent_1 = require(\"../OpenViduInternal/Events/StreamPropertyChangedEvent\");\nvar OpenViduError_1 = require(\"../OpenViduInternal/Enums/OpenViduError\");\nvar VideoInsertMode_1 = require(\"../OpenViduInternal/Enums/VideoInsertMode\");\nvar screenSharingAuto = require(\"../OpenViduInternal/ScreenSharing/Screen-Capturing-Auto\");\nvar screenSharing = require(\"../OpenViduInternal/ScreenSharing/Screen-Capturing\");\nvar RpcBuilder = require(\"../OpenViduInternal/KurentoUtils/kurento-jsonrpc\");\nvar platform = require(\"platform\");\n/**\n * Entrypoint of OpenVidu Browser library.\n * Use it to initialize objects of type [[Session]], [[Publisher]] and [[LocalRecorder]]\n */\nvar OpenVidu = /** @class */ (function () {\n    function OpenVidu() {\n        var _this = this;\n        /**\n         * @hidden\n         */\n        this.publishers = [];\n        /**\n         * @hidden\n         */\n        this.secret = '';\n        /**\n         * @hidden\n         */\n        this.recorder = false;\n        /**\n         * @hidden\n         */\n        this.advancedConfiguration = {};\n        console.info(\"'OpenVidu' initialized\");\n        if (platform.name.toLowerCase().indexOf('mobile') !== -1) {\n            // Listen to orientationchange only on mobile browsers\n            window.onorientationchange = function () {\n                _this.publishers.forEach(function (publisher) {\n                    if (!!publisher.stream && !!publisher.stream.hasVideo && !!publisher.stream.streamManager.videos[0]) {\n                        var attempts_1 = 0;\n                        var oldWidth_1 = publisher.stream.videoDimensions.width;\n                        var oldHeight_1 = publisher.stream.videoDimensions.height;\n                        // New resolution got from different places for Chrome and Firefox. Chrome needs a videoWidth and videoHeight of a videoElement.\n                        // Firefox needs getSettings from the videoTrack\n                        var firefoxSettings_1 = publisher.stream.getMediaStream().getVideoTracks()[0].getSettings();\n                        var newWidth_1 = (platform.name.toLowerCase().indexOf('firefox') !== -1) ? firefoxSettings_1.width : publisher.videoReference.videoWidth;\n                        var newHeight_1 = (platform.name.toLowerCase().indexOf('firefox') !== -1) ? firefoxSettings_1.height : publisher.videoReference.videoHeight;\n                        var repeatUntilChange_1 = setInterval(function () {\n                            firefoxSettings_1 = publisher.stream.getMediaStream().getVideoTracks()[0].getSettings();\n                            newWidth_1 = (platform.name.toLowerCase().indexOf('firefox') !== -1) ? firefoxSettings_1.width : publisher.videoReference.videoWidth;\n                            newHeight_1 = (platform.name.toLowerCase().indexOf('firefox') !== -1) ? firefoxSettings_1.height : publisher.videoReference.videoHeight;\n                            sendStreamPropertyChangedEvent_1(oldWidth_1, oldHeight_1, newWidth_1, newHeight_1);\n                        }, 100);\n                        var sendStreamPropertyChangedEvent_1 = function (oldWidth, oldHeight, newWidth, newHeight) {\n                            attempts_1++;\n                            if (attempts_1 > 4) {\n                                clearTimeout(repeatUntilChange_1);\n                            }\n                            if (newWidth !== oldWidth || newHeight !== oldHeight) {\n                                publisher.stream.videoDimensions = {\n                                    width: newWidth || 0,\n                                    height: newHeight || 0\n                                };\n                                var newValue_1 = JSON.stringify(publisher.stream.videoDimensions);\n                                _this.sendRequest('streamPropertyChanged', {\n                                    streamId: publisher.stream.streamId,\n                                    property: 'videoDimensions',\n                                    newValue: newValue_1,\n                                    reason: 'deviceRotated'\n                                }, function (error, response) {\n                                    if (error) {\n                                        console.error(\"Error sending 'streamPropertyChanged' event\", error);\n                                    }\n                                    else {\n                                        _this.session.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this.session, publisher.stream, 'videoDimensions', newValue_1, { width: oldWidth, height: oldHeight }, 'deviceRotated')]);\n                                        publisher.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(publisher, publisher.stream, 'videoDimensions', newValue_1, { width: oldWidth, height: oldHeight }, 'deviceRotated')]);\n                                    }\n                                });\n                                clearTimeout(repeatUntilChange_1);\n                            }\n                        };\n                    }\n                });\n            };\n        }\n    }\n    /**\n     * Returns new session\n     */\n    OpenVidu.prototype.initSession = function () {\n        this.session = new Session_1.Session(this);\n        return this.session;\n    };\n    /**\n     * Returns a new publisher\n     *\n     * #### Events dispatched\n     *\n     * The [[Publisher]] object will dispatch an `accessDialogOpened` event, only if the pop-up shown by the browser to request permissions for the camera is opened. You can use this event to alert the user about granting permissions\n     * for your website. An `accessDialogClosed` event will also be dispatched after user clicks on \"Allow\" or \"Block\" in the pop-up.\n     *\n     * The [[Publisher]] object will dispatch an `accessAllowed` or `accessDenied` event once it has been granted access to the requested input devices or not.\n     *\n     * The [[Publisher]] object will dispatch a `videoElementCreated` event once a HTML video element has been added to DOM (only if you\n     * [let OpenVidu take care of the video players](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)). See [[VideoElementEvent]] to learn more.\n     *\n     * The [[Publisher]] object will dispatch a `streamPlaying` event once the local streams starts playing. See [[StreamManagerEvent]] to learn more.\n     *\n     * @param targetElement  HTML DOM element (or its `id` attribute) in which the video element of the Publisher will be inserted (see [[PublisherProperties.insertMode]]). If *null* or *undefined* no default video will be created for this Publisher.\n     * You can always call method [[Publisher.addVideoElement]] or [[Publisher.createVideoElement]] to manage the video elements on your own (see [Manage video players](/docs/how-do-i/manage-videos) section)\n     * @param completionHandler `error` parameter is null if `initPublisher` succeeds, and is defined if it fails.\n     *                          `completionHandler` function is called before the Publisher dispatches an `accessAllowed` or an `accessDenied` event\n     */\n    OpenVidu.prototype.initPublisher = function (targetElement, param2, param3) {\n        var properties;\n        if (!!param2 && (typeof param2 !== 'function')) {\n            // Matches 'initPublisher(targetElement, properties)' or 'initPublisher(targetElement, properties, completionHandler)'\n            properties = param2;\n            properties = {\n                audioSource: (typeof properties.audioSource !== 'undefined') ? properties.audioSource : undefined,\n                frameRate: this.isMediaStreamTrack(properties.videoSource) ? undefined : ((typeof properties.frameRate !== 'undefined') ? properties.frameRate : undefined),\n                insertMode: (typeof properties.insertMode !== 'undefined') ? ((typeof properties.insertMode === 'string') ? VideoInsertMode_1.VideoInsertMode[properties.insertMode] : properties.insertMode) : VideoInsertMode_1.VideoInsertMode.APPEND,\n                mirror: (typeof properties.mirror !== 'undefined') ? properties.mirror : true,\n                publishAudio: (typeof properties.publishAudio !== 'undefined') ? properties.publishAudio : true,\n                publishVideo: (typeof properties.publishVideo !== 'undefined') ? properties.publishVideo : true,\n                resolution: this.isMediaStreamTrack(properties.videoSource) ? undefined : ((typeof properties.resolution !== 'undefined') ? properties.resolution : '640x480'),\n                videoSource: (typeof properties.videoSource !== 'undefined') ? properties.videoSource : undefined\n            };\n        }\n        else {\n            // Matches 'initPublisher(targetElement)' or 'initPublisher(targetElement, completionHandler)'\n            properties = {\n                insertMode: VideoInsertMode_1.VideoInsertMode.APPEND,\n                mirror: true,\n                publishAudio: true,\n                publishVideo: true,\n                resolution: '640x480'\n            };\n        }\n        var publisher = new Publisher_1.Publisher(targetElement, properties, this);\n        var completionHandler;\n        if (!!param2 && (typeof param2 === 'function')) {\n            completionHandler = param2;\n        }\n        else if (!!param3) {\n            completionHandler = param3;\n        }\n        publisher.initialize()\n            .then(function () {\n            if (completionHandler !== undefined) {\n                completionHandler(undefined);\n            }\n            publisher.emitEvent('accessAllowed', []);\n        })[\"catch\"](function (error) {\n            if (completionHandler !== undefined) {\n                completionHandler(error);\n            }\n            publisher.emitEvent('accessDenied', []);\n        });\n        this.publishers.push(publisher);\n        return publisher;\n    };\n    OpenVidu.prototype.initPublisherAsync = function (targetElement, properties) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var publisher;\n            var callback = function (error) {\n                if (!!error) {\n                    reject(error);\n                }\n                else {\n                    resolve(publisher);\n                }\n            };\n            if (!!properties) {\n                publisher = _this.initPublisher(targetElement, properties, callback);\n            }\n            else {\n                publisher = _this.initPublisher(targetElement, callback);\n            }\n        });\n    };\n    /**\n     * Returns a new local recorder for recording streams straight away from the browser\n     * @param stream  Stream to record\n     */\n    OpenVidu.prototype.initLocalRecorder = function (stream) {\n        return new LocalRecorder_1.LocalRecorder(stream);\n    };\n    /**\n     * Checks if the browser supports OpenVidu\n     * @returns 1 if the browser supports OpenVidu, 0 otherwise\n     */\n    OpenVidu.prototype.checkSystemRequirements = function () {\n        var browser = platform.name;\n        var version = platform.version;\n        if ((browser !== 'Chrome') && (browser !== 'Chrome Mobile') &&\n            (browser !== 'Firefox') && (browser !== 'Firefox Mobile') && (browser !== 'Firefox for iOS') &&\n            (browser !== 'Opera') && (browser !== 'Opera Mobile') &&\n            (browser !== 'Safari')) {\n            return 0;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * Collects information about the media input devices available on the system. You can pass property `deviceId` of a [[Device]] object as value of `audioSource` or `videoSource` properties in [[initPublisher]] method\n     */\n    OpenVidu.prototype.getDevices = function () {\n        return new Promise(function (resolve, reject) {\n            navigator.mediaDevices.enumerateDevices().then(function (deviceInfos) {\n                var devices = [];\n                deviceInfos.forEach(function (deviceInfo) {\n                    if (deviceInfo.kind === 'audioinput' || deviceInfo.kind === 'videoinput') {\n                        devices.push({\n                            kind: deviceInfo.kind,\n                            deviceId: deviceInfo.deviceId,\n                            label: deviceInfo.label\n                        });\n                    }\n                });\n                resolve(devices);\n            })[\"catch\"](function (error) {\n                console.error('Error getting devices', error);\n                reject(error);\n            });\n        });\n    };\n    /**\n     * Get a MediaStream object that you can customize before calling [[initPublisher]] (pass _MediaStreamTrack_ property of the _MediaStream_ value resolved by the Promise as `audioSource` or `videoSource` properties in [[initPublisher]])\n     *\n     * Parameter `options` is the same as in [[initPublisher]] second parameter (of type [[PublisherProperties]]), but only the following properties will be applied: `audioSource`, `videoSource`, `frameRate`, `resolution`\n     *\n     * To customize the Publisher's video, the API for HTMLCanvasElement is very useful. For example, to get a black-and-white video at 10 fps and HD resolution with no sound:\n     * ```\n     * var OV = new OpenVidu();\n     * var FRAME_RATE = 10;\n     *\n     * OV.getUserMedia({\n     *    audioSource: false;\n     *    videoSource: undefined,\n     *    resolution: '1280x720',\n     *    frameRate: FRAME_RATE\n     * })\n     * .then(mediaStream => {\n     *\n     *    var videoTrack = mediaStream.getVideoTracks()[0];\n     *    var video = document.createElement('video');\n     *    video.srcObject = new MediaStream([videoTrack]);\n     *\n     *    var canvas = document.createElement('canvas');\n     *    var ctx = canvas.getContext('2d');\n     *    ctx.filter = 'grayscale(100%)';\n     *\n     *    video.addEventListener('play', () => {\n     *      var loop = () => {\n     *        if (!video.paused && !video.ended) {\n     *          ctx.drawImage(video, 0, 0, 300, 170);\n     *          setTimeout(loop, 1000/ FRAME_RATE); // Drawing at 10 fps\n     *        }\n     *      };\n     *      loop();\n     *    });\n     *    video.play();\n     *\n     *    var grayVideoTrack = canvas.captureStream(FRAME_RATE).getVideoTracks()[0];\n     *    var publisher = this.OV.initPublisher(\n     *      myHtmlTarget,\n     *      {\n     *        audioSource: false,\n     *        videoSource: grayVideoTrack\n     *      });\n     * });\n     * ```\n     */\n    OpenVidu.prototype.getUserMedia = function (options) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.generateMediaConstraints(options)\n                .then(function (constraints) {\n                navigator.mediaDevices.getUserMedia(constraints)\n                    .then(function (mediaStream) {\n                    resolve(mediaStream);\n                })[\"catch\"](function (error) {\n                    var errorName;\n                    var errorMessage = error.toString();\n                    if (!(options.videoSource === 'screen')) {\n                        errorName = OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED;\n                    }\n                    else {\n                        errorName = OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED;\n                    }\n                    reject(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                });\n            })[\"catch\"](function (error) {\n                reject(error);\n            });\n        });\n    };\n    /* tslint:disable:no-empty */\n    /**\n     * Disable all logging except error level\n     */\n    OpenVidu.prototype.enableProdMode = function () {\n        console.log = function () { };\n        console.debug = function () { };\n        console.info = function () { };\n        console.warn = function () { };\n    };\n    /* tslint:enable:no-empty */\n    /**\n     * Set OpenVidu advanced configuration options. Currently `configuration` is an object with the following optional properties (see [[OpenViduAdvancedConfiguration]] for more details):\n     * - `iceServers`: set custom STUN/TURN servers to be used by OpenVidu Browser\n     * - `screenShareChromeExtension`: url to a custom screen share extension for Chrome to be used instead of the default one, based on ours [https://github.com/OpenVidu/openvidu-screen-sharing-chrome-extension](https://github.com/OpenVidu/openvidu-screen-sharing-chrome-extension)\n     * - `publisherSpeakingEventsOptions`: custom configuration for the [[PublisherSpeakingEvent]] feature\n     */\n    OpenVidu.prototype.setAdvancedConfiguration = function (configuration) {\n        this.advancedConfiguration = configuration;\n    };\n    /* Hidden methods */\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.generateMediaConstraints = function (publisherProperties) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var audio, video;\n            if (publisherProperties.audioSource === null || publisherProperties.audioSource === false) {\n                audio = false;\n            }\n            else if (publisherProperties.audioSource === undefined) {\n                audio = true;\n            }\n            else {\n                audio = publisherProperties.audioSource;\n            }\n            if (publisherProperties.videoSource === null || publisherProperties.videoSource === false) {\n                video = false;\n            }\n            else {\n                video = {\n                    height: {\n                        ideal: 480\n                    },\n                    width: {\n                        ideal: 640\n                    }\n                };\n            }\n            var mediaConstraints = {\n                audio: audio,\n                video: video\n            };\n            if (typeof mediaConstraints.audio === 'string') {\n                mediaConstraints.audio = { deviceId: { exact: mediaConstraints.audio } };\n            }\n            if (mediaConstraints.video) {\n                if (!!publisherProperties.resolution) {\n                    var widthAndHeight = publisherProperties.resolution.toLowerCase().split('x');\n                    var width = Number(widthAndHeight[0]);\n                    var height = Number(widthAndHeight[1]);\n                    mediaConstraints.video.width.ideal = width;\n                    mediaConstraints.video.height.ideal = height;\n                }\n                if (!!publisherProperties.frameRate) {\n                    mediaConstraints.video.frameRate = { ideal: publisherProperties.frameRate };\n                }\n                if (!!publisherProperties.videoSource && typeof publisherProperties.videoSource === 'string') {\n                    if (publisherProperties.videoSource === 'screen') {\n                        if (platform.name !== 'Chrome' && platform.name.indexOf('Firefox') === -1) {\n                            var error = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED, 'You can only screen share in desktop Chrome and Firefox. Detected browser: ' + platform.name);\n                            console.error(error);\n                            reject(error);\n                        }\n                        else {\n                            if (!!_this.advancedConfiguration.screenShareChromeExtension && !(platform.name.indexOf('Firefox') !== -1)) {\n                                // Custom screen sharing extension for Chrome\n                                screenSharing.getScreenConstraints(function (error, screenConstraints) {\n                                    if (!!error || !!screenConstraints.mandatory && screenConstraints.mandatory.chromeMediaSource === 'screen') {\n                                        if (error === 'permission-denied' || error === 'PermissionDeniedError') {\n                                            var error_1 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED, 'You must allow access to one window of your desktop');\n                                            console.error(error_1);\n                                            reject(error_1);\n                                        }\n                                        else {\n                                            var extensionId = _this.advancedConfiguration.screenShareChromeExtension.split('/').pop().trim();\n                                            screenSharing.getChromeExtensionStatus(extensionId, function (status) {\n                                                if (status === 'installed-disabled') {\n                                                    var error_2 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED, 'You must enable the screen extension');\n                                                    console.error(error_2);\n                                                    reject(error_2);\n                                                }\n                                                if (status === 'not-installed') {\n                                                    var error_3 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED, _this.advancedConfiguration.screenShareChromeExtension);\n                                                    console.error(error_3);\n                                                    reject(error_3);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    else {\n                                        mediaConstraints.video = screenConstraints;\n                                        resolve(mediaConstraints);\n                                    }\n                                });\n                            }\n                            else {\n                                // Default screen sharing extension for Chrome\n                                screenSharingAuto.getScreenId(function (error, sourceId, screenConstraints) {\n                                    if (!!error) {\n                                        if (error === 'not-installed') {\n                                            var extensionUrl = !!_this.advancedConfiguration.screenShareChromeExtension ? _this.advancedConfiguration.screenShareChromeExtension :\n                                                'https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold';\n                                            var error_4 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED, extensionUrl);\n                                            console.error(error_4);\n                                            reject(error_4);\n                                        }\n                                        else if (error === 'installed-disabled') {\n                                            var error_5 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED, 'You must enable the screen extension');\n                                            console.error(error_5);\n                                            reject(error_5);\n                                        }\n                                        else if (error === 'permission-denied') {\n                                            var error_6 = new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED, 'You must allow access to one window of your desktop');\n                                            console.error(error_6);\n                                            reject(error_6);\n                                        }\n                                    }\n                                    else {\n                                        mediaConstraints.video = screenConstraints.video;\n                                        resolve(mediaConstraints);\n                                    }\n                                });\n                            }\n                            publisherProperties.videoSource = 'screen';\n                        }\n                    }\n                    else {\n                        // tslint:disable-next-line:no-string-literal\n                        mediaConstraints.video['deviceId'] = { exact: publisherProperties.videoSource };\n                        resolve(mediaConstraints);\n                    }\n                }\n                else {\n                    resolve(mediaConstraints);\n                }\n            }\n            else {\n                resolve(mediaConstraints);\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.startWs = function (onConnectSucces) {\n        var config = {\n            heartbeat: 5000,\n            sendCloseMessage: false,\n            ws: {\n                uri: this.wsUri,\n                useSockJS: false,\n                onconnected: onConnectSucces,\n                ondisconnect: this.disconnectCallback.bind(this),\n                onreconnecting: this.reconnectingCallback.bind(this),\n                onreconnected: this.reconnectedCallback.bind(this)\n            },\n            rpc: {\n                requestTimeout: 10000,\n                participantJoined: this.session.onParticipantJoined.bind(this.session),\n                participantPublished: this.session.onParticipantPublished.bind(this.session),\n                participantUnpublished: this.session.onParticipantUnpublished.bind(this.session),\n                participantLeft: this.session.onParticipantLeft.bind(this.session),\n                participantEvicted: this.session.onParticipantEvicted.bind(this.session),\n                recordingStarted: this.session.onRecordingStarted.bind(this.session),\n                recordingStopped: this.session.onRecordingStopped.bind(this.session),\n                sendMessage: this.session.onNewMessage.bind(this.session),\n                streamPropertyChanged: this.session.onStreamPropertyChanged.bind(this.session),\n                iceCandidate: this.session.recvIceCandidate.bind(this.session),\n                mediaError: this.session.onMediaError.bind(this.session)\n            }\n        };\n        this.jsonRpcClient = new RpcBuilder.clients.JsonRpcClient(config);\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.closeWs = function () {\n        this.jsonRpcClient.close();\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.sendRequest = function (method, params, callback) {\n        if (params && params instanceof Function) {\n            callback = params;\n            params = {};\n        }\n        console.debug('Sending request: {method:\"' + method + '\", params: ' + JSON.stringify(params) + '}');\n        this.jsonRpcClient.send(method, params, callback);\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.isMediaStreamTrack = function (mediaSource) {\n        var is = (!!mediaSource &&\n            mediaSource.enabled !== undefined && typeof mediaSource.enabled === 'boolean' &&\n            mediaSource.id !== undefined && typeof mediaSource.id === 'string' &&\n            mediaSource.kind !== undefined && typeof mediaSource.kind === 'string' &&\n            mediaSource.label !== undefined && typeof mediaSource.label === 'string' &&\n            mediaSource.muted !== undefined && typeof mediaSource.muted === 'boolean' &&\n            mediaSource.readyState !== undefined && typeof mediaSource.readyState === 'string');\n        return is;\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.getWsUri = function () {\n        return this.wsUri;\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.getSecret = function () {\n        return this.secret;\n    };\n    /**\n     * @hidden\n     */\n    OpenVidu.prototype.getRecorder = function () {\n        return this.recorder;\n    };\n    /* Private methods */\n    OpenVidu.prototype.disconnectCallback = function () {\n        console.warn('Websocket connection lost');\n        if (this.isRoomAvailable()) {\n            this.session.onLostConnection();\n        }\n        else {\n            alert('Connection error. Please reload page.');\n        }\n    };\n    OpenVidu.prototype.reconnectingCallback = function () {\n        console.warn('Websocket connection lost (reconnecting)');\n        if (this.isRoomAvailable()) {\n            this.session.onLostConnection();\n        }\n        else {\n            alert('Connection error. Please reload page.');\n        }\n    };\n    OpenVidu.prototype.reconnectedCallback = function () {\n        console.warn('Websocket reconnected');\n    };\n    OpenVidu.prototype.isRoomAvailable = function () {\n        if (this.session !== undefined && this.session instanceof Session_1.Session) {\n            return true;\n        }\n        else {\n            console.warn('Session instance not found');\n            return false;\n        }\n    };\n    return OpenVidu;\n}());\nexports.OpenVidu = OpenVidu;\n//# sourceMappingURL=OpenVidu.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Session_1 = require(\"./Session\");\nvar Stream_1 = require(\"./Stream\");\nvar StreamManager_1 = require(\"./StreamManager\");\nvar StreamEvent_1 = require(\"../OpenViduInternal/Events/StreamEvent\");\nvar StreamPropertyChangedEvent_1 = require(\"../OpenViduInternal/Events/StreamPropertyChangedEvent\");\nvar VideoElementEvent_1 = require(\"../OpenViduInternal/Events/VideoElementEvent\");\nvar OpenViduError_1 = require(\"../OpenViduInternal/Enums/OpenViduError\");\nvar platform = require(\"platform\");\n/**\n * Packs local media streams. Participants can publish it to a session. Initialized with [[OpenVidu.initPublisher]] method\n */\nvar Publisher = /** @class */ (function (_super) {\n    __extends(Publisher, _super);\n    /**\n     * @hidden\n     */\n    function Publisher(targEl, properties, openvidu) {\n        var _this = _super.call(this, new Stream_1.Stream((!!openvidu.session) ? openvidu.session : new Session_1.Session(openvidu), { publisherProperties: properties, mediaConstraints: {} }), targEl) || this;\n        /**\n         * Whether the Publisher has been granted access to the requested input devices or not\n         */\n        _this.accessAllowed = false;\n        /**\n         * Whether you have called [[Publisher.subscribeToRemote]] with value `true` or `false` (*false* by default)\n         */\n        _this.isSubscribedToRemote = false;\n        _this.accessDenied = false;\n        _this.properties = properties;\n        _this.openvidu = openvidu;\n        _this.stream.ee.on('local-stream-destroyed-by-disconnect', function (reason) {\n            var streamEvent = new StreamEvent_1.StreamEvent(true, _this, 'streamDestroyed', _this.stream, reason);\n            _this.emitEvent('streamDestroyed', [streamEvent]);\n            streamEvent.callDefaultBehavior();\n        });\n        return _this;\n    }\n    /**\n     * Publish or unpublish the audio stream (if available). Calling this method twice in a row passing same value will have no effect\n     *\n     * #### Events dispatched\n     *\n     * The [[Session]] object of the local participant will dispatch a `streamPropertyChanged` event with `changedProperty` set to `\"audioActive\"` and `reason` set to `\"publishAudio\"`\n     * The [[Publisher]] object of the local participant will also dispatch the exact same event\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `streamPropertyChanged` event with `changedProperty` set to `\"audioActive\"` and `reason` set to `\"publishAudio\"`\n     * The respective [[Subscriber]] object of every other participant receiving this Publisher's stream will also dispatch the exact same event\n     *\n     * See [[StreamPropertyChangedEvent]] to learn more.\n     *\n     * @param value `true` to publish the audio stream, `false` to unpublish it\n     */\n    Publisher.prototype.publishAudio = function (value) {\n        var _this = this;\n        if (this.stream.audioActive !== value) {\n            this.stream.getMediaStream().getAudioTracks().forEach(function (track) {\n                track.enabled = value;\n            });\n            this.session.openvidu.sendRequest('streamPropertyChanged', {\n                streamId: this.stream.streamId,\n                property: 'audioActive',\n                newValue: value,\n                reason: 'publishAudio'\n            }, function (error, response) {\n                if (error) {\n                    console.error(\"Error sending 'streamPropertyChanged' event\", error);\n                }\n                else {\n                    _this.session.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this.session, _this.stream, 'audioActive', value, !value, 'publishAudio')]);\n                    _this.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this, _this.stream, 'audioActive', value, !value, 'publishAudio')]);\n                }\n            });\n            this.stream.audioActive = value;\n            console.info(\"'Publisher' has \" + (value ? 'published' : 'unpublished') + ' its audio stream');\n        }\n    };\n    /**\n     * Publish or unpublish the video stream (if available). Calling this method twice in a row passing same value will have no effect\n     *\n     * #### Events dispatched\n     *\n     * The [[Session]] object of the local participant will dispatch a `streamPropertyChanged` event with `changedProperty` set to `\"videoActive\"` and `reason` set to `\"publishVideo\"`\n     * The [[Publisher]] object of the local participant will also dispatch the exact same event\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `streamPropertyChanged` event with `changedProperty` set to `\"videoActive\"` and `reason` set to `\"publishVideo\"`\n     * The respective [[Subscriber]] object of every other participant receiving this Publisher's stream will also dispatch the exact same event\n     *\n     * See [[StreamPropertyChangedEvent]] to learn more.\n     *\n     * @param value `true` to publish the video stream, `false` to unpublish it\n     */\n    Publisher.prototype.publishVideo = function (value) {\n        var _this = this;\n        if (this.stream.videoActive !== value) {\n            this.stream.getMediaStream().getVideoTracks().forEach(function (track) {\n                track.enabled = value;\n            });\n            this.session.openvidu.sendRequest('streamPropertyChanged', {\n                streamId: this.stream.streamId,\n                property: 'videoActive',\n                newValue: value,\n                reason: 'publishVideo'\n            }, function (error, response) {\n                if (error) {\n                    console.error(\"Error sending 'streamPropertyChanged' event\", error);\n                }\n                else {\n                    _this.session.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this.session, _this.stream, 'videoActive', value, !value, 'publishVideo')]);\n                    _this.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this, _this.stream, 'videoActive', value, !value, 'publishVideo')]);\n                }\n            });\n            this.stream.videoActive = value;\n            console.info(\"'Publisher' has \" + (value ? 'published' : 'unpublished') + ' its video stream');\n        }\n    };\n    /**\n     * Call this method before [[Session.publish]] if you prefer to subscribe to your Publisher's remote stream instead of using the local stream, as any other user would do.\n     */\n    Publisher.prototype.subscribeToRemote = function (value) {\n        value = (value !== undefined) ? value : true;\n        this.isSubscribedToRemote = value;\n        this.stream.subscribeToMyRemote(value);\n    };\n    /**\n     * See [[EventDispatcher.on]]\n     */\n    Publisher.prototype.on = function (type, handler) {\n        var _this = this;\n        _super.prototype.on.call(this, type, handler);\n        if (type === 'streamCreated') {\n            if (!!this.stream && this.stream.isLocalStreamPublished) {\n                this.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, this, 'streamCreated', this.stream, '')]);\n            }\n            else {\n                this.stream.ee.on('stream-created-by-publisher', function () {\n                    _this.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, _this, 'streamCreated', _this.stream, '')]);\n                });\n            }\n        }\n        if (type === 'remoteVideoPlaying') {\n            if (this.stream.displayMyRemote() && this.videos[0] && this.videos[0].video &&\n                this.videos[0].video.currentTime > 0 &&\n                this.videos[0].video.paused === false &&\n                this.videos[0].video.ended === false &&\n                this.videos[0].video.readyState === 4) {\n                this.emitEvent('remoteVideoPlaying', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'remoteVideoPlaying')]);\n            }\n        }\n        if (type === 'accessAllowed') {\n            if (this.accessAllowed) {\n                this.emitEvent('accessAllowed', []);\n            }\n        }\n        if (type === 'accessDenied') {\n            if (this.accessDenied) {\n                this.emitEvent('accessDenied', []);\n            }\n        }\n        return this;\n    };\n    /**\n     * See [[EventDispatcher.once]]\n     */\n    Publisher.prototype.once = function (type, handler) {\n        var _this = this;\n        _super.prototype.once.call(this, type, handler);\n        if (type === 'streamCreated') {\n            if (!!this.stream && this.stream.isLocalStreamPublished) {\n                this.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, this, 'streamCreated', this.stream, '')]);\n            }\n            else {\n                this.stream.ee.once('stream-created-by-publisher', function () {\n                    _this.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, _this, 'streamCreated', _this.stream, '')]);\n                });\n            }\n        }\n        if (type === 'remoteVideoPlaying') {\n            if (this.stream.displayMyRemote() && this.videos[0] && this.videos[0].video &&\n                this.videos[0].video.currentTime > 0 &&\n                this.videos[0].video.paused === false &&\n                this.videos[0].video.ended === false &&\n                this.videos[0].video.readyState === 4) {\n                this.emitEvent('remoteVideoPlaying', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'remoteVideoPlaying')]);\n            }\n        }\n        if (type === 'accessAllowed') {\n            if (this.accessAllowed) {\n                this.emitEvent('accessAllowed', []);\n            }\n        }\n        if (type === 'accessDenied') {\n            if (this.accessDenied) {\n                this.emitEvent('accessDenied', []);\n            }\n        }\n        return this;\n    };\n    /* Hidden methods */\n    /**\n     * @hidden\n     */\n    Publisher.prototype.initialize = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var errorCallback = function (openViduError) {\n                _this.accessDenied = true;\n                _this.accessAllowed = false;\n                reject(openViduError);\n            };\n            var successCallback = function (mediaStream) {\n                _this.accessAllowed = true;\n                _this.accessDenied = false;\n                if (_this.openvidu.isMediaStreamTrack(_this.properties.audioSource)) {\n                    mediaStream.removeTrack(mediaStream.getAudioTracks()[0]);\n                    mediaStream.addTrack(_this.properties.audioSource);\n                }\n                if (_this.openvidu.isMediaStreamTrack(_this.properties.videoSource)) {\n                    mediaStream.removeTrack(mediaStream.getVideoTracks()[0]);\n                    mediaStream.addTrack(_this.properties.videoSource);\n                }\n                // Apply PublisherProperties.publishAudio and PublisherProperties.publishVideo\n                if (!!mediaStream.getAudioTracks()[0]) {\n                    mediaStream.getAudioTracks()[0].enabled = !!_this.stream.outboundStreamOpts.publisherProperties.publishAudio;\n                }\n                if (!!mediaStream.getVideoTracks()[0]) {\n                    mediaStream.getVideoTracks()[0].enabled = !!_this.stream.outboundStreamOpts.publisherProperties.publishVideo;\n                }\n                _this.stream.setMediaStream(mediaStream);\n                if (!_this.stream.displayMyRemote()) {\n                    // When we are subscribed to our remote we don't still set the MediaStream object in the video elements to\n                    // avoid early 'streamPlaying' event\n                    _this.stream.updateMediaStreamInVideos();\n                }\n                if (!!_this.firstVideoElement) {\n                    _this.createVideoElement(_this.firstVideoElement.targetElement, _this.properties.insertMode);\n                }\n                delete _this.firstVideoElement;\n                if (!_this.stream.isSendScreen() && !!mediaStream.getVideoTracks()[0]) {\n                    // With no screen share, video dimension can be set directly from MediaStream (getSettings)\n                    // Orientation must be checked for mobile devices (width and height are reversed)\n                    var _a = mediaStream.getVideoTracks()[0].getSettings(), width = _a.width, height = _a.height;\n                    if (platform.name.toLowerCase().indexOf('mobile') !== -1 && (window.innerHeight > window.innerWidth)) {\n                        // Mobile portrait mode\n                        _this.stream.videoDimensions = {\n                            width: height || 0,\n                            height: width || 0\n                        };\n                    }\n                    else {\n                        _this.stream.videoDimensions = {\n                            width: width || 0,\n                            height: height || 0\n                        };\n                    }\n                    _this.stream.isLocalStreamReadyToPublish = true;\n                    _this.stream.ee.emitEvent('stream-ready-to-publish', []);\n                }\n                else {\n                    // With screen share, video dimension must be got from a video element (onloadedmetadata event)\n                    _this.videoReference = document.createElement('video');\n                    _this.videoReference.srcObject = mediaStream;\n                    _this.videoReference.onloadedmetadata = function () {\n                        _this.stream.videoDimensions = {\n                            width: _this.videoReference.videoWidth,\n                            height: _this.videoReference.videoHeight\n                        };\n                        _this.screenShareResizeInterval = setInterval(function () {\n                            var firefoxSettings = mediaStream.getVideoTracks()[0].getSettings();\n                            var newWidth = (platform.name === 'Chrome') ? _this.videoReference.videoWidth : firefoxSettings.width;\n                            var newHeight = (platform.name === 'Chrome') ? _this.videoReference.videoHeight : firefoxSettings.height;\n                            if (_this.stream.isLocalStreamPublished &&\n                                (newWidth !== _this.stream.videoDimensions.width ||\n                                    newHeight !== _this.stream.videoDimensions.height)) {\n                                var oldValue_1 = { width: _this.stream.videoDimensions.width, height: _this.stream.videoDimensions.height };\n                                _this.stream.videoDimensions = {\n                                    width: newWidth || 0,\n                                    height: newHeight || 0\n                                };\n                                var newValue_1 = JSON.stringify(_this.stream.videoDimensions);\n                                _this.session.openvidu.sendRequest('streamPropertyChanged', {\n                                    streamId: _this.stream.streamId,\n                                    property: 'videoDimensions',\n                                    newValue: newValue_1,\n                                    reason: 'screenResized'\n                                }, function (error, response) {\n                                    if (error) {\n                                        console.error(\"Error sending 'streamPropertyChanged' event\", error);\n                                    }\n                                    else {\n                                        _this.session.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this.session, _this.stream, 'videoDimensions', newValue_1, oldValue_1, 'screenResized')]);\n                                        _this.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this, _this.stream, 'videoDimensions', newValue_1, oldValue_1, 'screenResized')]);\n                                    }\n                                });\n                            }\n                        }, 500);\n                        _this.stream.isLocalStreamReadyToPublish = true;\n                        _this.stream.ee.emitEvent('stream-ready-to-publish', []);\n                    };\n                }\n                resolve();\n            };\n            _this.openvidu.generateMediaConstraints(_this.properties)\n                .then(function (constraints) {\n                var outboundStreamOptions = {\n                    mediaConstraints: constraints,\n                    publisherProperties: _this.properties\n                };\n                _this.stream.setOutboundStreamOptions(outboundStreamOptions);\n                var constraintsAux = {};\n                var timeForDialogEvent = 1250;\n                if (_this.stream.isSendVideo() || _this.stream.isSendAudio()) {\n                    var definedAudioConstraint_1 = ((constraints.audio === undefined) ? true : constraints.audio);\n                    constraintsAux.audio = _this.stream.isSendScreen() ? false : definedAudioConstraint_1;\n                    constraintsAux.video = constraints.video;\n                    var startTime_1 = Date.now();\n                    _this.setPermissionDialogTimer(timeForDialogEvent);\n                    navigator.mediaDevices.getUserMedia(constraintsAux)\n                        .then(function (mediaStream) {\n                        _this.clearPermissionDialogTimer(startTime_1, timeForDialogEvent);\n                        if (_this.stream.isSendScreen() && _this.stream.isSendAudio()) {\n                            // When getting desktop as user media audio constraint must be false. Now we can ask for it if required\n                            constraintsAux.audio = definedAudioConstraint_1;\n                            constraintsAux.video = false;\n                            startTime_1 = Date.now();\n                            _this.setPermissionDialogTimer(timeForDialogEvent);\n                            navigator.mediaDevices.getUserMedia(constraintsAux)\n                                .then(function (audioOnlyStream) {\n                                _this.clearPermissionDialogTimer(startTime_1, timeForDialogEvent);\n                                mediaStream.addTrack(audioOnlyStream.getAudioTracks()[0]);\n                                successCallback(mediaStream);\n                            })[\"catch\"](function (error) {\n                                _this.clearPermissionDialogTimer(startTime_1, timeForDialogEvent);\n                                var errorName, errorMessage;\n                                switch (error.name.toLowerCase()) {\n                                    case 'notfounderror':\n                                        errorName = OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND;\n                                        errorMessage = error.toString();\n                                        errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                        break;\n                                    case 'notallowederror':\n                                        errorName = OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED;\n                                        errorMessage = error.toString();\n                                        errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                        break;\n                                    case 'overconstrainederror':\n                                        if (error.constraint.toLowerCase() === 'deviceid') {\n                                            errorName = OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND;\n                                            errorMessage = \"Audio input device with deviceId '\" + constraints.video.deviceId.exact + \"' not found\";\n                                        }\n                                        else {\n                                            errorName = OpenViduError_1.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR;\n                                            errorMessage = \"Audio input device doesn't support the value passed for constraint '\" + error.constraint + \"'\";\n                                        }\n                                        errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                        break;\n                                }\n                            });\n                        }\n                        else {\n                            successCallback(mediaStream);\n                        }\n                    })[\"catch\"](function (error) {\n                        _this.clearPermissionDialogTimer(startTime_1, timeForDialogEvent);\n                        var errorName, errorMessage;\n                        switch (error.name.toLowerCase()) {\n                            case 'notfounderror':\n                                navigator.mediaDevices.getUserMedia({\n                                    audio: false,\n                                    video: constraints.video\n                                })\n                                    .then(function (mediaStream) {\n                                    mediaStream.getVideoTracks().forEach(function (track) {\n                                        track.stop();\n                                    });\n                                    errorName = OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND;\n                                    errorMessage = error.toString();\n                                    errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                })[\"catch\"](function (e) {\n                                    errorName = OpenViduError_1.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND;\n                                    errorMessage = error.toString();\n                                    errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                });\n                                break;\n                            case 'notallowederror':\n                                errorName = _this.stream.isSendScreen() ? OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED : OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED;\n                                errorMessage = error.toString();\n                                errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                break;\n                            case 'overconstrainederror':\n                                navigator.mediaDevices.getUserMedia({\n                                    audio: false,\n                                    video: constraints.video\n                                })\n                                    .then(function (mediaStream) {\n                                    mediaStream.getVideoTracks().forEach(function (track) {\n                                        track.stop();\n                                    });\n                                    if (error.constraint.toLowerCase() === 'deviceid') {\n                                        errorName = OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND;\n                                        errorMessage = \"Audio input device with deviceId '\" + constraints.audio.deviceId.exact + \"' not found\";\n                                    }\n                                    else {\n                                        errorName = OpenViduError_1.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR;\n                                        errorMessage = \"Audio input device doesn't support the value passed for constraint '\" + error.constraint + \"'\";\n                                    }\n                                    errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                })[\"catch\"](function (e) {\n                                    if (error.constraint.toLowerCase() === 'deviceid') {\n                                        errorName = OpenViduError_1.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND;\n                                        errorMessage = \"Video input device with deviceId '\" + constraints.video.deviceId.exact + \"' not found\";\n                                    }\n                                    else {\n                                        errorName = OpenViduError_1.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR;\n                                        errorMessage = \"Video input device doesn't support the value passed for constraint '\" + error.constraint + \"'\";\n                                    }\n                                    errorCallback(new OpenViduError_1.OpenViduError(errorName, errorMessage));\n                                });\n                                break;\n                        }\n                    });\n                }\n                else {\n                    reject(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.NO_INPUT_SOURCE_SET, \"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time when calling 'OpenVidu.initPublisher'\"));\n                }\n            })[\"catch\"](function (error) {\n                errorCallback(error);\n            });\n        });\n    };\n    /**\n     * @hidden\n     */\n    Publisher.prototype.updateSession = function (session) {\n        this.session = session;\n        this.stream.session = session;\n    };\n    /**\n     * @hidden\n     */\n    Publisher.prototype.reestablishStreamPlayingEvent = function () {\n        if (this.ee.getListeners('streamPlaying').length > 0) {\n            this.addPlayEventToFirstVideo();\n        }\n    };\n    /* Private methods */\n    Publisher.prototype.setPermissionDialogTimer = function (waitTime) {\n        var _this = this;\n        this.permissionDialogTimeout = setTimeout(function () {\n            _this.emitEvent('accessDialogOpened', []);\n        }, waitTime);\n    };\n    Publisher.prototype.clearPermissionDialogTimer = function (startTime, waitTime) {\n        clearTimeout(this.permissionDialogTimeout);\n        if ((Date.now() - startTime) > waitTime) {\n            // Permission dialog was shown and now is closed\n            this.emitEvent('accessDialogClosed', []);\n        }\n    };\n    return Publisher;\n}(StreamManager_1.StreamManager));\nexports.Publisher = Publisher;\n//# sourceMappingURL=Publisher.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar Connection_1 = require(\"./Connection\");\nvar Subscriber_1 = require(\"./Subscriber\");\nvar ConnectionEvent_1 = require(\"../OpenViduInternal/Events/ConnectionEvent\");\nvar RecordingEvent_1 = require(\"../OpenViduInternal/Events/RecordingEvent\");\nvar SessionDisconnectedEvent_1 = require(\"../OpenViduInternal/Events/SessionDisconnectedEvent\");\nvar SignalEvent_1 = require(\"../OpenViduInternal/Events/SignalEvent\");\nvar StreamEvent_1 = require(\"../OpenViduInternal/Events/StreamEvent\");\nvar StreamPropertyChangedEvent_1 = require(\"../OpenViduInternal/Events/StreamPropertyChangedEvent\");\nvar OpenViduError_1 = require(\"../OpenViduInternal/Enums/OpenViduError\");\nvar VideoInsertMode_1 = require(\"../OpenViduInternal/Enums/VideoInsertMode\");\nvar platform = require(\"platform\");\nvar EventEmitter = require(\"wolfy87-eventemitter\");\n/**\n * Represents a video call. It can also be seen as a videoconference room where multiple users can connect.\n * Participants who publish their videos to a session can be seen by the rest of users connected to that specific session.\n * Initialized with [[OpenVidu.initSession]] method\n */\nvar Session = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function Session(openvidu) {\n        /**\n         * Collection of all StreamManagers of this Session ([[Publisher]] and [[Subscriber]])\n         */\n        this.streamManagers = [];\n        // This map is only used to avoid race condition between 'joinRoom' response and 'onParticipantPublished' notification\n        /**\n         * @hidden\n         */\n        this.remoteStreamsCreated = {};\n        /**\n         * @hidden\n         */\n        this.remoteConnections = {};\n        /**\n         * @hidden\n         */\n        this.speakingEventsEnabled = false;\n        this.ee = new EventEmitter();\n        this.openvidu = openvidu;\n    }\n    /**\n     * Connects to the session using `token`. Parameter `metadata` allows you to pass extra data to share with other users when\n     * they receive `streamCreated` event. The structure of `metadata` string is up to you (maybe some standarized format\n     * as JSON or XML is a good idea), the only restriction is a maximum length of 10000 chars.\n     *\n     * This metadata is not considered secure, as it is generated in the client side. To pass securized data, add it as a parameter in the\n     * token generation operation (through the API REST, openvidu-java-client or openvidu-node-client).\n     *\n     * Only after the returned Promise is successfully resolved [[Session.connection]] object will be available and properly defined.\n     *\n     * #### Events dispatched\n     *\n     * The [[Session]] object of the local participant will first dispatch one or more `connectionCreated` events upon successful termination of this method:\n     * - First one for your own local Connection object, so you can retrieve [[Session.connection]] property.\n     * - Then one for each remote Connection previously connected to the Session, if any. Any other remote user connecting to the Session after you have\n     * successfully connected will also dispatch a `connectionCreated` event when they do so.\n     *\n     * The [[Session]] object of the local participant will also dispatch a `streamCreated` event for each remote active [[Publisher]] that was already streaming\n     * when connecting, just after dispatching all remote `connectionCreated` events.\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `connectionCreated` event.\n     *\n     * See [[ConnectionEvent]] and [[StreamEvent]] to learn more.\n     *\n     * @returns A Promise to which you must subscribe that is resolved if the the connection to the Session was successful and rejected with an Error object if not\n     *\n     */\n    Session.prototype.connect = function (token, metadata) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.processToken(token);\n            if (_this.openvidu.checkSystemRequirements()) {\n                // Early configuration to deactivate automatic subscription to streams\n                _this.options = {\n                    sessionId: _this.sessionId,\n                    participantId: token,\n                    metadata: !!metadata ? _this.stringClientMetadata(metadata) : ''\n                };\n                _this.connectAux(token).then(function () {\n                    resolve();\n                })[\"catch\"](function (error) {\n                    reject(error);\n                });\n            }\n            else {\n                reject(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.BROWSER_NOT_SUPPORTED, 'Browser ' + platform.name + ' ' + platform.version + ' is not supported in OpenVidu'));\n            }\n        });\n    };\n    /**\n     * Leaves the session, destroying all streams and deleting the user as a participant.\n     *\n     * #### Events dispatched\n     *\n     * The [[Session]] object of the local participant will dispatch a `sessionDisconnected` event.\n     * This event will automatically unsubscribe the leaving participant from every Subscriber object of the session (this includes closing the WebRTCPeer connection and disposing all MediaStreamTracks)\n     * and also deletes any HTML video element associated to each Subscriber (only those [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)).\n     * For every video removed, each Subscriber object will dispatch a `videoElementDestroyed` event.\n     * Call `event.preventDefault()` upon event `sessionDisconnected` to avoid this behavior and take care of disposing and cleaning all the Subscriber objects yourself.\n     * See [[SessionDisconnectedEvent]] and [[VideoElementEvent]] to learn more to learn more.\n     *\n     * The [[Publisher]] object of the local participant will dispatch a `streamDestroyed` event if there is a [[Publisher]] object publishing to the session.\n     * This event will automatically stop all media tracks and delete any HTML video element associated to it (only those [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)).\n     * For every video removed, the Publisher object will dispatch a `videoElementDestroyed` event.\n     * Call `event.preventDefault()` upon event `streamDestroyed` if you want to clean the Publisher object on your own or re-publish it in a different Session (to do so it is a mandatory requirement to call `Session.unpublish()`\n     * or/and `Session.disconnect()` in the previous session). See [[StreamEvent]] and [[VideoElementEvent]] to learn more.\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `streamDestroyed` event if the disconnected participant was publishing.\n     * This event will automatically unsubscribe the Subscriber object from the session (this includes closing the WebRTCPeer connection and disposing all MediaStreamTracks)\n     * and also deletes any HTML video element associated to that Subscriber (only those [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)).\n     * For every video removed, the Subscriber object will dispatch a `videoElementDestroyed` event.\n     * Call `event.preventDefault()` upon event `streamDestroyed` to avoid this default behavior and take care of disposing and cleaning the Subscriber object yourself.\n     * See [[StreamEvent]] and [[VideoElementEvent]] to learn more.\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `connectionDestroyed` event in any case. See [[ConnectionEvent]] to learn more.\n     */\n    Session.prototype.disconnect = function () {\n        this.leave(false, 'disconnect');\n    };\n    /**\n     * Subscribes to a `stream`, adding a new HTML video element to DOM with `subscriberProperties` settings. This method is usually called in the callback of `streamCreated` event.\n     *\n     * #### Events dispatched\n     *\n     * The [[Subscriber]] object will dispatch a `videoElementCreated` event once the HTML video element has been added to DOM (only if you\n     * [let OpenVidu take care of the video players](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)). See [[VideoElementEvent]] to learn more.\n     *\n     * The [[Subscriber]] object will dispatch a `streamPlaying` event once the remote stream starts playing. See [[StreamManagerEvent]] to learn more.\n     *\n     * @param stream Stream object to subscribe to\n     * @param targetElement HTML DOM element (or its `id` attribute) in which the video element of the Subscriber will be inserted (see [[SubscriberProperties.insertMode]]). If *null* or *undefined* no default video will be created for this Subscriber.\n     * You can always call method [[Subscriber.addVideoElement]] or [[Subscriber.createVideoElement]] to manage the video elements on your own (see [Manage video players](/docs/how-do-i/manage-videos) section)\n     * @param completionHandler `error` parameter is null if `subscribe` succeeds, and is defined if it fails.\n     */\n    Session.prototype.subscribe = function (stream, targetElement, param3, param4) {\n        var properties = {};\n        if (!!param3 && typeof param3 !== 'function') {\n            properties = {\n                insertMode: (typeof param3.insertMode !== 'undefined') ? ((typeof param3.insertMode === 'string') ? VideoInsertMode_1.VideoInsertMode[param3.insertMode] : properties.insertMode) : VideoInsertMode_1.VideoInsertMode.APPEND,\n                subscribeToAudio: (typeof param3.subscribeToAudio !== 'undefined') ? param3.subscribeToAudio : true,\n                subscribeToVideo: (typeof param3.subscribeToVideo !== 'undefined') ? param3.subscribeToVideo : true\n            };\n        }\n        else {\n            properties = {\n                insertMode: VideoInsertMode_1.VideoInsertMode.APPEND,\n                subscribeToAudio: true,\n                subscribeToVideo: true\n            };\n        }\n        var completionHandler;\n        if (!!param3 && (typeof param3 === 'function')) {\n            completionHandler = param3;\n        }\n        else if (!!param4) {\n            completionHandler = param4;\n        }\n        console.info('Subscribing to ' + stream.connection.connectionId);\n        stream.subscribe()\n            .then(function () {\n            console.info('Subscribed correctly to ' + stream.connection.connectionId);\n            if (completionHandler !== undefined) {\n                completionHandler(undefined);\n            }\n        })[\"catch\"](function (error) {\n            if (completionHandler !== undefined) {\n                completionHandler(error);\n            }\n        });\n        var subscriber = new Subscriber_1.Subscriber(stream, targetElement, properties);\n        if (!!subscriber.targetElement) {\n            stream.streamManager.createVideoElement(subscriber.targetElement, properties.insertMode);\n        }\n        return subscriber;\n    };\n    Session.prototype.subscribeAsync = function (stream, targetElement, properties) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var subscriber;\n            var callback = function (error) {\n                if (!!error) {\n                    reject(error);\n                }\n                else {\n                    resolve(subscriber);\n                }\n            };\n            if (!!properties) {\n                subscriber = _this.subscribe(stream, targetElement, properties, callback);\n            }\n            else {\n                subscriber = _this.subscribe(stream, targetElement, callback);\n            }\n        });\n    };\n    /**\n     * Unsubscribes from `subscriber`, automatically removing its associated HTML video elements.\n     *\n     * #### Events dispatched\n     *\n     * The [[Subscriber]] object will dispatch a `videoElementDestroyed` event for each video associated to it that was removed from DOM.\n     * Only videos [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)) will be automatically removed\n     *\n     * See [[VideoElementEvent]] to learn more\n     */\n    Session.prototype.unsubscribe = function (subscriber) {\n        var connectionId = subscriber.stream.connection.connectionId;\n        console.info('Unsubscribing from ' + connectionId);\n        this.openvidu.sendRequest('unsubscribeFromVideo', { sender: subscriber.stream.connection.connectionId }, function (error, response) {\n            if (error) {\n                console.error('Error unsubscribing from ' + connectionId, error);\n            }\n            else {\n                console.info('Unsubscribed correctly from ' + connectionId);\n            }\n            subscriber.stream.disposeWebRtcPeer();\n            subscriber.stream.disposeMediaStream();\n        });\n        subscriber.stream.streamManager.removeAllVideos();\n    };\n    /**\n     * Publishes to the Session the Publisher object\n     *\n     * #### Events dispatched\n     *\n     * The local [[Publisher]] object will dispatch a `streamCreated` event upon successful termination of this method. See [[StreamEvent]] to learn more.\n     *\n     * The local [[Publisher]] object will dispatch a `streamPlaying` once the media stream starts playing. See [[StreamManagerEvent]] to learn more.\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `streamCreated` event so they can subscribe to it. See [[StreamEvent]] to learn more.\n     *\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved only after the publisher was successfully published and rejected with an Error object if not\n     */\n    Session.prototype.publish = function (publisher) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            publisher.session = _this;\n            publisher.stream.session = _this;\n            if (!publisher.stream.isLocalStreamPublished) {\n                // 'Session.unpublish(Publisher)' has NOT been called\n                _this.connection.addStream(publisher.stream);\n                publisher.stream.publish()\n                    .then(function () {\n                    resolve();\n                })[\"catch\"](function (error) {\n                    reject(error);\n                });\n            }\n            else {\n                // 'Session.unpublish(Publisher)' has been called. Must initialize again Publisher\n                publisher.initialize()\n                    .then(function () {\n                    _this.connection.addStream(publisher.stream);\n                    publisher.reestablishStreamPlayingEvent();\n                    publisher.stream.publish()\n                        .then(function () {\n                        resolve();\n                    })[\"catch\"](function (error) {\n                        reject(error);\n                    });\n                })[\"catch\"](function (error) {\n                    reject(error);\n                });\n            }\n        });\n    };\n    /**\n     * Unpublishes from the Session the Publisher object.\n     *\n     * #### Events dispatched\n     *\n     * The [[Publisher]] object of the local participant will dispatch a `streamDestroyed` event.\n     * This event will automatically stop all media tracks and delete any HTML video element associated to this Publisher\n     * (only those videos [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)).\n     * For every video removed, the Publisher object will dispatch a `videoElementDestroyed` event.\n     * Call `event.preventDefault()` upon event `streamDestroyed` if you want to clean the Publisher object on your own or re-publish it in a different Session.\n     *\n     * The [[Session]] object of every other participant connected to the session will dispatch a `streamDestroyed` event.\n     * This event will automatically unsubscribe the Subscriber object from the session (this includes closing the WebRTCPeer connection and disposing all MediaStreamTracks) and\n     * delete any HTML video element associated to it (only those [created by OpenVidu Browser](/docs/how-do-i/manage-videos/#let-openvidu-take-care-of-the-video-players)).\n     * For every video removed, the Subscriber object will dispatch a `videoElementDestroyed` event.\n     * Call `event.preventDefault()` upon event `streamDestroyed` to avoid this default behavior and take care of disposing and cleaning the Subscriber object on your own.\n     *\n     * See [[StreamEvent]] and [[VideoElementEvent]] to learn more.\n     */\n    Session.prototype.unpublish = function (publisher) {\n        var stream = publisher.stream;\n        if (!stream.connection) {\n            console.error('The associated Connection object of this Publisher is null', stream);\n            return;\n        }\n        else if (stream.connection !== this.connection) {\n            console.error('The associated Connection object of this Publisher is not your local Connection.' +\n                \"Only moderators can force unpublish on remote Streams via 'forceUnpublish' method\", stream);\n            return;\n        }\n        else {\n            console.info('Unpublishing local media (' + stream.connection.connectionId + ')');\n            this.openvidu.sendRequest('unpublishVideo', function (error, response) {\n                if (error) {\n                    console.error(error);\n                }\n                else {\n                    console.info('Media unpublished correctly');\n                }\n            });\n            stream.disposeWebRtcPeer();\n            delete stream.connection.stream;\n            var streamEvent = new StreamEvent_1.StreamEvent(true, publisher, 'streamDestroyed', publisher.stream, 'unpublish');\n            publisher.emitEvent('streamDestroyed', [streamEvent]);\n            streamEvent.callDefaultBehavior();\n        }\n    };\n    /**\n     * Sends one signal. `signal` object has the following optional properties:\n     * ```json\n     * {data:string, to:Connection[], type:string}\n     * ```\n     * All users subscribed to that signal (`session.on('signal:type', ...)` or `session.on('signal', ...)` for all signals) and whose Connection objects are in `to` array will receive it. Their local\n     * Session objects will dispatch a `signal` or `signal:type` event. See [[SignalEvent]] to learn more.\n     *\n     * @returns A Promise (to which you can optionally subscribe to) that is resolved if the message successfully reached openvidu-server and rejected with an Error object if not. _This doesn't\n     * mean that openvidu-server could resend the message to all the listed receivers._\n     */\n    /* tslint:disable:no-string-literal */\n    Session.prototype.signal = function (signal) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var signalMessage = {};\n            if (signal.to && signal.to.length > 0) {\n                var connectionIds_1 = [];\n                signal.to.forEach(function (connection) {\n                    connectionIds_1.push(connection.connectionId);\n                });\n                signalMessage['to'] = connectionIds_1;\n            }\n            else {\n                signalMessage['to'] = [];\n            }\n            signalMessage['data'] = signal.data ? signal.data : '';\n            signalMessage['type'] = signal.type ? signal.type : '';\n            _this.openvidu.sendRequest('sendMessage', {\n                message: JSON.stringify(signalMessage)\n            }, function (error, response) {\n                if (!!error) {\n                    reject(error);\n                }\n                else {\n                    resolve();\n                }\n            });\n        });\n    };\n    /* tslint:enable:no-string-literal */\n    /**\n     * See [[EventDispatcher.on]]\n     */\n    Session.prototype.on = function (type, handler) {\n        this.ee.on(type, function (event) {\n            if (event) {\n                console.info(\"Event '\" + type + \"' triggered by 'Session'\", event);\n            }\n            else {\n                console.info(\"Event '\" + type + \"' triggered by 'Session'\");\n            }\n            handler(event);\n        });\n        if (type === 'publisherStartSpeaking' || type === 'publisherStopSpeaking') {\n            this.speakingEventsEnabled = true;\n            // If there are already available remote streams, enable hark 'speaking' event in all of them\n            for (var connectionId in this.remoteConnections) {\n                var str = this.remoteConnections[connectionId].stream;\n                if (!!str && !str.speechEvent && str.hasAudio) {\n                    str.enableSpeakingEvents();\n                }\n            }\n        }\n        return this;\n    };\n    /**\n     * See [[EventDispatcher.once]]\n     */\n    Session.prototype.once = function (type, handler) {\n        this.ee.once(type, function (event) {\n            if (event) {\n                console.info(\"Event '\" + type + \"' triggered by 'Session'\", event);\n            }\n            else {\n                console.info(\"Event '\" + type + \"' triggered by 'Session'\");\n            }\n            handler(event);\n        });\n        if (type === 'publisherStartSpeaking' || type === 'publisherStopSpeaking') {\n            this.speakingEventsEnabled = true;\n            // If there are already available remote streams, enable hark in all of them\n            for (var connectionId in this.remoteConnections) {\n                var str = this.remoteConnections[connectionId].stream;\n                if (!!str && !str.speechEvent && str.hasAudio) {\n                    str.enableOnceSpeakingEvents();\n                }\n            }\n        }\n        return this;\n    };\n    /**\n     * See [[EventDispatcher.off]]\n     */\n    Session.prototype.off = function (type, handler) {\n        if (!handler) {\n            this.ee.removeAllListeners(type);\n        }\n        else {\n            this.ee.off(type, handler);\n        }\n        if (type === 'publisherStartSpeaking' || type === 'publisherStopSpeaking') {\n            this.speakingEventsEnabled = false;\n            // If there are already available remote streams, disablae hark in all of them\n            for (var connectionId in this.remoteConnections) {\n                var str = this.remoteConnections[connectionId].stream;\n                if (!!str && !!str.speechEvent) {\n                    str.disableSpeakingEvents();\n                }\n            }\n        }\n        return this;\n    };\n    /* Hidden methods */\n    /**\n     * @hidden\n     */\n    Session.prototype.onParticipantJoined = function (response) {\n        var _this = this;\n        // Connection shouldn't exist\n        this.getConnection(response.id, '')\n            .then(function (connection) {\n            console.warn('Connection ' + response.id + ' already exists in connections list');\n        })[\"catch\"](function (openViduError) {\n            var connection = new Connection_1.Connection(_this, response);\n            _this.remoteConnections[response.id] = connection;\n            _this.ee.emitEvent('connectionCreated', [new ConnectionEvent_1.ConnectionEvent(false, _this, 'connectionCreated', connection, '')]);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onParticipantLeft = function (msg) {\n        var _this = this;\n        this.getRemoteConnection(msg.name, 'Remote connection ' + msg.name + \" unknown when 'onParticipantLeft'. \" +\n            'Existing remote connections: ' + JSON.stringify(Object.keys(this.remoteConnections)))\n            .then(function (connection) {\n            if (!!connection.stream) {\n                var stream = connection.stream;\n                var streamEvent = new StreamEvent_1.StreamEvent(true, _this, 'streamDestroyed', stream, msg.reason);\n                _this.ee.emitEvent('streamDestroyed', [streamEvent]);\n                streamEvent.callDefaultBehavior();\n                delete _this.remoteStreamsCreated[stream.streamId];\n            }\n            delete _this.remoteConnections[connection.connectionId];\n            _this.ee.emitEvent('connectionDestroyed', [new ConnectionEvent_1.ConnectionEvent(false, _this, 'connectionDestroyed', connection, msg.reason)]);\n        })[\"catch\"](function (openViduError) {\n            console.error(openViduError);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onParticipantPublished = function (response) {\n        var _this = this;\n        var afterConnectionFound = function (connection) {\n            _this.remoteConnections[connection.connectionId] = connection;\n            if (!_this.remoteStreamsCreated[connection.stream.streamId]) {\n                // Avoid race condition between stream.subscribe() in \"onParticipantPublished\" and in \"joinRoom\" rpc callback\n                // This condition is false if openvidu-server sends \"participantPublished\" event to a subscriber participant that has\n                // already subscribed to certain stream in the callback of \"joinRoom\" method\n                _this.ee.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, _this, 'streamCreated', connection.stream, '')]);\n            }\n            _this.remoteStreamsCreated[connection.stream.streamId] = true;\n        };\n        // Get the existing Connection created on 'onParticipantJoined' for\n        // existing participants or create a new one for new participants\n        var connection;\n        this.getRemoteConnection(response.id, \"Remote connection '\" + response.id + \"' unknown when 'onParticipantPublished'. \" +\n            'Existing remote connections: ' + JSON.stringify(Object.keys(this.remoteConnections)))\n            .then(function (con) {\n            // Update existing Connection\n            connection = con;\n            response.metadata = con.data;\n            connection.options = response;\n            connection.initRemoteStreams(response.streams);\n            afterConnectionFound(connection);\n        })[\"catch\"](function (openViduError) {\n            // Create new Connection\n            connection = new Connection_1.Connection(_this, response);\n            afterConnectionFound(connection);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onParticipantUnpublished = function (msg) {\n        var _this = this;\n        this.getRemoteConnection(msg.name, \"Remote connection '\" + msg.name + \"' unknown when 'onParticipantUnpublished'. \" +\n            'Existing remote connections: ' + JSON.stringify(Object.keys(this.remoteConnections)))\n            .then(function (connection) {\n            var streamEvent = new StreamEvent_1.StreamEvent(true, _this, 'streamDestroyed', connection.stream, msg.reason);\n            _this.ee.emitEvent('streamDestroyed', [streamEvent]);\n            streamEvent.callDefaultBehavior();\n            // Deleting the remote stream\n            var streamId = connection.stream.streamId;\n            delete _this.remoteStreamsCreated[streamId];\n            connection.removeStream(streamId);\n        })[\"catch\"](function (openViduError) {\n            console.error(openViduError);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onParticipantEvicted = function (msg) {\n        /*this.getRemoteConnection(msg.name, 'Remote connection ' + msg.name + \" unknown when 'onParticipantLeft'. \" +\n            'Existing remote connections: ' + JSON.stringify(Object.keys(this.remoteConnections)))\n\n            .then(connection => {\n                if (!!connection.stream) {\n                    const stream = connection.stream;\n\n                    const streamEvent = new StreamEvent(true, this, 'streamDestroyed', stream, 'forceDisconnect');\n                    this.ee.emitEvent('streamDestroyed', [streamEvent]);\n                    streamEvent.callDefaultBehavior();\n\n                    delete this.remoteStreamsCreated[stream.streamId];\n                }\n                connection.dispose();\n                delete this.remoteConnections[connection.connectionId];\n                this.ee.emitEvent('connectionDestroyed', [new ConnectionEvent(false, this, 'connectionDestroyed', connection, 'forceDisconnect')]);\n            })\n            .catch(openViduError => {\n                console.error(openViduError);\n            });*/\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onNewMessage = function (msg) {\n        var _this = this;\n        console.info('New signal: ' + JSON.stringify(msg));\n        this.getConnection(msg.from, \"Connection '\" + msg.from + \"' unknow when 'onNewMessage'. Existing remote connections: \"\n            + JSON.stringify(Object.keys(this.remoteConnections)) + '. Existing local connection: ' + this.connection.connectionId)\n            .then(function (connection) {\n            _this.ee.emitEvent('signal', [new SignalEvent_1.SignalEvent(_this, msg.type, msg.data, connection)]);\n            _this.ee.emitEvent('signal:' + msg.type, [new SignalEvent_1.SignalEvent(_this, msg.type, msg.data, connection)]);\n        })[\"catch\"](function (openViduError) {\n            console.error(openViduError);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onStreamPropertyChanged = function (msg) {\n        var _this = this;\n        this.getRemoteConnection(msg.connectionId, 'Remote connection ' + msg.connectionId + \" unknown when 'onStreamPropertyChanged'. \" +\n            'Existing remote connections: ' + JSON.stringify(Object.keys(this.remoteConnections)))\n            .then(function (connection) {\n            if (!!connection.stream && connection.stream.streamId === msg.streamId) {\n                var stream = connection.stream;\n                var oldValue = void 0;\n                switch (msg.property) {\n                    case 'audioActive':\n                        oldValue = stream.audioActive;\n                        msg.newValue = msg.newValue === 'true';\n                        stream.audioActive = msg.newValue;\n                        break;\n                    case 'videoActive':\n                        oldValue = stream.videoActive;\n                        msg.newValue = msg.newValue === 'true';\n                        stream.videoActive = msg.newValue;\n                        break;\n                    case 'videoDimensions':\n                        oldValue = stream.videoDimensions;\n                        msg.newValue = JSON.parse(JSON.parse(msg.newValue));\n                        stream.videoDimensions = msg.newValue;\n                        break;\n                }\n                _this.ee.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(_this, stream, msg.property, msg.newValue, oldValue, msg.reason)]);\n                stream.streamManager.emitEvent('streamPropertyChanged', [new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(stream.streamManager, stream, msg.property, msg.newValue, oldValue, msg.reason)]);\n            }\n            else {\n                console.error(\"No stream with streamId '\" + msg.streamId + \"' found for connection '\" + msg.connectionId + \"' on 'streamPropertyChanged' event\");\n            }\n        })[\"catch\"](function (openViduError) {\n            console.error(openViduError);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.recvIceCandidate = function (msg) {\n        var candidate = {\n            candidate: msg.candidate,\n            sdpMid: msg.sdpMid,\n            sdpMLineIndex: msg.sdpMLineIndex,\n            toJSON: function () {\n                return { candidate: msg.candidate };\n            }\n        };\n        this.getConnection(msg.endpointName, 'Connection not found for endpoint ' + msg.endpointName + '. Ice candidate will be ignored: ' + candidate)\n            .then(function (connection) {\n            var stream = connection.stream;\n            stream.getWebRtcPeer().addIceCandidate(candidate)[\"catch\"](function (error) {\n                console.error('Error adding candidate for ' + stream.streamId\n                    + ' stream of endpoint ' + msg.endpointName + ': ' + error);\n            });\n        })[\"catch\"](function (openViduError) {\n            console.error(openViduError);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onSessionClosed = function (msg) {\n        console.info('Session closed: ' + JSON.stringify(msg));\n        var s = msg.room;\n        if (s !== undefined) {\n            this.ee.emitEvent('session-closed', [{\n                    session: s\n                }]);\n        }\n        else {\n            console.warn('Session undefined on session closed', msg);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onLostConnection = function () {\n        /*if (!this.connection) {\n\n            console.warn('Not connected to session: if you are not debugging, this is probably a certificate error');\n\n            const url = 'https://' + this.openvidu.getWsUri().split('wss://')[1].split('/openvidu')[0];\n            if (window.confirm('If you are not debugging, this is probably a certificate error at \\\"' + url + '\\\"\\n\\nClick OK to navigate and accept it')) {\n                location.assign(url + '/accept-certificate');\n            }\n            return;\n        }*/\n        console.warn('Lost connection in Session ' + this.sessionId);\n        if (!!this.sessionId && !this.connection.disposed) {\n            this.leave(true, 'networkDisconnect');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onMediaError = function (params) {\n        console.error('Media error: ' + JSON.stringify(params));\n        var err = params.error;\n        if (err) {\n            this.ee.emitEvent('error-media', [{\n                    error: err\n                }]);\n        }\n        else {\n            console.warn('Received undefined media error. Params:', params);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onRecordingStarted = function (response) {\n        this.ee.emitEvent('recordingStarted', [new RecordingEvent_1.RecordingEvent(this, 'recordingStarted', response.id, response.name)]);\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.onRecordingStopped = function (response) {\n        this.ee.emitEvent('recordingStopped', [new RecordingEvent_1.RecordingEvent(this, 'recordingStopped', response.id, response.name)]);\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.emitEvent = function (type, eventArray) {\n        this.ee.emitEvent(type, eventArray);\n    };\n    /**\n     * @hidden\n     */\n    Session.prototype.leave = function (forced, reason) {\n        var _this = this;\n        forced = !!forced;\n        console.info('Leaving Session (forced=' + forced + ')');\n        if (!!this.connection) {\n            if (!this.connection.disposed && !forced) {\n                this.openvidu.sendRequest('leaveRoom', function (error, response) {\n                    if (error) {\n                        console.error(error);\n                    }\n                    _this.openvidu.closeWs();\n                });\n            }\n            else {\n                this.openvidu.closeWs();\n            }\n            if (!!this.connection.stream) {\n                // Dispose Publisher's  local stream\n                this.connection.stream.disposeWebRtcPeer();\n                if (this.connection.stream.isLocalStreamPublished) {\n                    // Make Publisher object dispatch 'streamDestroyed' event if the Stream was published\n                    this.connection.stream.ee.emitEvent('local-stream-destroyed-by-disconnect', [reason]);\n                }\n            }\n            if (!this.connection.disposed) {\n                // Make Session object dispatch 'sessionDisconnected' event (if it is not already disposed)\n                var sessionDisconnectEvent = new SessionDisconnectedEvent_1.SessionDisconnectedEvent(this, reason);\n                this.ee.emitEvent('sessionDisconnected', [sessionDisconnectEvent]);\n                sessionDisconnectEvent.callDefaultBehavior();\n            }\n        }\n        else {\n            console.warn('You were not connected to the session ' + this.sessionId);\n        }\n    };\n    /* Private methods */\n    Session.prototype.connectAux = function (token) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.openvidu.startWs(function (error) {\n                if (!!error) {\n                    reject(error);\n                }\n                else {\n                    var joinParams = {\n                        token: (!!token) ? token : '',\n                        session: _this.sessionId,\n                        metadata: !!_this.options.metadata ? _this.options.metadata : '',\n                        secret: _this.openvidu.getSecret(),\n                        recorder: _this.openvidu.getRecorder()\n                    };\n                    _this.openvidu.sendRequest('joinRoom', joinParams, function (error, response) {\n                        if (!!error) {\n                            reject(error);\n                        }\n                        else {\n                            // Initialize local Connection object with values returned by openvidu-server\n                            _this.connection = new Connection_1.Connection(_this);\n                            _this.connection.connectionId = response.id;\n                            _this.connection.data = response.metadata;\n                            // Initialize remote Connections with value returned by openvidu-server\n                            var events_1 = {\n                                connections: new Array(),\n                                streams: new Array()\n                            };\n                            var existingParticipants = response.value;\n                            existingParticipants.forEach(function (participant) {\n                                var connection = new Connection_1.Connection(_this, participant);\n                                _this.remoteConnections[connection.connectionId] = connection;\n                                events_1.connections.push(connection);\n                                if (!!connection.stream) {\n                                    _this.remoteStreamsCreated[connection.stream.streamId] = true;\n                                    events_1.streams.push(connection.stream);\n                                }\n                            });\n                            // Own 'connectionCreated' event\n                            _this.ee.emitEvent('connectionCreated', [new ConnectionEvent_1.ConnectionEvent(false, _this, 'connectionCreated', _this.connection, '')]);\n                            // One 'connectionCreated' event for each existing connection in the session\n                            events_1.connections.forEach(function (connection) {\n                                _this.ee.emitEvent('connectionCreated', [new ConnectionEvent_1.ConnectionEvent(false, _this, 'connectionCreated', connection, '')]);\n                            });\n                            // One 'streamCreated' event for each active stream in the session\n                            events_1.streams.forEach(function (stream) {\n                                _this.ee.emitEvent('streamCreated', [new StreamEvent_1.StreamEvent(false, _this, 'streamCreated', stream, '')]);\n                            });\n                            resolve();\n                        }\n                    });\n                }\n            });\n        });\n    };\n    Session.prototype.stringClientMetadata = function (metadata) {\n        if (typeof metadata !== 'string') {\n            return JSON.stringify(metadata);\n        }\n        else {\n            return metadata;\n        }\n    };\n    Session.prototype.getConnection = function (connectionId, errorMessage) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var connection = _this.remoteConnections[connectionId];\n            if (!!connection) {\n                // Resolve remote connection\n                resolve(connection);\n            }\n            else {\n                if (_this.connection.connectionId === connectionId) {\n                    // Resolve local connection\n                    resolve(_this.connection);\n                }\n                else {\n                    // Connection not found. Reject with OpenViduError\n                    reject(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.GENERIC_ERROR, errorMessage));\n                }\n            }\n        });\n    };\n    Session.prototype.getRemoteConnection = function (connectionId, errorMessage) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var connection = _this.remoteConnections[connectionId];\n            if (!!connection) {\n                // Resolve remote connection\n                resolve(connection);\n            }\n            else {\n                // Remote connection not found. Reject with OpenViduError\n                reject(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.GENERIC_ERROR, errorMessage));\n            }\n        });\n    };\n    Session.prototype.processToken = function (token) {\n        var url = new URL(token);\n        this.sessionId = url.searchParams.get('sessionId');\n        var secret = url.searchParams.get('secret');\n        var recorder = url.searchParams.get('recorder');\n        var turnUsername = url.searchParams.get('turnUsername');\n        var turnCredential = url.searchParams.get('turnCredential');\n        var role = url.searchParams.get('role');\n        if (!!secret) {\n            this.openvidu.secret = secret;\n        }\n        if (!!recorder) {\n            this.openvidu.recorder = true;\n        }\n        if (!!turnUsername && !!turnCredential) {\n            var stunUrl = 'stun:' + url.hostname + ':3478';\n            var turnUrl1 = 'turn:' + url.hostname + ':3478';\n            var turnUrl2 = turnUrl1 + '?transport=tcp';\n            this.openvidu.iceServers = [\n                { urls: [stunUrl] },\n                { urls: [turnUrl1, turnUrl2], username: turnUsername, credential: turnCredential }\n            ];\n            console.log('TURN temp credentials [' + turnUsername + ':' + turnCredential + ']');\n        }\n        if (!!role) {\n            this.openvidu.role = role;\n        }\n        this.openvidu.wsUri = 'wss://' + url.host + '/openvidu';\n    };\n    return Session;\n}());\nexports.Session = Session;\n//# sourceMappingURL=Session.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar WebRtcPeer_1 = require(\"../OpenViduInternal/WebRtcPeer/WebRtcPeer\");\nvar WebRtcStats_1 = require(\"../OpenViduInternal/WebRtcStats/WebRtcStats\");\nvar PublisherSpeakingEvent_1 = require(\"../OpenViduInternal/Events/PublisherSpeakingEvent\");\nvar EventEmitter = require(\"wolfy87-eventemitter\");\nvar hark = require(\"hark\");\n/**\n * Represents each one of the media streams available in OpenVidu Server for certain session.\n * Each [[Publisher]] and [[Subscriber]] has an attribute of type Stream, as they give access\n * to one of them (sending and receiving it, respectively)\n */\nvar Stream = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function Stream(session, options) {\n        var _this = this;\n        /**\n         * @hidden\n         */\n        this.ee = new EventEmitter();\n        this.isSubscribeToRemote = false;\n        /**\n         * @hidden\n         */\n        this.isLocalStreamReadyToPublish = false;\n        /**\n         * @hidden\n         */\n        this.isLocalStreamPublished = false;\n        this.session = session;\n        if (options.hasOwnProperty('id')) {\n            // InboundStreamOptions: stream belongs to a Subscriber\n            this.inboundStreamOpts = options;\n            this.streamId = this.inboundStreamOpts.id;\n            this.hasAudio = this.inboundStreamOpts.hasAudio;\n            this.hasVideo = this.inboundStreamOpts.hasVideo;\n            if (this.hasAudio) {\n                this.audioActive = this.inboundStreamOpts.audioActive;\n            }\n            if (this.hasVideo) {\n                this.videoActive = this.inboundStreamOpts.videoActive;\n                this.typeOfVideo = (!this.inboundStreamOpts.typeOfVideo) ? undefined : this.inboundStreamOpts.typeOfVideo;\n                this.frameRate = (this.inboundStreamOpts.frameRate === -1) ? undefined : this.inboundStreamOpts.frameRate;\n                this.videoDimensions = this.inboundStreamOpts.videoDimensions;\n            }\n        }\n        else {\n            // OutboundStreamOptions: stream belongs to a Publisher\n            this.outboundStreamOpts = options;\n            this.hasAudio = this.isSendAudio();\n            this.hasVideo = this.isSendVideo();\n            if (this.hasAudio) {\n                this.audioActive = !!this.outboundStreamOpts.publisherProperties.publishAudio;\n            }\n            if (this.hasVideo) {\n                this.videoActive = !!this.outboundStreamOpts.publisherProperties.publishVideo;\n                this.frameRate = this.outboundStreamOpts.publisherProperties.frameRate;\n                if (this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack) {\n                    this.typeOfVideo = 'CUSTOM';\n                }\n                else {\n                    this.typeOfVideo = this.isSendScreen() ? 'SCREEN' : 'CAMERA';\n                }\n            }\n        }\n        this.ee.on('mediastream-updated', function () {\n            _this.streamManager.updateMediaStream(_this.mediaStream);\n            console.debug('Video srcObject [' + _this.mediaStream + '] updated in stream [' + _this.streamId + ']');\n        });\n    }\n    /* Hidden methods */\n    /**\n     * @hidden\n     */\n    Stream.prototype.getMediaStream = function () {\n        return this.mediaStream;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.setMediaStream = function (mediaStream) {\n        this.mediaStream = mediaStream;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.updateMediaStreamInVideos = function () {\n        this.ee.emitEvent('mediastream-updated');\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.getWebRtcPeer = function () {\n        return this.webRtcPeer;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.getRTCPeerConnection = function () {\n        return this.webRtcPeer.pc;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.subscribeToMyRemote = function (value) {\n        this.isSubscribeToRemote = value;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.setOutboundStreamOptions = function (outboundStreamOpts) {\n        this.outboundStreamOpts = outboundStreamOpts;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.subscribe = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.initWebRtcPeerReceive()\n                .then(function () {\n                resolve();\n            })[\"catch\"](function (error) {\n                reject(error);\n            });\n        });\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.publish = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.isLocalStreamReadyToPublish) {\n                _this.initWebRtcPeerSend()\n                    .then(function () {\n                    resolve();\n                })[\"catch\"](function (error) {\n                    reject(error);\n                });\n            }\n            else {\n                _this.ee.once('stream-ready-to-publish', function () {\n                    _this.publish()\n                        .then(function () {\n                        resolve();\n                    })[\"catch\"](function (error) {\n                        reject(error);\n                    });\n                });\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.disposeWebRtcPeer = function () {\n        if (this.webRtcPeer) {\n            this.webRtcPeer.dispose();\n        }\n        if (this.speechEvent) {\n            this.speechEvent.stop();\n        }\n        this.stopWebRtcStats();\n        console.info((!!this.outboundStreamOpts ? 'Outbound ' : 'Inbound ') + \"WebRTCPeer from 'Stream' with id [\" + this.streamId + '] is now closed');\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.disposeMediaStream = function () {\n        if (this.mediaStream) {\n            this.mediaStream.getAudioTracks().forEach(function (track) {\n                track.stop();\n            });\n            this.mediaStream.getVideoTracks().forEach(function (track) {\n                track.stop();\n            });\n            delete this.mediaStream;\n        }\n        console.info((!!this.outboundStreamOpts ? 'Local ' : 'Remote ') + \"MediaStream from 'Stream' with id [\" + this.streamId + '] is now disposed');\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.displayMyRemote = function () {\n        return this.isSubscribeToRemote;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.isSendAudio = function () {\n        return (!!this.outboundStreamOpts &&\n            this.outboundStreamOpts.publisherProperties.audioSource !== null &&\n            this.outboundStreamOpts.publisherProperties.audioSource !== false);\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.isSendVideo = function () {\n        return (!!this.outboundStreamOpts &&\n            this.outboundStreamOpts.publisherProperties.videoSource !== null &&\n            this.outboundStreamOpts.publisherProperties.videoSource !== false);\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.isSendScreen = function () {\n        return (!!this.outboundStreamOpts &&\n            this.outboundStreamOpts.publisherProperties.videoSource === 'screen');\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.setSpeechEventIfNotExists = function () {\n        if (!this.speechEvent) {\n            var harkOptions = this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions || {};\n            harkOptions.interval = (typeof harkOptions.interval === 'number') ? harkOptions.interval : 50;\n            harkOptions.threshold = (typeof harkOptions.threshold === 'number') ? harkOptions.threshold : -50;\n            this.speechEvent = hark(this.mediaStream, harkOptions);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.enableSpeakingEvents = function () {\n        var _this = this;\n        this.setSpeechEventIfNotExists();\n        this.speechEvent.on('speaking', function () {\n            _this.session.emitEvent('publisherStartSpeaking', [new PublisherSpeakingEvent_1.PublisherSpeakingEvent(_this.session, 'publisherStartSpeaking', _this.connection, _this.streamId)]);\n        });\n        this.speechEvent.on('stopped_speaking', function () {\n            _this.session.emitEvent('publisherStopSpeaking', [new PublisherSpeakingEvent_1.PublisherSpeakingEvent(_this.session, 'publisherStopSpeaking', _this.connection, _this.streamId)]);\n        });\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.enableOnceSpeakingEvents = function () {\n        var _this = this;\n        this.setSpeechEventIfNotExists();\n        this.speechEvent.on('speaking', function () {\n            _this.session.emitEvent('publisherStartSpeaking', [new PublisherSpeakingEvent_1.PublisherSpeakingEvent(_this.session, 'publisherStartSpeaking', _this.connection, _this.streamId)]);\n            _this.disableSpeakingEvents();\n        });\n        this.speechEvent.on('stopped_speaking', function () {\n            _this.session.emitEvent('publisherStopSpeaking', [new PublisherSpeakingEvent_1.PublisherSpeakingEvent(_this.session, 'publisherStopSpeaking', _this.connection, _this.streamId)]);\n            _this.disableSpeakingEvents();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.disableSpeakingEvents = function () {\n        this.speechEvent.stop();\n        this.speechEvent = undefined;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.isLocal = function () {\n        // inbound options undefined and outbound options defined\n        return (!this.inboundStreamOpts && !!this.outboundStreamOpts);\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.getSelectedIceCandidate = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.webRtcStats.getSelectedIceCandidateInfo()\n                .then(function (report) { return resolve(report); })[\"catch\"](function (error) { return reject(error); });\n        });\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.getRemoteIceCandidateList = function () {\n        return this.webRtcPeer.remoteCandidatesQueue;\n    };\n    /**\n     * @hidden\n     */\n    Stream.prototype.getLocalIceCandidateList = function () {\n        return this.webRtcPeer.localCandidatesQueue;\n    };\n    /* Private methods */\n    Stream.prototype.initWebRtcPeerSend = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var userMediaConstraints = {\n                audio: _this.isSendAudio(),\n                video: _this.isSendVideo()\n            };\n            var options = {\n                mediaStream: _this.mediaStream,\n                mediaConstraints: userMediaConstraints,\n                onicecandidate: _this.connection.sendIceCandidate.bind(_this.connection),\n                iceServers: _this.getIceServersConf(),\n                simulcast: false\n            };\n            var successCallback = function (sdpOfferParam) {\n                console.debug('Sending SDP offer to publish as '\n                    + _this.streamId, sdpOfferParam);\n                var typeOfVideo = '';\n                if (_this.isSendVideo()) {\n                    typeOfVideo = _this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack ? 'CUSTOM' : (_this.isSendScreen() ? 'SCREEN' : 'CAMERA');\n                }\n                _this.session.openvidu.sendRequest('publishVideo', {\n                    sdpOffer: sdpOfferParam,\n                    doLoopback: _this.displayMyRemote() || false,\n                    hasAudio: _this.isSendAudio(),\n                    hasVideo: _this.isSendVideo(),\n                    audioActive: _this.audioActive,\n                    videoActive: _this.videoActive,\n                    typeOfVideo: typeOfVideo,\n                    frameRate: !!_this.frameRate ? _this.frameRate : -1,\n                    videoDimensions: JSON.stringify(_this.videoDimensions)\n                }, function (error, response) {\n                    if (error) {\n                        reject('Error on publishVideo: ' + JSON.stringify(error));\n                    }\n                    else {\n                        _this.webRtcPeer.processAnswer(response.sdpAnswer)\n                            .then(function () {\n                            _this.streamId = response.id;\n                            _this.isLocalStreamPublished = true;\n                            if (_this.displayMyRemote()) {\n                                _this.remotePeerSuccessfullyEstablished();\n                            }\n                            _this.ee.emitEvent('stream-created-by-publisher');\n                            _this.initWebRtcStats();\n                            resolve();\n                        })[\"catch\"](function (error) {\n                            reject(error);\n                        });\n                        console.info(\"'Publisher' successfully published to session\");\n                    }\n                });\n            };\n            if (_this.displayMyRemote()) {\n                _this.webRtcPeer = new WebRtcPeer_1.WebRtcPeerSendrecv(options);\n            }\n            else {\n                _this.webRtcPeer = new WebRtcPeer_1.WebRtcPeerSendonly(options);\n            }\n            _this.webRtcPeer.generateOffer().then(function (offer) {\n                successCallback(offer);\n            })[\"catch\"](function (error) {\n                reject(new Error('(publish) SDP offer error: ' + JSON.stringify(error)));\n            });\n        });\n    };\n    Stream.prototype.initWebRtcPeerReceive = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var offerConstraints = {\n                audio: _this.inboundStreamOpts.hasAudio,\n                video: _this.inboundStreamOpts.hasVideo\n            };\n            console.debug(\"'Session.subscribe(Stream)' called. Constraints of generate SDP offer\", offerConstraints);\n            var options = {\n                onicecandidate: _this.connection.sendIceCandidate.bind(_this.connection),\n                mediaConstraints: offerConstraints,\n                iceServers: _this.getIceServersConf(),\n                simulcast: false\n            };\n            var successCallback = function (sdpOfferParam) {\n                console.debug('Sending SDP offer to subscribe to '\n                    + _this.streamId, sdpOfferParam);\n                _this.session.openvidu.sendRequest('receiveVideoFrom', {\n                    sender: _this.streamId,\n                    sdpOffer: sdpOfferParam\n                }, function (error, response) {\n                    if (error) {\n                        reject(new Error('Error on recvVideoFrom: ' + JSON.stringify(error)));\n                    }\n                    else {\n                        _this.webRtcPeer.processAnswer(response.sdpAnswer).then(function () {\n                            _this.remotePeerSuccessfullyEstablished();\n                            _this.initWebRtcStats();\n                            resolve();\n                        })[\"catch\"](function (error) {\n                            reject(error);\n                        });\n                    }\n                });\n            };\n            _this.webRtcPeer = new WebRtcPeer_1.WebRtcPeerRecvonly(options);\n            _this.webRtcPeer.generateOffer()\n                .then(function (offer) {\n                successCallback(offer);\n            })[\"catch\"](function (error) {\n                reject(new Error('(subscribe) SDP offer error: ' + JSON.stringify(error)));\n            });\n        });\n    };\n    Stream.prototype.remotePeerSuccessfullyEstablished = function () {\n        this.mediaStream = this.webRtcPeer.pc.getRemoteStreams()[0];\n        console.debug('Peer remote stream', this.mediaStream);\n        if (!!this.mediaStream) {\n            this.ee.emitEvent('mediastream-updated');\n            if (!this.displayMyRemote() && !!this.mediaStream.getAudioTracks()[0] && this.session.speakingEventsEnabled) {\n                this.enableSpeakingEvents();\n            }\n        }\n    };\n    Stream.prototype.initWebRtcStats = function () {\n        this.webRtcStats = new WebRtcStats_1.WebRtcStats(this);\n        this.webRtcStats.initWebRtcStats();\n    };\n    Stream.prototype.stopWebRtcStats = function () {\n        if (!!this.webRtcStats && this.webRtcStats.isEnabled()) {\n            this.webRtcStats.stopWebRtcStats();\n        }\n    };\n    Stream.prototype.getIceServersConf = function () {\n        var returnValue;\n        if (!!this.session.openvidu.advancedConfiguration.iceServers) {\n            returnValue = this.session.openvidu.advancedConfiguration.iceServers === 'freeice' ?\n                undefined :\n                this.session.openvidu.advancedConfiguration.iceServers;\n        }\n        else if (this.session.openvidu.iceServers) {\n            returnValue = this.session.openvidu.iceServers;\n        }\n        else {\n            returnValue = undefined;\n        }\n        return returnValue;\n    };\n    return Stream;\n}());\nexports.Stream = Stream;\n//# sourceMappingURL=Stream.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar StreamManagerEvent_1 = require(\"../OpenViduInternal/Events/StreamManagerEvent\");\nvar VideoElementEvent_1 = require(\"../OpenViduInternal/Events/VideoElementEvent\");\nvar VideoInsertMode_1 = require(\"../OpenViduInternal/Enums/VideoInsertMode\");\nvar EventEmitter = require(\"wolfy87-eventemitter\");\n/**\n * Interface in charge of displaying the media streams in the HTML DOM. This wraps any [[Publisher]] and [[Subscriber]] object.\n * You can insert as many video players fo the same Stream as you want by calling [[StreamManager.addVideoElement]] or\n * [[StreamManager.createVideoElement]].\n *\n * The use of StreamManager wrapper is particularly useful when you don't need to differentiate between Publisher or Subscriber streams or just\n * want to directly manage your own video elements (even more than one video element per Stream). This scenario is pretty common in\n * declarative, MVC frontend frameworks such as Angular, React or Vue.js\n */\nvar StreamManager = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function StreamManager(stream, targetElement) {\n        var _this = this;\n        /**\n         * All the videos displaying the Stream of this Publisher/Subscriber\n         */\n        this.videos = [];\n        /**\n         * @hidden\n         */\n        this.lazyLaunchVideoElementCreatedEvent = false;\n        /**\n         * @hidden\n         */\n        this.ee = new EventEmitter();\n        this.stream = stream;\n        this.stream.streamManager = this;\n        this.remote = !this.stream.isLocal();\n        if (!!targetElement) {\n            var targEl = void 0;\n            if (typeof targetElement === 'string') {\n                targEl = document.getElementById(targetElement);\n            }\n            else if (targetElement instanceof HTMLElement) {\n                targEl = targetElement;\n            }\n            if (!!targEl) {\n                this.firstVideoElement = {\n                    targetElement: targEl,\n                    video: document.createElement('video'),\n                    id: ''\n                };\n                this.targetElement = targEl;\n                this.element = targEl;\n            }\n        }\n        this.canPlayListener = function () {\n            if (_this.stream.isLocal()) {\n                if (!_this.stream.displayMyRemote()) {\n                    console.info(\"Your local 'Stream' with id [\" + _this.stream.streamId + '] video is now playing');\n                    _this.ee.emitEvent('videoPlaying', [new VideoElementEvent_1.VideoElementEvent(_this.videos[0].video, _this, 'videoPlaying')]);\n                }\n                else {\n                    console.info(\"Your own remote 'Stream' with id [\" + _this.stream.streamId + '] video is now playing');\n                    _this.ee.emitEvent('remoteVideoPlaying', [new VideoElementEvent_1.VideoElementEvent(_this.videos[0].video, _this, 'remoteVideoPlaying')]);\n                }\n            }\n            else {\n                console.info(\"Remote 'Stream' with id [\" + _this.stream.streamId + '] video is now playing');\n                _this.ee.emitEvent('videoPlaying', [new VideoElementEvent_1.VideoElementEvent(_this.videos[0].video, _this, 'videoPlaying')]);\n            }\n            _this.ee.emitEvent('streamPlaying', [new StreamManagerEvent_1.StreamManagerEvent(_this)]);\n        };\n    }\n    /**\n     * See [[EventDispatcher.on]]\n     */\n    StreamManager.prototype.on = function (type, handler) {\n        var _this = this;\n        this.ee.on(type, function (event) {\n            if (event) {\n                console.info(\"Event '\" + type + \"' triggered by '\" + (_this.remote ? 'Subscriber' : 'Publisher') + \"'\", event);\n            }\n            else {\n                console.info(\"Event '\" + type + \"' triggered by '\" + (_this.remote ? 'Subscriber' : 'Publisher') + \"'\");\n            }\n            handler(event);\n        });\n        if (type === 'videoElementCreated') {\n            if (!!this.stream && this.lazyLaunchVideoElementCreatedEvent) {\n                this.ee.emitEvent('videoElementCreated', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'videoElementCreated')]);\n                this.lazyLaunchVideoElementCreatedEvent = false;\n            }\n        }\n        if (type === 'streamPlaying' || type === 'videoPlaying') {\n            if (this.videos[0] && this.videos[0].video &&\n                this.videos[0].video.currentTime > 0 &&\n                this.videos[0].video.paused === false &&\n                this.videos[0].video.ended === false &&\n                this.videos[0].video.readyState === 4) {\n                this.ee.emitEvent('streamPlaying', [new StreamManagerEvent_1.StreamManagerEvent(this)]);\n                this.ee.emitEvent('videoPlaying', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'videoPlaying')]);\n            }\n        }\n        return this;\n    };\n    /**\n     * See [[EventDispatcher.once]]\n     */\n    StreamManager.prototype.once = function (type, handler) {\n        this.ee.once(type, function (event) {\n            if (event) {\n                console.info(\"Event '\" + type + \"' triggered once\", event);\n            }\n            else {\n                console.info(\"Event '\" + type + \"' triggered once\");\n            }\n            handler(event);\n        });\n        if (type === 'videoElementCreated') {\n            if (!!this.stream && this.lazyLaunchVideoElementCreatedEvent) {\n                this.ee.emitEvent('videoElementCreated', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'videoElementCreated')]);\n            }\n        }\n        if (type === 'streamPlaying' || type === 'videoPlaying') {\n            if (this.videos[0] && this.videos[0].video &&\n                this.videos[0].video.currentTime > 0 &&\n                this.videos[0].video.paused === false &&\n                this.videos[0].video.ended === false &&\n                this.videos[0].video.readyState === 4) {\n                this.ee.emitEvent('streamPlaying', [new StreamManagerEvent_1.StreamManagerEvent(this)]);\n                this.ee.emitEvent('videoPlaying', [new VideoElementEvent_1.VideoElementEvent(this.videos[0].video, this, 'videoPlaying')]);\n            }\n        }\n        return this;\n    };\n    /**\n     * See [[EventDispatcher.off]]\n     */\n    StreamManager.prototype.off = function (type, handler) {\n        if (!handler) {\n            this.ee.removeAllListeners(type);\n        }\n        else {\n            this.ee.off(type, handler);\n        }\n        return this;\n    };\n    /**\n     * Makes `video` element parameter display this [[stream]]. This is useful when you are\n     * [managing the video elements on your own](/docs/how-do-i/manage-videos/#you-take-care-of-the-video-players)\n     *\n     * Calling this method with a video already added to other Publisher/Subscriber will cause the video element to be\n     * disassociated from that previous Publisher/Subscriber and to be associated to this one.\n     *\n     * @returns 1 if the video wasn't associated to any other Publisher/Subscriber and has been successfully added to this one.\n     * 0 if the video was already added to this Publisher/Subscriber. -1 if the video was previously associated to any other\n     * Publisher/Subscriber and has been successfully disassociated from that one and properly added to this one.\n     */\n    StreamManager.prototype.addVideoElement = function (video) {\n        this.initializeVideoProperties(video);\n        // If the video element is already part of this StreamManager do nothing\n        for (var _i = 0, _a = this.videos; _i < _a.length; _i++) {\n            var v = _a[_i];\n            if (v.video === video) {\n                return 0;\n            }\n        }\n        var returnNumber = 1;\n        this.initializeVideoProperties(video);\n        for (var _b = 0, _c = this.stream.session.streamManagers; _b < _c.length; _b++) {\n            var streamManager = _c[_b];\n            if (streamManager.disassociateVideo(video)) {\n                returnNumber = -1;\n                break;\n            }\n        }\n        this.stream.session.streamManagers.forEach(function (streamManager) {\n            streamManager.disassociateVideo(video);\n        });\n        this.pushNewStreamManagerVideo({\n            video: video,\n            id: video.id\n        });\n        console.info('New video element associated to ', this);\n        return returnNumber;\n    };\n    /**\n     * Creates a new video element displaying this [[stream]]. This allows you to have multiple video elements displaying the same media stream.\n     *\n     * #### Events dispatched\n     *\n     * The Publisher/Subscriber object will dispatch a `videoElementCreated` event once the HTML video element has been added to DOM. See [[VideoElementEvent]]\n     *\n     * @param targetElement HTML DOM element (or its `id` attribute) in which the video element of the Publisher/Subscriber will be inserted\n     * @param insertMode How the video element will be inserted accordingly to `targetElemet`\n     */\n    StreamManager.prototype.createVideoElement = function (targetElement, insertMode) {\n        var targEl;\n        if (typeof targetElement === 'string') {\n            targEl = document.getElementById(targEl);\n            if (!targEl) {\n                throw new Error(\"The provided 'targetElement' couldn't be resolved to any HTML element: \" + targetElement);\n            }\n        }\n        else if (targetElement instanceof HTMLElement) {\n            targEl = targetElement;\n        }\n        else {\n            throw new Error(\"The provided 'targetElement' couldn't be resolved to any HTML element: \" + targetElement);\n        }\n        var video = document.createElement('video');\n        this.initializeVideoProperties(video);\n        var insMode = !!insertMode ? insertMode : VideoInsertMode_1.VideoInsertMode.APPEND;\n        switch (insMode) {\n            case VideoInsertMode_1.VideoInsertMode.AFTER:\n                targEl.parentNode.insertBefore(video, targEl.nextSibling);\n                break;\n            case VideoInsertMode_1.VideoInsertMode.APPEND:\n                targEl.appendChild(video);\n                break;\n            case VideoInsertMode_1.VideoInsertMode.BEFORE:\n                targEl.parentNode.insertBefore(video, targEl);\n                break;\n            case VideoInsertMode_1.VideoInsertMode.PREPEND:\n                targEl.insertBefore(video, targEl.childNodes[0]);\n                break;\n            case VideoInsertMode_1.VideoInsertMode.REPLACE:\n                targEl.parentNode.replaceChild(video, targEl);\n                break;\n            default:\n                insMode = VideoInsertMode_1.VideoInsertMode.APPEND;\n                targEl.appendChild(video);\n                break;\n        }\n        var v = {\n            targetElement: targEl,\n            video: video,\n            insertMode: insMode,\n            id: video.id\n        };\n        this.pushNewStreamManagerVideo(v);\n        this.ee.emitEvent('videoElementCreated', [new VideoElementEvent_1.VideoElementEvent(v.video, this, 'videoElementCreated')]);\n        this.lazyLaunchVideoElementCreatedEvent = !!this.firstVideoElement;\n        return video;\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.initializeVideoProperties = function (video) {\n        video.srcObject = this.stream.getMediaStream();\n        video.autoplay = true;\n        video.controls = false;\n        if (!video.id) {\n            video.id = (this.remote ? 'remote-' : 'local-') + 'video-' + this.stream.streamId;\n            // DEPRECATED property: assign once the property id if the user provided a valid targetElement\n            if (!this.id && !!this.targetElement) {\n                this.id = video.id;\n            }\n        }\n        if (!this.remote && !this.stream.displayMyRemote()) {\n            video.muted = true;\n            if (this.stream.outboundStreamOpts.publisherProperties.mirror) {\n                this.mirrorVideo(video);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.removeAllVideos = function () {\n        var _this = this;\n        for (var i = this.stream.session.streamManagers.length - 1; i >= 0; --i) {\n            if (this.stream.session.streamManagers[i] === this) {\n                this.stream.session.streamManagers.splice(i, 1);\n            }\n        }\n        this.videos.slice().reverse().forEach(function (streamManagerVideo, index, videos) {\n            // Remove oncanplay event listener (only OpenVidu browser one, not the user ones)\n            streamManagerVideo.video.removeEventListener('canplay', _this.canPlayListener);\n            if (!!streamManagerVideo.targetElement) {\n                // Only remove videos created by OpenVidu Browser (those generated by passing a valid targetElement in OpenVidu.initPublisher and Session.subscribe\n                // or those created by StreamManager.createVideoElement). These are also the videos that triggered a videoElementCreated event\n                streamManagerVideo.video.parentNode.removeChild(streamManagerVideo.video);\n                _this.ee.emitEvent('videoElementDestroyed', [new VideoElementEvent_1.VideoElementEvent(streamManagerVideo.video, _this, 'videoElementDestroyed')]);\n                _this.videos.splice(videos.length - 1 - index, 1);\n            }\n            else {\n                // Remove srcObject in all videos managed by the user\n                streamManagerVideo.video.srcObject = null;\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.disassociateVideo = function (video) {\n        var disassociated = false;\n        for (var i = 0; i < this.videos.length; i++) {\n            if (this.videos[i].video === video) {\n                this.videos.splice(i, 1);\n                disassociated = true;\n                console.info('Video element disassociated from ', this);\n                break;\n            }\n        }\n        return disassociated;\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.addPlayEventToFirstVideo = function () {\n        if ((!!this.videos[0]) && (!!this.videos[0].video) && (this.videos[0].video.oncanplay === null)) {\n            this.videos[0].video.addEventListener('canplay', this.canPlayListener);\n        }\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.updateMediaStream = function (mediaStream) {\n        this.videos.forEach(function (streamManagerVideo) {\n            streamManagerVideo.video.srcObject = mediaStream;\n        });\n    };\n    /**\n     * @hidden\n     */\n    StreamManager.prototype.emitEvent = function (type, eventArray) {\n        this.ee.emitEvent(type, eventArray);\n    };\n    StreamManager.prototype.pushNewStreamManagerVideo = function (streamManagerVideo) {\n        this.videos.push(streamManagerVideo);\n        this.addPlayEventToFirstVideo();\n        if (this.stream.session.streamManagers.indexOf(this) === -1) {\n            this.stream.session.streamManagers.push(this);\n        }\n    };\n    StreamManager.prototype.mirrorVideo = function (video) {\n        video.style.transform = 'rotateY(180deg)';\n        video.style.webkitTransform = 'rotateY(180deg)';\n    };\n    return StreamManager;\n}());\nexports.StreamManager = StreamManager;\n//# sourceMappingURL=StreamManager.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar StreamManager_1 = require(\"./StreamManager\");\n/**\n * Packs remote media streams. Participants automatically receive them when others publish their streams. Initialized with [[Session.subscribe]] method\n */\nvar Subscriber = /** @class */ (function (_super) {\n    __extends(Subscriber, _super);\n    /**\n     * @hidden\n     */\n    function Subscriber(stream, targEl, properties) {\n        var _this = _super.call(this, stream, targEl) || this;\n        _this.element = _this.targetElement;\n        _this.stream = stream;\n        _this.properties = properties;\n        return _this;\n    }\n    /**\n     * Subscribe or unsubscribe from the audio stream (if available). Calling this method twice in a row passing same value will have no effect\n     * @param value `true` to subscribe to the audio stream, `false` to unsubscribe from it\n     */\n    Subscriber.prototype.subscribeToAudio = function (value) {\n        this.stream.getMediaStream().getAudioTracks().forEach(function (track) {\n            track.enabled = value;\n        });\n        console.info(\"'Subscriber' has \" + (value ? 'subscribed to' : 'unsubscribed from') + ' its audio stream');\n        return this;\n    };\n    /**\n     * Subscribe or unsubscribe from the video stream (if available). Calling this method twice in a row passing same value will have no effect\n     * @param value `true` to subscribe to the video stream, `false` to unsubscribe from it\n     */\n    Subscriber.prototype.subscribeToVideo = function (value) {\n        this.stream.getMediaStream().getVideoTracks().forEach(function (track) {\n            track.enabled = value;\n        });\n        console.info(\"'Subscriber' has \" + (value ? 'subscribed to' : 'unsubscribed from') + ' its video stream');\n        return this;\n    };\n    return Subscriber;\n}(StreamManager_1.StreamManager));\nexports.Subscriber = Subscriber;\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar LocalRecorderState;\n(function (LocalRecorderState) {\n    LocalRecorderState[\"READY\"] = \"READY\";\n    LocalRecorderState[\"RECORDING\"] = \"RECORDING\";\n    LocalRecorderState[\"PAUSED\"] = \"PAUSED\";\n    LocalRecorderState[\"FINISHED\"] = \"FINISHED\";\n})(LocalRecorderState = exports.LocalRecorderState || (exports.LocalRecorderState = {}));\n//# sourceMappingURL=LocalRecorderState.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\n/**\n * Defines property [[OpenViduError.name]]\n */\nvar OpenViduErrorName;\n(function (OpenViduErrorName) {\n    /**\n     * Browser is not supported by OpenVidu.\n     * Returned upon unsuccessful [[Session.connect]]\n     */\n    OpenViduErrorName[\"BROWSER_NOT_SUPPORTED\"] = \"BROWSER_NOT_SUPPORTED\";\n    /**\n     * The user hasn't granted permissions to the required input device when the browser asked for them.\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]] or [[OpenVidu.getUserMedia]]\n     */\n    OpenViduErrorName[\"DEVICE_ACCESS_DENIED\"] = \"DEVICE_ACCESS_DENIED\";\n    /**\n     * The user hasn't granted permissions to capture some desktop screen when the browser asked for them.\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]] or [[OpenVidu.getUserMedia]]\n     */\n    OpenViduErrorName[\"SCREEN_CAPTURE_DENIED\"] = \"SCREEN_CAPTURE_DENIED\";\n    /**\n     * Browser does not support screen sharing.\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"SCREEN_SHARING_NOT_SUPPORTED\"] = \"SCREEN_SHARING_NOT_SUPPORTED\";\n    /**\n     * Only for Chrome, there's no screen sharing extension installed\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"SCREEN_EXTENSION_NOT_INSTALLED\"] = \"SCREEN_EXTENSION_NOT_INSTALLED\";\n    /**\n     * Only for Chrome, the screen sharing extension is installed but is disabled\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"SCREEN_EXTENSION_DISABLED\"] = \"SCREEN_EXTENSION_DISABLED\";\n    /**\n     * No video input device found with the provided deviceId (property [[PublisherProperties.videoSource]])\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"INPUT_VIDEO_DEVICE_NOT_FOUND\"] = \"INPUT_VIDEO_DEVICE_NOT_FOUND\";\n    /**\n     * No audio input device found with the provided deviceId (property [[PublisherProperties.audioSource]])\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"INPUT_AUDIO_DEVICE_NOT_FOUND\"] = \"INPUT_AUDIO_DEVICE_NOT_FOUND\";\n    /**\n     * Method [[OpenVidu.initPublisher]] has been called with properties `videoSource` and `audioSource` of\n     * [[PublisherProperties]] parameter both set to *false* or *null*\n     */\n    OpenViduErrorName[\"NO_INPUT_SOURCE_SET\"] = \"NO_INPUT_SOURCE_SET\";\n    /**\n     * Some media property of [[PublisherProperties]] such as `frameRate` or `resolution` is not supported\n     * by the input devices (whenever it is possible they are automatically adjusted to the most similar value).\n     * Returned upon unsuccessful [[OpenVidu.initPublisher]]\n     */\n    OpenViduErrorName[\"PUBLISHER_PROPERTIES_ERROR\"] = \"PUBLISHER_PROPERTIES_ERROR\";\n    /**\n     * _Not in use yet_\n     */\n    OpenViduErrorName[\"OPENVIDU_PERMISSION_DENIED\"] = \"OPENVIDU_PERMISSION_DENIED\";\n    /**\n     * _Not in use yet_\n     */\n    OpenViduErrorName[\"OPENVIDU_NOT_CONNECTED\"] = \"OPENVIDU_NOT_CONNECTED\";\n    /**\n     * _Not in use yet_\n     */\n    OpenViduErrorName[\"GENERIC_ERROR\"] = \"GENERIC_ERROR\";\n})(OpenViduErrorName = exports.OpenViduErrorName || (exports.OpenViduErrorName = {}));\n/**\n * Simple object to identify runtime errors on the client side\n */\nvar OpenViduError = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function OpenViduError(name, message) {\n        this.name = name;\n        this.message = message;\n    }\n    return OpenViduError;\n}());\nexports.OpenViduError = OpenViduError;\n//# sourceMappingURL=OpenViduError.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\n/**\n * How the video will be inserted in the DOM for Publishers and Subscribers. See [[PublisherProperties.insertMode]] and [[SubscriberProperties.insertMode]]\n */\nvar VideoInsertMode;\n(function (VideoInsertMode) {\n    /**\n     * Video inserted after the target element (as next sibling)\n     */\n    VideoInsertMode[\"AFTER\"] = \"AFTER\";\n    /**\n     * Video inserted as last child of the target element\n     */\n    VideoInsertMode[\"APPEND\"] = \"APPEND\";\n    /**\n     * Video inserted before the target element (as previous sibling)\n     */\n    VideoInsertMode[\"BEFORE\"] = \"BEFORE\";\n    /**\n     * Video inserted as first child of the target element\n     */\n    VideoInsertMode[\"PREPEND\"] = \"PREPEND\";\n    /**\n     * Video replaces target element\n     */\n    VideoInsertMode[\"REPLACE\"] = \"REPLACE\";\n})(VideoInsertMode = exports.VideoInsertMode || (exports.VideoInsertMode = {}));\n//# sourceMappingURL=VideoInsertMode.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `connectionCreated`: dispatched by [[Session]]\n * - `connectionDestroyed`: dispatched by [[Session]]\n */\nvar ConnectionEvent = /** @class */ (function (_super) {\n    __extends(ConnectionEvent, _super);\n    /**\n     * @hidden\n     */\n    function ConnectionEvent(cancelable, target, type, connection, reason) {\n        var _this = _super.call(this, cancelable, target, type) || this;\n        _this.connection = connection;\n        _this.reason = reason;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    ConnectionEvent.prototype.callDefaultBehavior = function () { };\n    return ConnectionEvent;\n}(Event_1.Event));\nexports.ConnectionEvent = ConnectionEvent;\n//# sourceMappingURL=ConnectionEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar Event = /** @class */ (function () {\n    /**\n     * @hidden\n     */\n    function Event(cancelable, target, type) {\n        this.hasBeenPrevented = false;\n        this.cancelable = cancelable;\n        this.target = target;\n        this.type = type;\n    }\n    /**\n     * Whether the default beahivour of the event has been prevented or not. Call [[Event.preventDefault]] to prevent it\n     */\n    Event.prototype.isDefaultPrevented = function () {\n        return this.hasBeenPrevented;\n    };\n    /**\n     * Prevents the default behavior of the event. The following events have a default behavior:\n     *\n     * - `sessionDisconnected`: dispatched by [[Session]] object, automatically unsubscribes the leaving participant from every Subscriber object of the session (this includes closing the WebRTCPeer connection and disposing all MediaStreamTracks)\n     * and also deletes any HTML video element associated to each Subscriber (only those created by OpenVidu Browser, either by passing a valid parameter as `targetElement` in method [[Session.subscribe]] or\n     * by calling [[Subscriber.createVideoElement]]). For every video removed, each Subscriber object will also dispatch a `videoElementDestroyed` event.\n     *\n     * - `streamDestroyed`:\n     *   - If dispatched by a [[Publisher]] (*you* have unpublished): automatically stops all media tracks and deletes any HTML video element associated to it (only those created by OpenVidu Browser, either by passing a valid parameter as `targetElement`\n     * in method [[OpenVidu.initPublisher]] or by calling [[Publisher.createVideoElement]]). For every video removed, the Publisher object will also dispatch a `videoElementDestroyed` event.\n     *   - If dispatched by [[Session]] (*other user* has unpublished): automatically unsubscribes the proper Subscriber object from the session (this includes closing the WebRTCPeer connection and disposing all MediaStreamTracks)\n     * and also deletes any HTML video element associated to that Subscriber (only those created by OpenVidu Browser, either by passing a valid parameter as `targetElement` in method [[Session.subscribe]] or\n     * by calling [[Subscriber.createVideoElement]]). For every video removed, the Subscriber object will also dispatch a `videoElementDestroyed` event.\n     */\n    Event.prototype.preventDefault = function () {\n        // tslint:disable-next-line:no-empty\n        this.callDefaultBehavior = function () { };\n        this.hasBeenPrevented = true;\n    };\n    return Event;\n}());\nexports.Event = Event;\n//# sourceMappingURL=Event.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `publisherStartSpeaking`: dispatched by [[Session]]\n * - `publisherStopSpeaking`: dispatched by [[Session]]\n *\n * More information:\n * - This events will only be triggered for **remote streams that have audio tracks**\n * - Both events share the same lifecycle. That means that you can subscribe to only one of them if you want, but if you call `Session.off('publisherStopSpeaking')`,\n * keep in mind that this will also internally remove any 'publisherStartSpeaking' event\n * - You can further configure how the events are dispatched by setting property `publisherSpeakingEventsOptions` in the call of [[OpenVidu.setAdvancedConfiguration]]\n */\nvar PublisherSpeakingEvent = /** @class */ (function (_super) {\n    __extends(PublisherSpeakingEvent, _super);\n    /**\n     * @hidden\n     */\n    function PublisherSpeakingEvent(target, type, connection, streamId) {\n        var _this = _super.call(this, false, target, type) || this;\n        _this.type = type;\n        _this.connection = connection;\n        _this.streamId = streamId;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    PublisherSpeakingEvent.prototype.callDefaultBehavior = function () { };\n    return PublisherSpeakingEvent;\n}(Event_1.Event));\nexports.PublisherSpeakingEvent = PublisherSpeakingEvent;\n//# sourceMappingURL=PublisherSpeakingEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `recordingStarted`: dispatched by [[Session]]\n * - `recordingStopped`: dispatched by [[Session]]\n */\nvar RecordingEvent = /** @class */ (function (_super) {\n    __extends(RecordingEvent, _super);\n    /**\n     * @hidden\n     */\n    function RecordingEvent(target, type, id, name) {\n        var _this = _super.call(this, false, target, type) || this;\n        _this.id = id;\n        if (name !== id) {\n            _this.name = name;\n        }\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    RecordingEvent.prototype.callDefaultBehavior = function () { };\n    return RecordingEvent;\n}(Event_1.Event));\nexports.RecordingEvent = RecordingEvent;\n//# sourceMappingURL=RecordingEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines event `sessionDisconnected` dispatched by [[Session]]\n */\nvar SessionDisconnectedEvent = /** @class */ (function (_super) {\n    __extends(SessionDisconnectedEvent, _super);\n    /**\n     * @hidden\n     */\n    function SessionDisconnectedEvent(target, reason) {\n        var _this = _super.call(this, true, target, 'sessionDisconnected') || this;\n        _this.reason = reason;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    SessionDisconnectedEvent.prototype.callDefaultBehavior = function () {\n        console.info(\"Calling default behavior upon '\" + this.type + \"' event dispatched by 'Session'\");\n        var session = this.target;\n        // Dispose and delete all remote Connections\n        for (var connectionId in session.remoteConnections) {\n            if (!!session.remoteConnections[connectionId].stream) {\n                session.remoteConnections[connectionId].stream.disposeWebRtcPeer();\n                session.remoteConnections[connectionId].stream.disposeMediaStream();\n                if (session.remoteConnections[connectionId].stream.streamManager) {\n                    session.remoteConnections[connectionId].stream.streamManager.removeAllVideos();\n                }\n                delete session.remoteStreamsCreated[session.remoteConnections[connectionId].stream.streamId];\n                session.remoteConnections[connectionId].dispose();\n            }\n            delete session.remoteConnections[connectionId];\n        }\n    };\n    return SessionDisconnectedEvent;\n}(Event_1.Event));\nexports.SessionDisconnectedEvent = SessionDisconnectedEvent;\n//# sourceMappingURL=SessionDisconnectedEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `signal`: dispatched by [[Session]]\n * - `signal:TYPE`: dispatched by [[Session]]\n */\nvar SignalEvent = /** @class */ (function (_super) {\n    __extends(SignalEvent, _super);\n    /**\n     * @hidden\n     */\n    function SignalEvent(target, type, data, from) {\n        var _this = _super.call(this, false, target, type) || this;\n        _this.type = type;\n        _this.data = data;\n        _this.from = from;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    SignalEvent.prototype.callDefaultBehavior = function () { };\n    return SignalEvent;\n}(Event_1.Event));\nexports.SignalEvent = SignalEvent;\n//# sourceMappingURL=SignalEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\nvar Publisher_1 = require(\"../../OpenVidu/Publisher\");\nvar Session_1 = require(\"../../OpenVidu/Session\");\n/**\n * Defines the following events:\n * - `streamCreated`: dispatched by [[Session]] and [[Publisher]]\n * - `streamDestroyed`: dispatched by [[Session]] and [[Publisher]]\n */\nvar StreamEvent = /** @class */ (function (_super) {\n    __extends(StreamEvent, _super);\n    /**\n     * @hidden\n     */\n    function StreamEvent(cancelable, target, type, stream, reason) {\n        var _this = _super.call(this, cancelable, target, type) || this;\n        _this.stream = stream;\n        _this.reason = reason;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    StreamEvent.prototype.callDefaultBehavior = function () {\n        if (this.type === 'streamDestroyed') {\n            if (this.target instanceof Session_1.Session) {\n                // Remote Stream\n                console.info(\"Calling default behavior upon '\" + this.type + \"' event dispatched by 'Session'\");\n                this.stream.disposeWebRtcPeer();\n            }\n            else if (this.target instanceof Publisher_1.Publisher) {\n                // Local Stream\n                console.info(\"Calling default behavior upon '\" + this.type + \"' event dispatched by 'Publisher'\");\n                clearInterval(this.target.screenShareResizeInterval);\n                this.stream.isLocalStreamReadyToPublish = false;\n                // Delete Publisher object from OpenVidu publishers array\n                var openviduPublishers = this.target.openvidu.publishers;\n                for (var i = 0; i < openviduPublishers.length; i++) {\n                    if (openviduPublishers[i] === this.target) {\n                        openviduPublishers.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            // Dispose the MediaStream local object\n            this.stream.disposeMediaStream();\n            // Remove from DOM all video elements associated to this Stream, if there's a StreamManager defined\n            // (method Session.subscribe must have been called)\n            if (this.stream.streamManager)\n                this.stream.streamManager.removeAllVideos();\n            // Delete stream from Session.remoteStreamsCreated map\n            delete this.stream.session.remoteStreamsCreated[this.stream.streamId];\n            // Delete StreamOptionsServer from remote Connection\n            var remoteConnection = this.stream.session.remoteConnections[this.stream.connection.connectionId];\n            if (!!remoteConnection && !!remoteConnection.options) {\n                var streamOptionsServer = remoteConnection.options.streams;\n                for (var i = streamOptionsServer.length - 1; i >= 0; --i) {\n                    if (streamOptionsServer[i].id === this.stream.streamId) {\n                        streamOptionsServer.splice(i, 1);\n                    }\n                }\n            }\n        }\n    };\n    return StreamEvent;\n}(Event_1.Event));\nexports.StreamEvent = StreamEvent;\n//# sourceMappingURL=StreamEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `streamPlaying`: dispatched by [[StreamManager]] ([[Publisher]] and [[Subscriber]])\n */\nvar StreamManagerEvent = /** @class */ (function (_super) {\n    __extends(StreamManagerEvent, _super);\n    /**\n     * @hidden\n     */\n    function StreamManagerEvent(target) {\n        return _super.call(this, false, target, 'streamPlaying') || this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    StreamManagerEvent.prototype.callDefaultBehavior = function () { };\n    return StreamManagerEvent;\n}(Event_1.Event));\nexports.StreamManagerEvent = StreamManagerEvent;\n//# sourceMappingURL=StreamManagerEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines event `streamPropertyChanged` dispatched by [[Session]] as well as by [[StreamManager]] ([[Publisher]] and [[Subscriber]]).\n * This event is fired when any remote stream (owned by a Subscriber) or local stream (owned by a Publisher) undergoes\n * any change in any of its mutable properties (see [[changedProperty]]).\n */\nvar StreamPropertyChangedEvent = /** @class */ (function (_super) {\n    __extends(StreamPropertyChangedEvent, _super);\n    /**\n     * @hidden\n     */\n    function StreamPropertyChangedEvent(target, stream, changedProperty, newValue, oldValue, reason) {\n        var _this = _super.call(this, false, target, 'streamPropertyChanged') || this;\n        _this.stream = stream;\n        _this.changedProperty = changedProperty;\n        _this.newValue = newValue;\n        _this.oldValue = oldValue;\n        _this.reason = reason;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    StreamPropertyChangedEvent.prototype.callDefaultBehavior = function () { };\n    return StreamPropertyChangedEvent;\n}(Event_1.Event));\nexports.StreamPropertyChangedEvent = StreamPropertyChangedEvent;\n//# sourceMappingURL=StreamPropertyChangedEvent.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Event_1 = require(\"./Event\");\n/**\n * Defines the following events:\n * - `videoElementCreated`: dispatched by [[Publisher]] and [[Subscriber]] whenever a new HTML video element has been inserted into DOM by OpenVidu Browser library. See\n * [Manage video players](/docs/how-do-i/manage-videos) section.\n * - `videoElementDestroyed`: dispatched by [[Publisher]] and [[Subscriber]] whenever an HTML video element has been removed from DOM by OpenVidu Browser library.\n */\nvar VideoElementEvent = /** @class */ (function (_super) {\n    __extends(VideoElementEvent, _super);\n    /**\n     * @hidden\n     */\n    function VideoElementEvent(element, target, type) {\n        var _this = _super.call(this, false, target, type) || this;\n        _this.element = element;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    // tslint:disable-next-line:no-empty\n    VideoElementEvent.prototype.callDefaultBehavior = function () { };\n    return VideoElementEvent;\n}(Event_1.Event));\nexports.VideoElementEvent = VideoElementEvent;\n//# sourceMappingURL=VideoElementEvent.js.map","function Mapper() {\n    var sources = {};\n    this.forEach = function (callback) {\n        for (var key in sources) {\n            var source = sources[key];\n            for (var key2 in source)\n                callback(source[key2]);\n        }\n        ;\n    };\n    this.get = function (id, source) {\n        var ids = sources[source];\n        if (ids == undefined)\n            return undefined;\n        return ids[id];\n    };\n    this.remove = function (id, source) {\n        var ids = sources[source];\n        if (ids == undefined)\n            return;\n        delete ids[id];\n        for (var i in ids) {\n            return false;\n        }\n        delete sources[source];\n    };\n    this.set = function (value, id, source) {\n        if (value == undefined)\n            return this.remove(id, source);\n        var ids = sources[source];\n        if (ids == undefined)\n            sources[source] = ids = {};\n        ids[id] = value;\n    };\n}\n;\nMapper.prototype.pop = function (id, source) {\n    var value = this.get(id, source);\n    if (value == undefined)\n        return undefined;\n    this.remove(id, source);\n    return value;\n};\nmodule.exports = Mapper;\n//# sourceMappingURL=Mapper.js.map","var JsonRpcClient = require('./jsonrpcclient');\nexports.JsonRpcClient = JsonRpcClient;\n//# sourceMappingURL=index.js.map","var RpcBuilder = require('../');\nvar WebSocketWithReconnection = require('./transports/webSocketWithReconnection');\nDate.now = Date.now || function () {\n    return +new Date;\n};\nvar PING_INTERVAL = 5000;\nvar RECONNECTING = 'RECONNECTING';\nvar CONNECTED = 'CONNECTED';\nvar DISCONNECTED = 'DISCONNECTED';\nvar Logger = console;\nfunction JsonRpcClient(configuration) {\n    var self = this;\n    var wsConfig = configuration.ws;\n    var notReconnectIfNumLessThan = -1;\n    var pingNextNum = 0;\n    var enabledPings = true;\n    var pingPongStarted = false;\n    var pingInterval;\n    var status = DISCONNECTED;\n    var onreconnecting = wsConfig.onreconnecting;\n    var onreconnected = wsConfig.onreconnected;\n    var onconnected = wsConfig.onconnected;\n    var onerror = wsConfig.onerror;\n    configuration.rpc.pull = function (params, request) {\n        request.reply(null, \"push\");\n    };\n    wsConfig.onreconnecting = function () {\n        Logger.debug(\"--------- ONRECONNECTING -----------\");\n        if (status === RECONNECTING) {\n            Logger.error(\"Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it\");\n            return;\n        }\n        status = RECONNECTING;\n        if (onreconnecting) {\n            onreconnecting();\n        }\n    };\n    wsConfig.onreconnected = function () {\n        Logger.debug(\"--------- ONRECONNECTED -----------\");\n        if (status === CONNECTED) {\n            Logger.error(\"Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it\");\n            return;\n        }\n        status = CONNECTED;\n        enabledPings = true;\n        updateNotReconnectIfLessThan();\n        usePing();\n        if (onreconnected) {\n            onreconnected();\n        }\n    };\n    wsConfig.onconnected = function () {\n        Logger.debug(\"--------- ONCONNECTED -----------\");\n        if (status === CONNECTED) {\n            Logger.error(\"Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it\");\n            return;\n        }\n        status = CONNECTED;\n        enabledPings = true;\n        usePing();\n        if (onconnected) {\n            onconnected();\n        }\n    };\n    wsConfig.onerror = function (error) {\n        Logger.debug(\"--------- ONERROR -----------\");\n        status = DISCONNECTED;\n        if (onerror) {\n            onerror(error);\n        }\n    };\n    var ws = new WebSocketWithReconnection(wsConfig);\n    Logger.debug('Connecting websocket to URI: ' + wsConfig.uri);\n    var rpcBuilderOptions = {\n        request_timeout: configuration.rpc.requestTimeout,\n        ping_request_timeout: configuration.rpc.heartbeatRequestTimeout\n    };\n    var rpc = new RpcBuilder(RpcBuilder.packers.JsonRPC, rpcBuilderOptions, ws, function (request) {\n        Logger.debug('Received request: ' + JSON.stringify(request));\n        try {\n            var func = configuration.rpc[request.method];\n            if (func === undefined) {\n                Logger.error(\"Method \" + request.method + \" not registered in client\");\n            }\n            else {\n                func(request.params, request);\n            }\n        }\n        catch (err) {\n            Logger.error('Exception processing request: ' + JSON.stringify(request));\n            Logger.error(err);\n        }\n    });\n    this.send = function (method, params, callback) {\n        if (method !== 'ping') {\n            Logger.debug('Request: method:' + method + \" params:\" + JSON.stringify(params));\n        }\n        var requestTime = Date.now();\n        rpc.encode(method, params, function (error, result) {\n            if (error) {\n                try {\n                    Logger.error(\"ERROR:\" + error.message + \" in Request: method:\" +\n                        method + \" params:\" + JSON.stringify(params) + \" request:\" +\n                        error.request);\n                    if (error.data) {\n                        Logger.error(\"ERROR DATA:\" + JSON.stringify(error.data));\n                    }\n                }\n                catch (e) { }\n                error.requestTime = requestTime;\n            }\n            if (callback) {\n                if (result != undefined && result.value !== 'pong') {\n                    Logger.debug('Response: ' + JSON.stringify(result));\n                }\n                callback(error, result);\n            }\n        });\n    };\n    function updateNotReconnectIfLessThan() {\n        Logger.debug(\"notReconnectIfNumLessThan = \" + pingNextNum + ' (old=' +\n            notReconnectIfNumLessThan + ')');\n        notReconnectIfNumLessThan = pingNextNum;\n    }\n    function sendPing() {\n        if (enabledPings) {\n            var params = null;\n            if (pingNextNum == 0 || pingNextNum == notReconnectIfNumLessThan) {\n                params = {\n                    interval: configuration.heartbeat || PING_INTERVAL\n                };\n            }\n            pingNextNum++;\n            self.send('ping', params, (function (pingNum) {\n                return function (error, result) {\n                    if (error) {\n                        Logger.debug(\"Error in ping request #\" + pingNum + \" (\" +\n                            error.message + \")\");\n                        if (pingNum > notReconnectIfNumLessThan) {\n                            enabledPings = false;\n                            updateNotReconnectIfLessThan();\n                            Logger.debug(\"Server did not respond to ping message #\" +\n                                pingNum + \". Reconnecting... \");\n                            ws.reconnectWs();\n                        }\n                    }\n                };\n            })(pingNextNum));\n        }\n        else {\n            Logger.debug(\"Trying to send ping, but ping is not enabled\");\n        }\n    }\n    function usePing() {\n        if (!pingPongStarted) {\n            Logger.debug(\"Starting ping (if configured)\");\n            pingPongStarted = true;\n            if (configuration.heartbeat != undefined) {\n                pingInterval = setInterval(sendPing, configuration.heartbeat);\n                sendPing();\n            }\n        }\n    }\n    this.close = function () {\n        Logger.debug(\"Closing jsonRpcClient explicitly by client\");\n        if (pingInterval != undefined) {\n            Logger.debug(\"Clearing ping interval\");\n            clearInterval(pingInterval);\n        }\n        pingPongStarted = false;\n        enabledPings = false;\n        if (configuration.sendCloseMessage) {\n            Logger.debug(\"Sending close message\");\n            this.send('closeSession', null, function (error, result) {\n                if (error) {\n                    Logger.error(\"Error sending close message: \" + JSON.stringify(error));\n                }\n                ws.close();\n            });\n        }\n        else {\n            ws.close();\n        }\n    };\n    this.forceClose = function (millis) {\n        ws.forceClose(millis);\n    };\n    this.reconnect = function () {\n        ws.reconnectWs();\n    };\n}\nmodule.exports = JsonRpcClient;\n//# sourceMappingURL=jsonrpcclient.js.map","var WebSocketWithReconnection = require('./webSocketWithReconnection');\nexports.WebSocketWithReconnection = WebSocketWithReconnection;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar Logger = console;\nvar MAX_RETRIES = 2000;\nvar RETRY_TIME_MS = 3000;\nvar CONNECTING = 0;\nvar OPEN = 1;\nvar CLOSING = 2;\nvar CLOSED = 3;\nfunction WebSocketWithReconnection(config) {\n    var closing = false;\n    var registerMessageHandler;\n    var wsUri = config.uri;\n    var useSockJS = config.useSockJS;\n    var reconnecting = false;\n    var forcingDisconnection = false;\n    var ws;\n    if (useSockJS) {\n        ws = new SockJS(wsUri);\n    }\n    else {\n        ws = new WebSocket(wsUri);\n    }\n    ws.onopen = function () {\n        logConnected(ws, wsUri);\n        if (config.onconnected) {\n            config.onconnected();\n        }\n    };\n    ws.onerror = function (error) {\n        Logger.error(\"Could not connect to \" + wsUri + \" (invoking onerror if defined)\", error);\n        if (config.onerror) {\n            config.onerror(error);\n        }\n    };\n    function logConnected(ws, wsUri) {\n        try {\n            Logger.debug(\"WebSocket connected to \" + wsUri);\n        }\n        catch (e) {\n            Logger.error(e);\n        }\n    }\n    var reconnectionOnClose = function () {\n        if (ws.readyState === CLOSED) {\n            if (closing) {\n                Logger.debug(\"Connection closed by user\");\n            }\n            else {\n                Logger.debug(\"Connection closed unexpectecly. Reconnecting...\");\n                reconnectToSameUri(MAX_RETRIES, 1);\n            }\n        }\n        else {\n            Logger.debug(\"Close callback from previous websocket. Ignoring it\");\n        }\n    };\n    ws.onclose = reconnectionOnClose;\n    function reconnectToSameUri(maxRetries, numRetries) {\n        Logger.debug(\"reconnectToSameUri (attempt #\" + numRetries + \", max=\" + maxRetries + \")\");\n        if (numRetries === 1) {\n            if (reconnecting) {\n                Logger.warn(\"Trying to reconnectToNewUri when reconnecting... Ignoring this reconnection.\");\n                return;\n            }\n            else {\n                reconnecting = true;\n            }\n            if (config.onreconnecting) {\n                config.onreconnecting();\n            }\n        }\n        if (forcingDisconnection) {\n            reconnectToNewUri(maxRetries, numRetries, wsUri);\n        }\n        else {\n            if (config.newWsUriOnReconnection) {\n                config.newWsUriOnReconnection(function (error, newWsUri) {\n                    if (error) {\n                        Logger.debug(error);\n                        setTimeout(function () {\n                            reconnectToSameUri(maxRetries, numRetries + 1);\n                        }, RETRY_TIME_MS);\n                    }\n                    else {\n                        reconnectToNewUri(maxRetries, numRetries, newWsUri);\n                    }\n                });\n            }\n            else {\n                reconnectToNewUri(maxRetries, numRetries, wsUri);\n            }\n        }\n    }\n    function reconnectToNewUri(maxRetries, numRetries, reconnectWsUri) {\n        Logger.debug(\"Reconnection attempt #\" + numRetries);\n        ws.close();\n        wsUri = reconnectWsUri || wsUri;\n        var newWs;\n        if (useSockJS) {\n            newWs = new SockJS(wsUri);\n        }\n        else {\n            newWs = new WebSocket(wsUri);\n        }\n        newWs.onopen = function () {\n            Logger.debug(\"Reconnected after \" + numRetries + \" attempts...\");\n            logConnected(newWs, wsUri);\n            reconnecting = false;\n            registerMessageHandler();\n            if (config.onreconnected()) {\n                config.onreconnected();\n            }\n            newWs.onclose = reconnectionOnClose;\n        };\n        var onErrorOrClose = function (error) {\n            Logger.warn(\"Reconnection error: \", error);\n            if (numRetries === maxRetries) {\n                if (config.ondisconnect) {\n                    config.ondisconnect();\n                }\n            }\n            else {\n                setTimeout(function () {\n                    reconnectToSameUri(maxRetries, numRetries + 1);\n                }, RETRY_TIME_MS);\n            }\n        };\n        newWs.onerror = onErrorOrClose;\n        ws = newWs;\n    }\n    this.close = function () {\n        closing = true;\n        ws.close();\n    };\n    this.forceClose = function (millis) {\n        Logger.debug(\"Testing: Force WebSocket close\");\n        if (millis) {\n            Logger.debug(\"Testing: Change wsUri for \" + millis + \" millis to simulate net failure\");\n            var goodWsUri = wsUri;\n            wsUri = \"wss://21.234.12.34.4:443/\";\n            forcingDisconnection = true;\n            setTimeout(function () {\n                Logger.debug(\"Testing: Recover good wsUri \" + goodWsUri);\n                wsUri = goodWsUri;\n                forcingDisconnection = false;\n            }, millis);\n        }\n        ws.close();\n    };\n    this.reconnectWs = function () {\n        Logger.debug(\"reconnectWs\");\n        reconnectToSameUri(MAX_RETRIES, 1, wsUri);\n    };\n    this.send = function (message) {\n        ws.send(message);\n    };\n    this.addEventListener = function (type, callback) {\n        registerMessageHandler = function () {\n            ws.addEventListener(type, callback);\n        };\n        registerMessageHandler();\n    };\n}\nmodule.exports = WebSocketWithReconnection;\n//# sourceMappingURL=webSocketWithReconnection.js.map","var defineProperty_IE8 = false;\nif (Object.defineProperty) {\n    try {\n        Object.defineProperty({}, \"x\", {});\n    }\n    catch (e) {\n        defineProperty_IE8 = true;\n    }\n}\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        if (typeof this !== 'function') {\n            throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n        }\n        var aArgs = Array.prototype.slice.call(arguments, 1), fToBind = this, fNOP = function () { }, fBound = function () {\n            return fToBind.apply(this instanceof fNOP && oThis\n                ? this\n                : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n        };\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n        return fBound;\n    };\n}\nvar EventEmitter = require('events').EventEmitter;\nvar inherits = require('inherits');\nvar packers = require('./packers');\nvar Mapper = require('./Mapper');\nvar BASE_TIMEOUT = 5000;\nfunction unifyResponseMethods(responseMethods) {\n    if (!responseMethods)\n        return {};\n    for (var key in responseMethods) {\n        var value = responseMethods[key];\n        if (typeof value == 'string')\n            responseMethods[key] =\n                {\n                    response: value\n                };\n    }\n    ;\n    return responseMethods;\n}\n;\nfunction unifyTransport(transport) {\n    if (!transport)\n        return;\n    if (transport instanceof Function)\n        return { send: transport };\n    if (transport.send instanceof Function)\n        return transport;\n    if (transport.postMessage instanceof Function) {\n        transport.send = transport.postMessage;\n        return transport;\n    }\n    if (transport.write instanceof Function) {\n        transport.send = transport.write;\n        return transport;\n    }\n    if (transport.onmessage !== undefined)\n        return;\n    if (transport.pause instanceof Function)\n        return;\n    throw new SyntaxError(\"Transport is not a function nor a valid object\");\n}\n;\nfunction RpcNotification(method, params) {\n    if (defineProperty_IE8) {\n        this.method = method;\n        this.params = params;\n    }\n    else {\n        Object.defineProperty(this, 'method', { value: method, enumerable: true });\n        Object.defineProperty(this, 'params', { value: params, enumerable: true });\n    }\n}\n;\nfunction RpcBuilder(packer, options, transport, onRequest) {\n    var self = this;\n    if (!packer)\n        throw new SyntaxError('Packer is not defined');\n    if (!packer.pack || !packer.unpack)\n        throw new SyntaxError('Packer is invalid');\n    var responseMethods = unifyResponseMethods(packer.responseMethods);\n    if (options instanceof Function) {\n        if (transport != undefined)\n            throw new SyntaxError(\"There can't be parameters after onRequest\");\n        onRequest = options;\n        transport = undefined;\n        options = undefined;\n    }\n    ;\n    if (options && options.send instanceof Function) {\n        if (transport && !(transport instanceof Function))\n            throw new SyntaxError(\"Only a function can be after transport\");\n        onRequest = transport;\n        transport = options;\n        options = undefined;\n    }\n    ;\n    if (transport instanceof Function) {\n        if (onRequest != undefined)\n            throw new SyntaxError(\"There can't be parameters after onRequest\");\n        onRequest = transport;\n        transport = undefined;\n    }\n    ;\n    if (transport && transport.send instanceof Function)\n        if (onRequest && !(onRequest instanceof Function))\n            throw new SyntaxError(\"Only a function can be after transport\");\n    options = options || {};\n    EventEmitter.call(this);\n    if (onRequest)\n        this.on('request', onRequest);\n    if (defineProperty_IE8)\n        this.peerID = options.peerID;\n    else\n        Object.defineProperty(this, 'peerID', { value: options.peerID });\n    var max_retries = options.max_retries || 0;\n    function transportMessage(event) {\n        self.decode(event.data || event);\n    }\n    ;\n    this.getTransport = function () {\n        return transport;\n    };\n    this.setTransport = function (value) {\n        if (transport) {\n            if (transport.removeEventListener)\n                transport.removeEventListener('message', transportMessage);\n            else if (transport.removeListener)\n                transport.removeListener('data', transportMessage);\n        }\n        ;\n        if (value) {\n            if (value.addEventListener)\n                value.addEventListener('message', transportMessage);\n            else if (value.addListener)\n                value.addListener('data', transportMessage);\n        }\n        ;\n        transport = unifyTransport(value);\n    };\n    if (!defineProperty_IE8)\n        Object.defineProperty(this, 'transport', {\n            get: this.getTransport.bind(this),\n            set: this.setTransport.bind(this)\n        });\n    this.setTransport(transport);\n    var request_timeout = options.request_timeout || BASE_TIMEOUT;\n    var ping_request_timeout = options.ping_request_timeout || request_timeout;\n    var response_timeout = options.response_timeout || BASE_TIMEOUT;\n    var duplicates_timeout = options.duplicates_timeout || BASE_TIMEOUT;\n    var requestID = 0;\n    var requests = new Mapper();\n    var responses = new Mapper();\n    var processedResponses = new Mapper();\n    var message2Key = {};\n    function storeResponse(message, id, dest) {\n        var response = {\n            message: message,\n            timeout: setTimeout(function () {\n                responses.remove(id, dest);\n            }, response_timeout)\n        };\n        responses.set(response, id, dest);\n    }\n    ;\n    function storeProcessedResponse(ack, from) {\n        var timeout = setTimeout(function () {\n            processedResponses.remove(ack, from);\n        }, duplicates_timeout);\n        processedResponses.set(timeout, ack, from);\n    }\n    ;\n    function RpcRequest(method, params, id, from, transport) {\n        RpcNotification.call(this, method, params);\n        this.getTransport = function () {\n            return transport;\n        };\n        this.setTransport = function (value) {\n            transport = unifyTransport(value);\n        };\n        if (!defineProperty_IE8)\n            Object.defineProperty(this, 'transport', {\n                get: this.getTransport.bind(this),\n                set: this.setTransport.bind(this)\n            });\n        var response = responses.get(id, from);\n        if (!(transport || self.getTransport())) {\n            if (defineProperty_IE8)\n                this.duplicated = Boolean(response);\n            else\n                Object.defineProperty(this, 'duplicated', {\n                    value: Boolean(response)\n                });\n        }\n        var responseMethod = responseMethods[method];\n        this.pack = packer.pack.bind(packer, this, id);\n        this.reply = function (error, result, transport) {\n            if (error instanceof Function || error && error.send instanceof Function) {\n                if (result != undefined)\n                    throw new SyntaxError(\"There can't be parameters after callback\");\n                transport = error;\n                result = null;\n                error = undefined;\n            }\n            else if (result instanceof Function\n                || result && result.send instanceof Function) {\n                if (transport != undefined)\n                    throw new SyntaxError(\"There can't be parameters after callback\");\n                transport = result;\n                result = null;\n            }\n            ;\n            transport = unifyTransport(transport);\n            if (response)\n                clearTimeout(response.timeout);\n            if (from != undefined) {\n                if (error)\n                    error.dest = from;\n                if (result)\n                    result.dest = from;\n            }\n            ;\n            var message;\n            if (error || result != undefined) {\n                if (self.peerID != undefined) {\n                    if (error)\n                        error.from = self.peerID;\n                    else\n                        result.from = self.peerID;\n                }\n                if (responseMethod) {\n                    if (responseMethod.error == undefined && error)\n                        message =\n                            {\n                                error: error\n                            };\n                    else {\n                        var method = error\n                            ? responseMethod.error\n                            : responseMethod.response;\n                        message =\n                            {\n                                method: method,\n                                params: error || result\n                            };\n                    }\n                }\n                else\n                    message =\n                        {\n                            error: error,\n                            result: result\n                        };\n                message = packer.pack(message, id);\n            }\n            else if (response)\n                message = response.message;\n            else\n                message = packer.pack({ result: null }, id);\n            storeResponse(message, id, from);\n            transport = transport || this.getTransport() || self.getTransport();\n            if (transport)\n                return transport.send(message);\n            return message;\n        };\n    }\n    ;\n    inherits(RpcRequest, RpcNotification);\n    function cancel(message) {\n        var key = message2Key[message];\n        if (!key)\n            return;\n        delete message2Key[message];\n        var request = requests.pop(key.id, key.dest);\n        if (!request)\n            return;\n        clearTimeout(request.timeout);\n        storeProcessedResponse(key.id, key.dest);\n    }\n    ;\n    this.cancel = function (message) {\n        if (message)\n            return cancel(message);\n        for (var message in message2Key)\n            cancel(message);\n    };\n    this.close = function () {\n        var transport = this.getTransport();\n        if (transport && transport.close)\n            transport.close();\n        this.cancel();\n        processedResponses.forEach(clearTimeout);\n        responses.forEach(function (response) {\n            clearTimeout(response.timeout);\n        });\n    };\n    this.encode = function (method, params, dest, transport, callback) {\n        if (params instanceof Function) {\n            if (dest != undefined)\n                throw new SyntaxError(\"There can't be parameters after callback\");\n            callback = params;\n            transport = undefined;\n            dest = undefined;\n            params = undefined;\n        }\n        else if (dest instanceof Function) {\n            if (transport != undefined)\n                throw new SyntaxError(\"There can't be parameters after callback\");\n            callback = dest;\n            transport = undefined;\n            dest = undefined;\n        }\n        else if (transport instanceof Function) {\n            if (callback != undefined)\n                throw new SyntaxError(\"There can't be parameters after callback\");\n            callback = transport;\n            transport = undefined;\n        }\n        ;\n        if (self.peerID != undefined) {\n            params = params || {};\n            params.from = self.peerID;\n        }\n        ;\n        if (dest != undefined) {\n            params = params || {};\n            params.dest = dest;\n        }\n        ;\n        var message = {\n            method: method,\n            params: params\n        };\n        if (callback) {\n            var id = requestID++;\n            var retried = 0;\n            message = packer.pack(message, id);\n            function dispatchCallback(error, result) {\n                self.cancel(message);\n                callback(error, result);\n            }\n            ;\n            var request = {\n                message: message,\n                callback: dispatchCallback,\n                responseMethods: responseMethods[method] || {}\n            };\n            var encode_transport = unifyTransport(transport);\n            function sendRequest(transport) {\n                var rt = (method === 'ping' ? ping_request_timeout : request_timeout);\n                request.timeout = setTimeout(timeout, rt * Math.pow(2, retried++));\n                message2Key[message] = { id: id, dest: dest };\n                requests.set(request, id, dest);\n                transport = transport || encode_transport || self.getTransport();\n                if (transport)\n                    return transport.send(message);\n                return message;\n            }\n            ;\n            function retry(transport) {\n                transport = unifyTransport(transport);\n                console.warn(retried + ' retry for request message:', message);\n                var timeout = processedResponses.pop(id, dest);\n                clearTimeout(timeout);\n                return sendRequest(transport);\n            }\n            ;\n            function timeout() {\n                if (retried < max_retries)\n                    return retry(transport);\n                var error = new Error('Request has timed out');\n                error.request = message;\n                error.retry = retry;\n                dispatchCallback(error);\n            }\n            ;\n            return sendRequest(transport);\n        }\n        ;\n        message = packer.pack(message);\n        transport = transport || this.getTransport();\n        if (transport)\n            return transport.send(message);\n        return message;\n    };\n    this.decode = function (message, transport) {\n        if (!message)\n            throw new TypeError(\"Message is not defined\");\n        try {\n            message = packer.unpack(message);\n        }\n        catch (e) {\n            return console.debug(e, message);\n        }\n        ;\n        var id = message.id;\n        var ack = message.ack;\n        var method = message.method;\n        var params = message.params || {};\n        var from = params.from;\n        var dest = params.dest;\n        if (self.peerID != undefined && from == self.peerID)\n            return;\n        if (id == undefined && ack == undefined) {\n            var notification = new RpcNotification(method, params);\n            if (self.emit('request', notification))\n                return;\n            return notification;\n        }\n        ;\n        function processRequest() {\n            transport = unifyTransport(transport) || self.getTransport();\n            if (transport) {\n                var response = responses.get(id, from);\n                if (response)\n                    return transport.send(response.message);\n            }\n            ;\n            var idAck = (id != undefined) ? id : ack;\n            var request = new RpcRequest(method, params, idAck, from, transport);\n            if (self.emit('request', request))\n                return;\n            return request;\n        }\n        ;\n        function processResponse(request, error, result) {\n            request.callback(error, result);\n        }\n        ;\n        function duplicatedResponse(timeout) {\n            console.warn(\"Response already processed\", message);\n            clearTimeout(timeout);\n            storeProcessedResponse(ack, from);\n        }\n        ;\n        if (method) {\n            if (dest == undefined || dest == self.peerID) {\n                var request = requests.get(ack, from);\n                if (request) {\n                    var responseMethods = request.responseMethods;\n                    if (method == responseMethods.error)\n                        return processResponse(request, params);\n                    if (method == responseMethods.response)\n                        return processResponse(request, null, params);\n                    return processRequest();\n                }\n                var processed = processedResponses.get(ack, from);\n                if (processed)\n                    return duplicatedResponse(processed);\n            }\n            return processRequest();\n        }\n        ;\n        var error = message.error;\n        var result = message.result;\n        if (error && error.dest && error.dest != self.peerID)\n            return;\n        if (result && result.dest && result.dest != self.peerID)\n            return;\n        var request = requests.get(ack, from);\n        if (!request) {\n            var processed = processedResponses.get(ack, from);\n            if (processed)\n                return duplicatedResponse(processed);\n            return console.warn(\"No callback was defined for this message\", message);\n        }\n        ;\n        processResponse(request, error, result);\n    };\n}\n;\ninherits(RpcBuilder, EventEmitter);\nRpcBuilder.RpcNotification = RpcNotification;\nmodule.exports = RpcBuilder;\nvar clients = require('./clients');\nvar transports = require('./clients/transports');\nRpcBuilder.clients = clients;\nRpcBuilder.clients.transports = transports;\nRpcBuilder.packers = packers;\n//# sourceMappingURL=index.js.map","function pack(message, id) {\n    var result = {\n        jsonrpc: \"2.0\"\n    };\n    if (message.method) {\n        result.method = message.method;\n        if (message.params)\n            result.params = message.params;\n        if (id != undefined)\n            result.id = id;\n    }\n    else if (id != undefined) {\n        if (message.error) {\n            if (message.result !== undefined)\n                throw new TypeError(\"Both result and error are defined\");\n            result.error = message.error;\n        }\n        else if (message.result !== undefined)\n            result.result = message.result;\n        else\n            throw new TypeError(\"No result or error is defined\");\n        result.id = id;\n    }\n    ;\n    return JSON.stringify(result);\n}\n;\nfunction unpack(message) {\n    var result = message;\n    if (typeof message === 'string' || message instanceof String) {\n        result = JSON.parse(message);\n    }\n    var version = result.jsonrpc;\n    if (version !== '2.0')\n        throw new TypeError(\"Invalid JsonRPC version '\" + version + \"': \" + message);\n    if (result.method == undefined) {\n        if (result.id == undefined)\n            throw new TypeError(\"Invalid message: \" + message);\n        var result_defined = result.result !== undefined;\n        var error_defined = result.error !== undefined;\n        if (result_defined && error_defined)\n            throw new TypeError(\"Both result and error are defined: \" + message);\n        if (!result_defined && !error_defined)\n            throw new TypeError(\"No result or error is defined: \" + message);\n        result.ack = result.id;\n        delete result.id;\n    }\n    return result;\n}\n;\nexports.pack = pack;\nexports.unpack = unpack;\n//# sourceMappingURL=JsonRPC.js.map","function pack(message) {\n    throw new TypeError(\"Not yet implemented\");\n}\n;\nfunction unpack(message) {\n    throw new TypeError(\"Not yet implemented\");\n}\n;\nexports.pack = pack;\nexports.unpack = unpack;\n//# sourceMappingURL=XmlRPC.js.map","var JsonRPC = require('./JsonRPC');\nvar XmlRPC = require('./XmlRPC');\nexports.JsonRPC = JsonRPC;\nexports.XmlRPC = XmlRPC;\n//# sourceMappingURL=index.js.map","window.getScreenId = function (callback, custom_parameter) {\n    if (navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveOrOpenBlob || !!navigator.msSaveBlob)) {\n        callback({\n            video: true\n        });\n        return;\n    }\n    if (!!navigator.mozGetUserMedia) {\n        callback(null, 'firefox', {\n            video: {\n                mozMediaSource: 'window',\n                mediaSource: 'window'\n            }\n        });\n        return;\n    }\n    window.addEventListener('message', onIFrameCallback);\n    function onIFrameCallback(event) {\n        if (!event.data)\n            return;\n        if (event.data.chromeMediaSourceId) {\n            if (event.data.chromeMediaSourceId === 'PermissionDeniedError') {\n                callback('permission-denied');\n            }\n            else {\n                callback(null, event.data.chromeMediaSourceId, getScreenConstraints(null, event.data.chromeMediaSourceId, event.data.canRequestAudioTrack));\n            }\n            window.removeEventListener('message', onIFrameCallback);\n        }\n        if (event.data.chromeExtensionStatus) {\n            callback(event.data.chromeExtensionStatus, null, getScreenConstraints(event.data.chromeExtensionStatus));\n            window.removeEventListener('message', onIFrameCallback);\n        }\n    }\n    if (!custom_parameter) {\n        setTimeout(postGetSourceIdMessage, 100);\n    }\n    else {\n        setTimeout(function () {\n            postGetSourceIdMessage(custom_parameter);\n        }, 100);\n    }\n};\nfunction getScreenConstraints(error, sourceId, canRequestAudioTrack) {\n    var screen_constraints = {\n        audio: false,\n        video: {\n            mandatory: {\n                chromeMediaSource: error ? 'screen' : 'desktop',\n                maxWidth: window.screen.width > 1920 ? window.screen.width : 1920,\n                maxHeight: window.screen.height > 1080 ? window.screen.height : 1080\n            },\n            optional: []\n        }\n    };\n    if (!!canRequestAudioTrack) {\n        screen_constraints.audio = {\n            mandatory: {\n                chromeMediaSource: error ? 'screen' : 'desktop',\n            },\n            optional: []\n        };\n    }\n    if (sourceId) {\n        screen_constraints.video.mandatory.chromeMediaSourceId = sourceId;\n        if (screen_constraints.audio && screen_constraints.audio.mandatory) {\n            screen_constraints.audio.mandatory.chromeMediaSourceId = sourceId;\n        }\n    }\n    return screen_constraints;\n}\nfunction postGetSourceIdMessage(custom_parameter) {\n    if (!iframe) {\n        loadIFrame(function () {\n            postGetSourceIdMessage(custom_parameter);\n        });\n        return;\n    }\n    if (!iframe.isLoaded) {\n        setTimeout(function () {\n            postGetSourceIdMessage(custom_parameter);\n        }, 100);\n        return;\n    }\n    if (!custom_parameter) {\n        iframe.contentWindow.postMessage({\n            captureSourceId: true\n        }, '*');\n    }\n    else if (!!custom_parameter.forEach) {\n        iframe.contentWindow.postMessage({\n            captureCustomSourceId: custom_parameter\n        }, '*');\n    }\n    else {\n        iframe.contentWindow.postMessage({\n            captureSourceIdWithAudio: true\n        }, '*');\n    }\n}\nvar iframe;\nwindow.getScreenConstraints = function (callback) {\n    loadIFrame(function () {\n        getScreenId(function (error, sourceId, screen_constraints) {\n            if (!screen_constraints) {\n                screen_constraints = {\n                    video: true\n                };\n            }\n            callback(error, screen_constraints.video);\n        });\n    });\n};\nfunction loadIFrame(loadCallback) {\n    if (iframe) {\n        loadCallback();\n        return;\n    }\n    iframe = document.createElement('iframe');\n    iframe.onload = function () {\n        iframe.isLoaded = true;\n        loadCallback();\n    };\n    iframe.src = 'https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/';\n    iframe.style.display = 'none';\n    (document.body || document.documentElement).appendChild(iframe);\n}\nwindow.getChromeExtensionStatus = function (callback) {\n    if (!!navigator.mozGetUserMedia) {\n        callback('installed-enabled');\n        return;\n    }\n    window.addEventListener('message', onIFrameCallback);\n    function onIFrameCallback(event) {\n        if (!event.data)\n            return;\n        if (event.data.chromeExtensionStatus) {\n            callback(event.data.chromeExtensionStatus);\n            window.removeEventListener('message', onIFrameCallback);\n        }\n    }\n    setTimeout(postGetChromeExtensionStatusMessage, 100);\n};\nfunction postGetChromeExtensionStatusMessage() {\n    if (!iframe) {\n        loadIFrame(postGetChromeExtensionStatusMessage);\n        return;\n    }\n    if (!iframe.isLoaded) {\n        setTimeout(postGetChromeExtensionStatusMessage, 100);\n        return;\n    }\n    iframe.contentWindow.postMessage({\n        getChromeExtensionStatus: true\n    }, '*');\n}\nexports.getScreenId = getScreenId;\n//# sourceMappingURL=Screen-Capturing-Auto.js.map","var chromeMediaSource = 'screen';\nvar sourceId;\nvar screenCallback;\nvar isFirefox = typeof window.InstallTrigger !== 'undefined';\nvar isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\nvar isChrome = !!window.chrome && !isOpera;\nwindow.addEventListener('message', function (event) {\n    if (event.origin != window.location.origin) {\n        return;\n    }\n    onMessageCallback(event.data);\n});\nfunction onMessageCallback(data) {\n    if (data == 'PermissionDeniedError') {\n        if (screenCallback)\n            return screenCallback('PermissionDeniedError');\n        else\n            throw new Error('PermissionDeniedError');\n    }\n    if (data == 'rtcmulticonnection-extension-loaded') {\n        chromeMediaSource = 'desktop';\n    }\n    if (data.sourceId && screenCallback) {\n        screenCallback(sourceId = data.sourceId, data.canRequestAudioTrack === true);\n    }\n}\nfunction isChromeExtensionAvailable(callback) {\n    if (!callback)\n        return;\n    if (chromeMediaSource == 'desktop')\n        return callback(true);\n    window.postMessage('are-you-there', '*');\n    setTimeout(function () {\n        if (chromeMediaSource == 'screen') {\n            callback(false);\n        }\n        else\n            callback(true);\n    }, 2000);\n}\nfunction getSourceId(callback) {\n    if (!callback)\n        throw '\"callback\" parameter is mandatory.';\n    if (sourceId)\n        return callback(sourceId);\n    screenCallback = callback;\n    window.postMessage('get-sourceId', '*');\n}\nfunction getCustomSourceId(arr, callback) {\n    if (!arr || !arr.forEach)\n        throw '\"arr\" parameter is mandatory and it must be an array.';\n    if (!callback)\n        throw '\"callback\" parameter is mandatory.';\n    if (sourceId)\n        return callback(sourceId);\n    screenCallback = callback;\n    window.postMessage({\n        'get-custom-sourceId': arr\n    }, '*');\n}\nfunction getSourceIdWithAudio(callback) {\n    if (!callback)\n        throw '\"callback\" parameter is mandatory.';\n    if (sourceId)\n        return callback(sourceId);\n    screenCallback = callback;\n    window.postMessage('audio-plus-tab', '*');\n}\nfunction getChromeExtensionStatus(extensionid, callback) {\n    if (isFirefox)\n        return callback('not-chrome');\n    if (arguments.length != 2) {\n        callback = extensionid;\n        extensionid = 'lfcgfepafnobdloecchnfaclibenjold';\n    }\n    var image = document.createElement('img');\n    image.src = 'chrome-extension://' + extensionid + '/icon.png';\n    image.onload = function () {\n        chromeMediaSource = 'screen';\n        window.postMessage('are-you-there', '*');\n        setTimeout(function () {\n            if (chromeMediaSource == 'screen') {\n                callback('installed-disabled');\n            }\n            else\n                callback('installed-enabled');\n        }, 2000);\n    };\n    image.onerror = function () {\n        callback('not-installed');\n    };\n}\nfunction getScreenConstraintsWithAudio(callback) {\n    getScreenConstraints(callback, true);\n}\nfunction getScreenConstraints(callback, captureSourceIdWithAudio) {\n    sourceId = '';\n    var firefoxScreenConstraints = {\n        mozMediaSource: 'window',\n        mediaSource: 'window'\n    };\n    if (isFirefox)\n        return callback(null, firefoxScreenConstraints);\n    var screen_constraints = {\n        mandatory: {\n            chromeMediaSource: chromeMediaSource,\n            maxWidth: screen.width > 1920 ? screen.width : 1920,\n            maxHeight: screen.height > 1080 ? screen.height : 1080\n        },\n        optional: []\n    };\n    if (chromeMediaSource == 'desktop' && !sourceId) {\n        if (captureSourceIdWithAudio) {\n            getSourceIdWithAudio(function (sourceId, canRequestAudioTrack) {\n                screen_constraints.mandatory.chromeMediaSourceId = sourceId;\n                if (canRequestAudioTrack) {\n                    screen_constraints.canRequestAudioTrack = true;\n                }\n                callback(sourceId == 'PermissionDeniedError' ? sourceId : null, screen_constraints);\n            });\n        }\n        else {\n            getSourceId(function (sourceId) {\n                screen_constraints.mandatory.chromeMediaSourceId = sourceId;\n                callback(sourceId == 'PermissionDeniedError' ? sourceId : null, screen_constraints);\n            });\n        }\n        return;\n    }\n    if (chromeMediaSource == 'desktop') {\n        screen_constraints.mandatory.chromeMediaSourceId = sourceId;\n    }\n    callback(null, screen_constraints);\n}\nexports.getScreenConstraints = getScreenConstraints;\nexports.getScreenConstraintsWithAudio = getScreenConstraintsWithAudio;\nexports.isChromeExtensionAvailable = isChromeExtensionAvailable;\nexports.getChromeExtensionStatus = getChromeExtensionStatus;\nexports.getSourceId = getSourceId;\n//# sourceMappingURL=Screen-Capturing.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar freeice = require(\"freeice\");\nvar uuid = require(\"uuid\");\nvar platform = require(\"platform\");\nvar WebRtcPeer = /** @class */ (function () {\n    function WebRtcPeer(configuration) {\n        var _this = this;\n        this.configuration = configuration;\n        this.remoteCandidatesQueue = [];\n        this.localCandidatesQueue = [];\n        this.iceCandidateList = [];\n        this.candidategatheringdone = false;\n        this.configuration.iceServers = (!!this.configuration.iceServers && this.configuration.iceServers.length > 0) ? this.configuration.iceServers : freeice();\n        this.pc = new RTCPeerConnection({ iceServers: this.configuration.iceServers });\n        this.id = !!configuration.id ? configuration.id : uuid.v4();\n        this.pc.onicecandidate = function (event) {\n            var candidate = event.candidate;\n            if (candidate) {\n                _this.localCandidatesQueue.push({ candidate: candidate.candidate });\n                _this.candidategatheringdone = false;\n                _this.configuration.onicecandidate(event.candidate);\n            }\n            else if (!_this.candidategatheringdone) {\n                _this.candidategatheringdone = true;\n            }\n        };\n        this.pc.onsignalingstatechange = function () {\n            if (_this.pc.signalingState === 'stable') {\n                while (_this.iceCandidateList.length > 0) {\n                    _this.pc.addIceCandidate(_this.iceCandidateList.shift());\n                }\n            }\n        };\n        this.start();\n    }\n    /**\n     * This function creates the RTCPeerConnection object taking into account the\n     * properties received in the constructor. It starts the SDP negotiation\n     * process: generates the SDP offer and invokes the onsdpoffer callback. This\n     * callback is expected to send the SDP offer, in order to obtain an SDP\n     * answer from another peer.\n     */\n    WebRtcPeer.prototype.start = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.pc.signalingState === 'closed') {\n                reject('The peer connection object is in \"closed\" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue');\n            }\n            if (!!_this.configuration.mediaStream) {\n                _this.pc.addStream(_this.configuration.mediaStream);\n            }\n            // [Hack] https://code.google.com/p/chromium/issues/detail?id=443558\n            if (_this.configuration.mode === 'sendonly' &&\n                (platform.name === 'Chrome' && platform.version.toString().substring(0, 2) === '39')) {\n                _this.configuration.mode = 'sendrecv';\n            }\n            resolve();\n        });\n    };\n    /**\n     * This method frees the resources used by WebRtcPeer\n     */\n    WebRtcPeer.prototype.dispose = function () {\n        var _this = this;\n        console.debug('Disposing WebRtcPeer');\n        try {\n            if (this.pc) {\n                if (this.pc.signalingState === 'closed') {\n                    return;\n                }\n                this.remoteCandidatesQueue = [];\n                this.localCandidatesQueue = [];\n                this.pc.getLocalStreams().forEach(function (str) {\n                    _this.streamStop(str);\n                });\n                // FIXME This is not yet implemented in firefox\n                // if(videoStream) pc.removeStream(videoStream);\n                // if(audioStream) pc.removeStream(audioStream);\n                this.pc.close();\n            }\n        }\n        catch (err) {\n            console.warn('Exception disposing webrtc peer ' + err);\n        }\n    };\n    /**\n     * 1) Function that creates an offer, sets it as local description and returns the offer param\n     * to send to OpenVidu Server (will be the remote description of other peer)\n     */\n    WebRtcPeer.prototype.generateOffer = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var offerAudio, offerVideo = true;\n            // Constraints must have both blocks\n            if (!!_this.configuration.mediaConstraints) {\n                offerAudio = (typeof _this.configuration.mediaConstraints.audio === 'boolean') ?\n                    _this.configuration.mediaConstraints.audio : true;\n                offerVideo = (typeof _this.configuration.mediaConstraints.video === 'boolean') ?\n                    _this.configuration.mediaConstraints.video : true;\n            }\n            var constraints = {\n                offerToReceiveAudio: +(_this.configuration.mode !== 'sendonly' && offerAudio),\n                offerToReceiveVideo: +(_this.configuration.mode !== 'sendonly' && offerVideo)\n            };\n            console.debug('RTCPeerConnection constraints: ' + JSON.stringify(constraints));\n            _this.pc.createOffer(constraints).then(function (offer) {\n                console.debug('Created SDP offer');\n                return _this.pc.setLocalDescription(offer);\n            }).then(function () {\n                var localDescription = _this.pc.localDescription;\n                if (!!localDescription) {\n                    console.debug('Local description set', localDescription.sdp);\n                    resolve(localDescription.sdp);\n                }\n                else {\n                    reject('Local description is not defined');\n                }\n            })[\"catch\"](function (error) { return reject(error); });\n        });\n    };\n    /**\n     * 2) Function to invoke when a SDP offer is received. Sets it as remote description,\n     * generates and answer and returns it to send it to OpenVidu Server\n     */\n    WebRtcPeer.prototype.processOffer = function (sdpOffer) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var offer = {\n                type: 'offer',\n                sdp: sdpOffer\n            };\n            console.debug('SDP offer received, setting remote description');\n            if (_this.pc.signalingState === 'closed') {\n                reject('PeerConnection is closed');\n            }\n            _this.pc.setRemoteDescription(offer)\n                .then(function () {\n                return _this.pc.createAnswer();\n            }).then(function (answer) {\n                console.debug('Created SDP answer');\n                return _this.pc.setLocalDescription(answer);\n            }).then(function () {\n                var localDescription = _this.pc.localDescription;\n                if (!!localDescription) {\n                    console.debug('Local description set', localDescription.sdp);\n                    resolve(localDescription.sdp);\n                }\n                else {\n                    reject('Local description is not defined');\n                }\n            })[\"catch\"](function (error) { return reject(error); });\n        });\n    };\n    /**\n     * 3) Function invoked when a SDP answer is received. Final step in SDP negotiation, the peer\n     * just needs to set the answer as its remote description\n     */\n    WebRtcPeer.prototype.processAnswer = function (sdpAnswer) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var answer = {\n                type: 'answer',\n                sdp: sdpAnswer\n            };\n            console.debug('SDP answer received, setting remote description');\n            if (_this.pc.signalingState === 'closed') {\n                reject('RTCPeerConnection is closed');\n            }\n            _this.pc.setRemoteDescription(answer).then(function () { return resolve(); })[\"catch\"](function (error) { return reject(error); });\n        });\n    };\n    /**\n     * Callback function invoked when an ICE candidate is received\n     */\n    WebRtcPeer.prototype.addIceCandidate = function (iceCandidate) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            console.debug('Remote ICE candidate received', iceCandidate);\n            _this.remoteCandidatesQueue.push(iceCandidate);\n            switch (_this.pc.signalingState) {\n                case 'closed':\n                    reject(new Error('PeerConnection object is closed'));\n                    break;\n                case 'stable':\n                    if (!!_this.pc.remoteDescription) {\n                        _this.pc.addIceCandidate(iceCandidate).then(function () { return resolve(); })[\"catch\"](function (error) { return reject(error); });\n                    }\n                    break;\n                default:\n                    _this.iceCandidateList.push(iceCandidate);\n                    resolve();\n            }\n        });\n    };\n    WebRtcPeer.prototype.streamStop = function (stream) {\n        stream.getTracks().forEach(function (track) {\n            track.stop();\n            stream.removeTrack(track);\n        });\n    };\n    return WebRtcPeer;\n}());\nexports.WebRtcPeer = WebRtcPeer;\nvar WebRtcPeerRecvonly = /** @class */ (function (_super) {\n    __extends(WebRtcPeerRecvonly, _super);\n    function WebRtcPeerRecvonly(configuration) {\n        var _this = this;\n        configuration.mode = 'recvonly';\n        _this = _super.call(this, configuration) || this;\n        return _this;\n    }\n    return WebRtcPeerRecvonly;\n}(WebRtcPeer));\nexports.WebRtcPeerRecvonly = WebRtcPeerRecvonly;\nvar WebRtcPeerSendonly = /** @class */ (function (_super) {\n    __extends(WebRtcPeerSendonly, _super);\n    function WebRtcPeerSendonly(configuration) {\n        var _this = this;\n        configuration.mode = 'sendonly';\n        _this = _super.call(this, configuration) || this;\n        return _this;\n    }\n    return WebRtcPeerSendonly;\n}(WebRtcPeer));\nexports.WebRtcPeerSendonly = WebRtcPeerSendonly;\nvar WebRtcPeerSendrecv = /** @class */ (function (_super) {\n    __extends(WebRtcPeerSendrecv, _super);\n    function WebRtcPeerSendrecv(configuration) {\n        var _this = this;\n        configuration.mode = 'sendrecv';\n        _this = _super.call(this, configuration) || this;\n        return _this;\n    }\n    return WebRtcPeerSendrecv;\n}(WebRtcPeer));\nexports.WebRtcPeerSendrecv = WebRtcPeerSendrecv;\n//# sourceMappingURL=WebRtcPeer.js.map","\"use strict\";\n/*\n * (C) Copyright 2017-2018 OpenVidu (https://openvidu.io/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexports.__esModule = true;\nvar platform = require(\"platform\");\nvar WebRtcStats = /** @class */ (function () {\n    function WebRtcStats(stream) {\n        this.stream = stream;\n        this.webRtcStatsEnabled = false;\n        this.statsInterval = 1;\n        this.stats = {\n            inbound: {\n                audio: {\n                    bytesReceived: 0,\n                    packetsReceived: 0,\n                    packetsLost: 0\n                },\n                video: {\n                    bytesReceived: 0,\n                    packetsReceived: 0,\n                    packetsLost: 0,\n                    framesDecoded: 0,\n                    nackCount: 0\n                }\n            },\n            outbound: {\n                audio: {\n                    bytesSent: 0,\n                    packetsSent: 0\n                },\n                video: {\n                    bytesSent: 0,\n                    packetsSent: 0,\n                    framesEncoded: 0,\n                    nackCount: 0\n                }\n            }\n        };\n    }\n    WebRtcStats.prototype.isEnabled = function () {\n        return this.webRtcStatsEnabled;\n    };\n    WebRtcStats.prototype.initWebRtcStats = function () {\n        var _this = this;\n        var elastestInstrumentation = localStorage.getItem('elastest-instrumentation');\n        if (elastestInstrumentation) {\n            // ElasTest instrumentation object found in local storage\n            console.warn('WebRtc stats enabled for stream ' + this.stream.streamId + ' of connection ' + this.stream.connection.connectionId);\n            this.webRtcStatsEnabled = true;\n            var instrumentation_1 = JSON.parse(elastestInstrumentation);\n            this.statsInterval = instrumentation_1.webrtc.interval; // Interval in seconds\n            console.warn('localStorage item: ' + JSON.stringify(instrumentation_1));\n            this.webRtcStatsIntervalId = setInterval(function () {\n                _this.sendStatsToHttpEndpoint(instrumentation_1);\n            }, this.statsInterval * 1000);\n            return;\n        }\n        console.debug('WebRtc stats not enabled');\n    };\n    WebRtcStats.prototype.stopWebRtcStats = function () {\n        if (this.webRtcStatsEnabled) {\n            clearInterval(this.webRtcStatsIntervalId);\n            console.warn('WebRtc stats stopped for disposed stream ' + this.stream.streamId + ' of connection ' + this.stream.connection.connectionId);\n        }\n    };\n    WebRtcStats.prototype.getSelectedIceCandidateInfo = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.getStatsAgnostic(_this.stream.getRTCPeerConnection(), function (stats) {\n                if ((platform.name.indexOf('Chrome') !== -1) || (platform.name.indexOf('Opera') !== -1)) {\n                    var localCandidateId = void 0, remoteCandidateId = void 0, googCandidatePair = void 0;\n                    var localCandidates = {};\n                    var remoteCandidates = {};\n                    for (var key in stats) {\n                        var stat = stats[key];\n                        if (stat.type === 'localcandidate') {\n                            localCandidates[stat.id] = stat;\n                        }\n                        else if (stat.type === 'remotecandidate') {\n                            remoteCandidates[stat.id] = stat;\n                        }\n                        else if (stat.type === 'googCandidatePair' && (stat.googActiveConnection === 'true')) {\n                            googCandidatePair = stat;\n                            localCandidateId = stat.localCandidateId;\n                            remoteCandidateId = stat.remoteCandidateId;\n                        }\n                    }\n                    var finalLocalCandidate_1 = localCandidates[localCandidateId];\n                    if (!!finalLocalCandidate_1) {\n                        var candList = _this.stream.getLocalIceCandidateList();\n                        var cand = candList.filter(function (c) {\n                            return (!!c.candidate &&\n                                c.candidate.indexOf(finalLocalCandidate_1.ipAddress) >= 0 &&\n                                c.candidate.indexOf(finalLocalCandidate_1.portNumber) >= 0 &&\n                                c.candidate.indexOf(finalLocalCandidate_1.priority) >= 0);\n                        });\n                        finalLocalCandidate_1.raw = !!cand[0] ? cand[0].candidate : 'ERROR: Cannot find local candidate in list of sent ICE candidates';\n                    }\n                    else {\n                        finalLocalCandidate_1 = 'ERROR: No active local ICE candidate. Probably ICE-TCP is being used';\n                    }\n                    var finalRemoteCandidate_1 = remoteCandidates[remoteCandidateId];\n                    if (!!finalRemoteCandidate_1) {\n                        var candList = _this.stream.getRemoteIceCandidateList();\n                        var cand = candList.filter(function (c) {\n                            return (!!c.candidate &&\n                                c.candidate.indexOf(finalRemoteCandidate_1.ipAddress) >= 0 &&\n                                c.candidate.indexOf(finalRemoteCandidate_1.portNumber) >= 0 &&\n                                c.candidate.indexOf(finalRemoteCandidate_1.priority) >= 0);\n                        });\n                        finalRemoteCandidate_1.raw = !!cand[0] ? cand[0].candidate : 'ERROR: Cannot find remote candidate in list of received ICE candidates';\n                    }\n                    else {\n                        finalRemoteCandidate_1 = 'ERROR: No active remote ICE candidate. Probably ICE-TCP is being used';\n                    }\n                    resolve({\n                        googCandidatePair: googCandidatePair,\n                        localCandidate: finalLocalCandidate_1,\n                        remoteCandidate: finalRemoteCandidate_1\n                    });\n                }\n                else {\n                    reject('Selected ICE candidate info only available for Chrome');\n                }\n            }, function (error) {\n                reject(error);\n            });\n        });\n    };\n    WebRtcStats.prototype.sendStatsToHttpEndpoint = function (instrumentation) {\n        var _this = this;\n        var sendPost = function (json) {\n            var http = new XMLHttpRequest();\n            var url = instrumentation.webrtc.httpEndpoint;\n            http.open('POST', url, true);\n            http.setRequestHeader('Content-type', 'application/json');\n            http.onreadystatechange = function () {\n                if (http.readyState === 4 && http.status === 200) {\n                    console.log('WebRtc stats successfully sent to ' + url + ' for stream ' + _this.stream.streamId + ' of connection ' + _this.stream.connection.connectionId);\n                }\n            };\n            http.send(json);\n        };\n        var f = function (stats) {\n            if (platform.name.indexOf('Firefox') !== -1) {\n                stats.forEach(function (stat) {\n                    var json = {};\n                    if ((stat.type === 'inbound-rtp') &&\n                        (\n                        // Avoid firefox empty outbound-rtp statistics\n                        stat.nackCount !== null &&\n                            stat.isRemote === false &&\n                            stat.id.startsWith('inbound') &&\n                            stat.remoteId.startsWith('inbound'))) {\n                        var metricId = 'webrtc_inbound_' + stat.mediaType + '_' + stat.ssrc;\n                        var jit = stat.jitter * 1000;\n                        var metrics = {\n                            bytesReceived: (stat.bytesReceived - _this.stats.inbound[stat.mediaType].bytesReceived) / _this.statsInterval,\n                            jitter: jit,\n                            packetsReceived: (stat.packetsReceived - _this.stats.inbound[stat.mediaType].packetsReceived) / _this.statsInterval,\n                            packetsLost: (stat.packetsLost - _this.stats.inbound[stat.mediaType].packetsLost) / _this.statsInterval\n                        };\n                        var units = {\n                            bytesReceived: 'bytes',\n                            jitter: 'ms',\n                            packetsReceived: 'packets',\n                            packetsLost: 'packets'\n                        };\n                        if (stat.mediaType === 'video') {\n                            metrics['framesDecoded'] = (stat.framesDecoded - _this.stats.inbound.video.framesDecoded) / _this.statsInterval;\n                            metrics['nackCount'] = (stat.nackCount - _this.stats.inbound.video.nackCount) / _this.statsInterval;\n                            units['framesDecoded'] = 'frames';\n                            units['nackCount'] = 'packets';\n                            _this.stats.inbound.video.framesDecoded = stat.framesDecoded;\n                            _this.stats.inbound.video.nackCount = stat.nackCount;\n                        }\n                        _this.stats.inbound[stat.mediaType].bytesReceived = stat.bytesReceived;\n                        _this.stats.inbound[stat.mediaType].packetsReceived = stat.packetsReceived;\n                        _this.stats.inbound[stat.mediaType].packetsLost = stat.packetsLost;\n                        json = {\n                            '@timestamp': new Date(stat.timestamp).toISOString(),\n                            'exec': instrumentation.exec,\n                            'component': instrumentation.component,\n                            'stream': 'webRtc',\n                            'type': metricId,\n                            'stream_type': 'composed_metrics',\n                            'units': units\n                        };\n                        json[metricId] = metrics;\n                        sendPost(JSON.stringify(json));\n                    }\n                    else if ((stat.type === 'outbound-rtp') &&\n                        (\n                        // Avoid firefox empty inbound-rtp statistics\n                        stat.isRemote === false &&\n                            stat.id.toLowerCase().includes('outbound'))) {\n                        var metricId = 'webrtc_outbound_' + stat.mediaType + '_' + stat.ssrc;\n                        var metrics = {\n                            bytesSent: (stat.bytesSent - _this.stats.outbound[stat.mediaType].bytesSent) / _this.statsInterval,\n                            packetsSent: (stat.packetsSent - _this.stats.outbound[stat.mediaType].packetsSent) / _this.statsInterval\n                        };\n                        var units = {\n                            bytesSent: 'bytes',\n                            packetsSent: 'packets'\n                        };\n                        if (stat.mediaType === 'video') {\n                            metrics['framesEncoded'] = (stat.framesEncoded - _this.stats.outbound.video.framesEncoded) / _this.statsInterval;\n                            units['framesEncoded'] = 'frames';\n                            _this.stats.outbound.video.framesEncoded = stat.framesEncoded;\n                        }\n                        _this.stats.outbound[stat.mediaType].bytesSent = stat.bytesSent;\n                        _this.stats.outbound[stat.mediaType].packetsSent = stat.packetsSent;\n                        json = {\n                            '@timestamp': new Date(stat.timestamp).toISOString(),\n                            'exec': instrumentation.exec,\n                            'component': instrumentation.component,\n                            'stream': 'webRtc',\n                            'type': metricId,\n                            'stream_type': 'composed_metrics',\n                            'units': units\n                        };\n                        json[metricId] = metrics;\n                        sendPost(JSON.stringify(json));\n                    }\n                });\n            }\n            else if ((platform.name.indexOf('Chrome') !== -1) || (platform.name.indexOf('Opera') !== -1)) {\n                for (var _i = 0, _a = Object.keys(stats); _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    var stat = stats[key];\n                    if (stat.type === 'ssrc') {\n                        var json = {};\n                        if ('bytesReceived' in stat && ((stat.mediaType === 'audio' && 'audioOutputLevel' in stat) ||\n                            (stat.mediaType === 'video' && 'qpSum' in stat))) {\n                            // inbound-rtp\n                            var metricId = 'webrtc_inbound_' + stat.mediaType + '_' + stat.ssrc;\n                            var metrics = {\n                                bytesReceived: (stat.bytesReceived - _this.stats.inbound[stat.mediaType].bytesReceived) / _this.statsInterval,\n                                jitter: stat.googJitterBufferMs,\n                                packetsReceived: (stat.packetsReceived - _this.stats.inbound[stat.mediaType].packetsReceived) / _this.statsInterval,\n                                packetsLost: (stat.packetsLost - _this.stats.inbound[stat.mediaType].packetsLost) / _this.statsInterval\n                            };\n                            var units = {\n                                bytesReceived: 'bytes',\n                                jitter: 'ms',\n                                packetsReceived: 'packets',\n                                packetsLost: 'packets'\n                            };\n                            if (stat.mediaType === 'video') {\n                                metrics['framesDecoded'] = (stat.framesDecoded - _this.stats.inbound.video.framesDecoded) / _this.statsInterval;\n                                metrics['nackCount'] = (stat.googNacksSent - _this.stats.inbound.video.nackCount) / _this.statsInterval;\n                                units['framesDecoded'] = 'frames';\n                                units['nackCount'] = 'packets';\n                                _this.stats.inbound.video.framesDecoded = stat.framesDecoded;\n                                _this.stats.inbound.video.nackCount = stat.googNacksSent;\n                            }\n                            _this.stats.inbound[stat.mediaType].bytesReceived = stat.bytesReceived;\n                            _this.stats.inbound[stat.mediaType].packetsReceived = stat.packetsReceived;\n                            _this.stats.inbound[stat.mediaType].packetsLost = stat.packetsLost;\n                            json = {\n                                '@timestamp': new Date(stat.timestamp).toISOString(),\n                                'exec': instrumentation.exec,\n                                'component': instrumentation.component,\n                                'stream': 'webRtc',\n                                'type': metricId,\n                                'stream_type': 'composed_metrics',\n                                'units': units\n                            };\n                            json[metricId] = metrics;\n                            sendPost(JSON.stringify(json));\n                        }\n                        else if ('bytesSent' in stat) {\n                            // outbound-rtp\n                            var metricId = 'webrtc_outbound_' + stat.mediaType + '_' + stat.ssrc;\n                            var metrics = {\n                                bytesSent: (stat.bytesSent - _this.stats.outbound[stat.mediaType].bytesSent) / _this.statsInterval,\n                                packetsSent: (stat.packetsSent - _this.stats.outbound[stat.mediaType].packetsSent) / _this.statsInterval\n                            };\n                            var units = {\n                                bytesSent: 'bytes',\n                                packetsSent: 'packets'\n                            };\n                            if (stat.mediaType === 'video') {\n                                metrics['framesEncoded'] = (stat.framesEncoded - _this.stats.outbound.video.framesEncoded) / _this.statsInterval;\n                                units['framesEncoded'] = 'frames';\n                                _this.stats.outbound.video.framesEncoded = stat.framesEncoded;\n                            }\n                            _this.stats.outbound[stat.mediaType].bytesSent = stat.bytesSent;\n                            _this.stats.outbound[stat.mediaType].packetsSent = stat.packetsSent;\n                            json = {\n                                '@timestamp': new Date(stat.timestamp).toISOString(),\n                                'exec': instrumentation.exec,\n                                'component': instrumentation.component,\n                                'stream': 'webRtc',\n                                'type': metricId,\n                                'stream_type': 'composed_metrics',\n                                'units': units\n                            };\n                            json[metricId] = metrics;\n                            sendPost(JSON.stringify(json));\n                        }\n                    }\n                }\n            }\n        };\n        this.getStatsAgnostic(this.stream.getRTCPeerConnection(), f, function (error) { console.log(error); });\n    };\n    WebRtcStats.prototype.standardizeReport = function (response) {\n        console.log(response);\n        var standardReport = {};\n        if (platform.name.indexOf('Firefox') !== -1) {\n            Object.keys(response).forEach(function (key) {\n                console.log(response[key]);\n            });\n            return response;\n        }\n        response.result().forEach(function (report) {\n            var standardStats = {\n                id: report.id,\n                timestamp: report.timestamp,\n                type: report.type\n            };\n            report.names().forEach(function (name) {\n                standardStats[name] = report.stat(name);\n            });\n            standardReport[standardStats.id] = standardStats;\n        });\n        return standardReport;\n    };\n    WebRtcStats.prototype.getStatsAgnostic = function (pc, successCb, failureCb) {\n        var _this = this;\n        if (platform.name.indexOf('Firefox') !== -1) {\n            // getStats takes args in different order in Chrome and Firefox\n            return pc.getStats(null).then(function (response) {\n                var report = _this.standardizeReport(response);\n                successCb(report);\n            })[\"catch\"](failureCb);\n        }\n        else if ((platform.name.indexOf('Chrome') !== -1) || (platform.name.indexOf('Opera') !== -1)) {\n            // In Chrome, the first two arguments are reversed\n            return pc.getStats(function (response) {\n                var report = _this.standardizeReport(response);\n                successCb(report);\n            }, null, failureCb);\n        }\n    };\n    return WebRtcStats;\n}());\nexports.WebRtcStats = WebRtcStats;\n//# sourceMappingURL=WebRtcStats.js.map","\"use strict\";\nexports.__esModule = true;\nvar OpenVidu_1 = require(\"./OpenVidu/OpenVidu\");\nexports.OpenVidu = OpenVidu_1.OpenVidu;\nvar Session_1 = require(\"./OpenVidu/Session\");\nexports.Session = Session_1.Session;\nvar Publisher_1 = require(\"./OpenVidu/Publisher\");\nexports.Publisher = Publisher_1.Publisher;\nvar Subscriber_1 = require(\"./OpenVidu/Subscriber\");\nexports.Subscriber = Subscriber_1.Subscriber;\nvar StreamManager_1 = require(\"./OpenVidu/StreamManager\");\nexports.StreamManager = StreamManager_1.StreamManager;\nvar Stream_1 = require(\"./OpenVidu/Stream\");\nexports.Stream = Stream_1.Stream;\nvar Connection_1 = require(\"./OpenVidu/Connection\");\nexports.Connection = Connection_1.Connection;\nvar LocalRecorder_1 = require(\"./OpenVidu/LocalRecorder\");\nexports.LocalRecorder = LocalRecorder_1.LocalRecorder;\nvar LocalRecorderState_1 = require(\"./OpenViduInternal/Enums/LocalRecorderState\");\nexports.LocalRecorderState = LocalRecorderState_1.LocalRecorderState;\nvar OpenViduError_1 = require(\"./OpenViduInternal/Enums/OpenViduError\");\nexports.OpenViduError = OpenViduError_1.OpenViduError;\nvar VideoInsertMode_1 = require(\"./OpenViduInternal/Enums/VideoInsertMode\");\nexports.VideoInsertMode = VideoInsertMode_1.VideoInsertMode;\nvar Event_1 = require(\"./OpenViduInternal/Events/Event\");\nexports.Event = Event_1.Event;\nvar ConnectionEvent_1 = require(\"./OpenViduInternal/Events/ConnectionEvent\");\nexports.ConnectionEvent = ConnectionEvent_1.ConnectionEvent;\nvar PublisherSpeakingEvent_1 = require(\"./OpenViduInternal/Events/PublisherSpeakingEvent\");\nexports.PublisherSpeakingEvent = PublisherSpeakingEvent_1.PublisherSpeakingEvent;\nvar RecordingEvent_1 = require(\"./OpenViduInternal/Events/RecordingEvent\");\nexports.RecordingEvent = RecordingEvent_1.RecordingEvent;\nvar SessionDisconnectedEvent_1 = require(\"./OpenViduInternal/Events/SessionDisconnectedEvent\");\nexports.SessionDisconnectedEvent = SessionDisconnectedEvent_1.SessionDisconnectedEvent;\nvar SignalEvent_1 = require(\"./OpenViduInternal/Events/SignalEvent\");\nexports.SignalEvent = SignalEvent_1.SignalEvent;\nvar StreamEvent_1 = require(\"./OpenViduInternal/Events/StreamEvent\");\nexports.StreamEvent = StreamEvent_1.StreamEvent;\nvar StreamManagerEvent_1 = require(\"./OpenViduInternal/Events/StreamManagerEvent\");\nexports.StreamManagerEvent = StreamManagerEvent_1.StreamManagerEvent;\nvar VideoElementEvent_1 = require(\"./OpenViduInternal/Events/VideoElementEvent\");\nexports.VideoElementEvent = VideoElementEvent_1.VideoElementEvent;\nvar StreamPropertyChangedEvent_1 = require(\"./OpenViduInternal/Events/StreamPropertyChangedEvent\");\nexports.StreamPropertyChangedEvent = StreamPropertyChangedEvent_1.StreamPropertyChangedEvent;\n//# sourceMappingURL=index.js.map","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"<main>\\n  <router-outlet></router-outlet>\\n</main>\"","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { InfoService } from 'app/services/info.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport {\n    MatButtonModule,\n    MatIconModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatInputModule,\n    MatProgressSpinnerModule,\n    MatTooltipModule,\n    MatDialogModule,\n    MatSlideToggleModule,\n    MatListModule\n} from '@angular/material';\n\n@NgModule({\n    imports: [\n        BrowserAnimationsModule,\n        MatButtonModule,\n        MatIconModule,\n        MatCheckboxModule,\n        MatCardModule,\n        MatInputModule,\n        MatProgressSpinnerModule,\n        MatTooltipModule,\n        MatDialogModule,\n        MatSlideToggleModule,\n        MatListModule\n    ],\n    exports: [\n        BrowserAnimationsModule,\n        MatButtonModule,\n        MatIconModule,\n        MatCheckboxModule,\n        MatCardModule,\n        MatInputModule,\n        MatProgressSpinnerModule,\n        MatTooltipModule,\n        MatDialogModule,\n        MatSlideToggleModule,\n        MatListModule\n    ],\n})\nexport class AppMaterialModule { }\n","import { BrowserModule } from '@angular/platform-browser';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\nimport { RouterModule } from '@angular/router';\nimport 'hammerjs';\n\nimport { routing } from './app.routing';\nimport { AppMaterialModule } from 'app/app.material.module';\n\nimport { InfoService } from './services/info.service';\nimport { RestService } from './services/rest.service';\n\nimport { AppComponent } from './app.component';\nimport { DashboardComponent } from './components/dashboard/dashboard.component';\nimport { SessionDetailsComponent } from './components/session-details/session-details.component';\nimport { CredentialsDialogComponent } from './components/dashboard/credentials-dialog.component';\nimport { LayoutBestFitComponent } from './components/layouts/layout-best-fit/layout-best-fit.component';\nimport { OpenViduVideoComponent } from './components/layouts/ov-video.component';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DashboardComponent,\n    SessionDetailsComponent,\n    CredentialsDialogComponent,\n    LayoutBestFitComponent,\n    OpenViduVideoComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    routing,\n    AppMaterialModule,\n    FlexLayoutModule\n  ],\n  entryComponents: [\n    CredentialsDialogComponent,\n  ],\n  providers: [InfoService, RestService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { ModuleWithProviders } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DashboardComponent } from 'app/components/dashboard/dashboard.component';\nimport { SessionDetailsComponent } from 'app/components/session-details/session-details.component';\nimport { LayoutBestFitComponent } from 'app/components/layouts/layout-best-fit/layout-best-fit.component';\n\nconst appRoutes: Routes = [\n  {\n    path: '',\n    component: DashboardComponent,\n    pathMatch: 'full'\n  },\n  {\n    path: 'session/:sessionId',\n    component: SessionDetailsComponent,\n    pathMatch: 'full'\n  },\n  {\n    path: 'layout-best-fit/:sessionId/:secret',\n    component: LayoutBestFitComponent,\n    pathMatch: 'full'\n  }\n];\n\nexport const routing: ModuleWithProviders = RouterModule.forRoot(appRoutes, { useHash: true });\n\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material';\n\n@Component({\n    selector: 'app-credentials-dialog',\n    template: `\n        <div>\n            <h1 mat-dialog-title>\n                Insert your secret\n            </h1>\n            <form #dialogForm (ngSubmit)=\"testVideo()\">\n                <mat-dialog-content>\n                    <mat-form-field>\n                        <input matInput name=\"secret\" type=\"password\" [(ngModel)]=\"secret\" required>\n                    </mat-form-field>\n                </mat-dialog-content>\n                <mat-dialog-actions>\n                    <button mat-button mat-dialog-close>CANCEL</button>\n                    <button mat-button id=\"join-btn\" type=\"submit\">TEST</button>\n                </mat-dialog-actions>\n            </form>\n        </div>\n    `,\n    styles: [`\n        #quality-div {\n            margin-top: 20px;\n        }\n        #join-div {\n            margin-top: 25px;\n            margin-bottom: 20px;\n        }\n        #quality-tag {\n            display: block;\n        }\n        h5 {\n            margin-bottom: 10px;\n            text-align: left;\n        }\n        #joinWithVideo {\n            margin-right: 50px;\n        }\n        mat-dialog-actions {\n            display: block;\n        }\n        #join-btn {\n            float: right;\n        }\n    `],\n})\nexport class CredentialsDialogComponent {\n\n    public myReference: MatDialogRef<CredentialsDialogComponent>;\n    secret: string;\n\n    constructor() { }\n\n    testVideo() {\n        this.myReference.close(this.secret);\n    }\n}\n","module.exports = \"#dashboard-div {\\n  height: 100%;\\n  padding: 20px;\\n}\\n\\n#log {\\n  height: 90%;\\n}\\n\\n#log-content {\\n  height: 90%;\\n  font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;\\n  overflow-y: auto;\\n  overflow-x: hidden\\n}\\n\\nul {\\n  margin: 0;\\n}\\n\\n#test-btn {\\n  text-transform: uppercase;\\n}\\n\\nmat-card-title button.blue {\\n  color: #ffffff;\\n  background-color: #0088aa;\\n}\\n\\nmat-card-title button.yellow {\\n  color: rgba(0, 0, 0, 0.87);\\n  background-color: #ffcc00;\\n}\\n\\nmat-spinner {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n}\\n\\n#tick-div {\\n  width: 100px;\\n  height: 100px;\\n  z-index: 1;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n}\\n\\n#tooltip-tick {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 2;\\n}\\n\\n.circ {\\n  opacity: 0;\\n  stroke-dasharray: 130;\\n  stroke-dashoffset: 130;\\n  transition: all 1s;\\n}\\n\\n.tick {\\n  stroke-dasharray: 50;\\n  stroke-dashoffset: 50;\\n  transition: stroke-dashoffset 1s 0.5s ease-out;\\n}\\n\\n.drawn+svg .path {\\n  opacity: 1;\\n  stroke-dashoffset: 0;\\n}\\n\\n#mirrored-video {\\n  position: relative;\\n}\\n\\n@media screen and (max-width: 599px) {\\n  mat-card-title {\\n     font-size: 20px;\\n  }\\n}\\n\\n/* Pure CSS loader */\\n\\n#loader {\\n  width: 100px;\\n  height: 100px;\\n  z-index: 1;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n  transform: translate(-50%, -50%);\\n}\\n\\n#loader * {\\n  box-sizing: border-box;\\n}\\n\\n#loader ::after {\\n  box-sizing: border-box;\\n}\\n\\n#loader ::before {\\n  box-sizing: border-box;\\n}\\n\\n.loader-1 {\\n  height: 100px;\\n  width: 100px;\\n  -webkit-animation: loader-1-1 4.8s linear infinite;\\n  animation: loader-1-1 4.8s linear infinite;\\n}\\n\\n@-webkit-keyframes loader-1-1 {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes loader-1-1 {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n  }\\n}\\n\\n.loader-1 span {\\n  display: block;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: auto;\\n  height: 100px;\\n  width: 100px;\\n  clip: rect(0, 100px, 100px, 50px);\\n  -webkit-animation: loader-1-2 1.2s linear infinite;\\n  animation: loader-1-2 1.2s linear infinite;\\n}\\n\\n@-webkit-keyframes loader-1-2 {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(220deg);\\n  }\\n}\\n\\n@keyframes loader-1-2 {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(220deg);\\n            transform: rotate(220deg);\\n  }\\n}\\n\\n.loader-1 span::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: auto;\\n  height: 100px;\\n  width: 100px;\\n  clip: rect(0, 100px, 100px, 50px);\\n  border: 8px solid #4d4d4d;\\n  border-radius: 50%;\\n  -webkit-animation: loader-1-3 1.2s cubic-bezier(0.770, 0.000, 0.175, 1.000) infinite;\\n  animation: loader-1-3 1.2s cubic-bezier(0.770, 0.000, 0.175, 1.000) infinite;\\n}\\n\\n@-webkit-keyframes loader-1-3 {\\n  0% {\\n    -webkit-transform: rotate(-140deg);\\n  }\\n  50% {\\n    -webkit-transform: rotate(-160deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(140deg);\\n  }\\n}\\n\\n@keyframes loader-1-3 {\\n  0% {\\n    -webkit-transform: rotate(-140deg);\\n            transform: rotate(-140deg);\\n  }\\n  50% {\\n    -webkit-transform: rotate(-160deg);\\n            transform: rotate(-160deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(140deg);\\n            transform: rotate(140deg);\\n  }\\n}\"","module.exports = \"<div id=\\\"dashboard-div\\\" fxLayout=\\\"row\\\" fxLayout.xs=\\\"column\\\" fxLayoutGap=\\\"20px\\\" fxLayoutGap.xs=\\\"20px\\\">\\n\\n  <div fxFlex=\\\"66%\\\" fxFlexOrder=\\\"1\\\" fxFlexOrder.xs=\\\"2\\\">\\n    <mat-card id=\\\"log\\\">\\n      <mat-card-title>Server events\\n        <mat-slide-toggle title=\\\"Lock Scroll\\\" [(ngModel)]=\\\"lockScroll\\\" style=\\\"float: right; margin-left: auto;\\\">\\n          <mat-icon>lock_outline</mat-icon>\\n        </mat-slide-toggle>\\n      </mat-card-title>\\n      <mat-divider></mat-divider>\\n      <mat-card-content #scrollMe id=\\\"log-content\\\">\\n        <ul>\\n          <li *ngFor=\\\"let i of info\\\">\\n            <p>{{i}}</p>\\n          </li>\\n        </ul>\\n      </mat-card-content>\\n    </mat-card>\\n  </div>\\n\\n  <div fxFlex=\\\"33%\\\" fxFlex.xs=\\\"auto\\\" fxFlexOrder=\\\"2\\\" fxFlexOrder.xs=\\\"1\\\">\\n    <mat-card id=\\\"video-loop\\\">\\n      <mat-card-title>Test the connection\\n        <button id=\\\"test-btn\\\" mat-raised-button [ngClass]=\\\"testStatus == 'DISCONNECTED' ? 'blue' : (testStatus == 'PLAYING' ? 'yellow' : 'disabled')\\\" (click)=\\\"toggleTestVideo()\\\" [disabled]=\\\"testStatus==='CONNECTING' || testStatus==='CONNECTED'\\\">{{testButton}}</button>\\n      </mat-card-title>\\n      <mat-divider></mat-divider>\\n      <mat-card-content>\\n        <div id=\\\"mirrored-video\\\">\\n          <div *ngIf=\\\"showSpinner\\\" id=\\\"loader\\\">\\n            <div class=\\\"loader-1 center\\\"><span></span></div>\\n          </div>\\n          <div *ngIf=\\\"session\\\" id=\\\"tick-div\\\">\\n            <div id=\\\"tooltip-tick\\\" *ngIf=\\\"testStatus=='PLAYING'\\\" matTooltip=\\\"The connection is successful\\\" matTooltipPosition=\\\"below\\\"></div>\\n            <div [ngClass]=\\\"testStatus=='PLAYING' ? 'trigger drawn' : 'trigger'\\\"></div>\\n            <svg version=\\\"1.1\\\" id=\\\"tick\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n              viewBox=\\\"-1 -1 39 39\\\" style=\\\"enable-background:new 0 0 37 37;\\\" xml:space=\\\"preserve\\\">\\n              <path class=\\\"circ path\\\" style=\\\"fill:none;stroke:#06d362;stroke-width:4;stroke-linejoin:round;stroke-miterlimit:10;\\\" d=\\\"\\n\\tM30.5,6.5L30.5,6.5c6.6,6.6,6.6,17.4,0,24l0,0c-6.6,6.6-17.4,6.6-24,0l0,0c-6.6-6.6-6.6-17.4,0-24l0,0C13.1-0.2,23.9-0.2,30.5,6.5z\\\"\\n              />\\n              <polyline class=\\\"tick path\\\" style=\\\"fill:none;stroke:#06d362;stroke-width:4;stroke-linejoin:round;stroke-miterlimit:10;\\\" points=\\\"\\n\\t11.6,20 15.9,24.2 26.4,13.8 \\\" />\\n            </svg>\\n          </div>\\n        </div>\\n        <div id=\\\"msg-chain\\\"><p *ngFor=\\\"let msg of msgChain\\\">{{msg}}</p></div>\\n      </mat-card-content>\\n    </mat-card>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, ViewChild, ElementRef, HostListener, OnDestroy } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material';\nimport { Subscription } from 'rxjs';\n\nimport { InfoService } from '../../services/info.service';\nimport { RestService } from '../../services/rest.service';\n\nimport { OpenVidu, Session } from 'openvidu-browser';\nimport { CredentialsDialogComponent } from './credentials-dialog.component';\n\ndeclare const $;\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css'],\n})\nexport class DashboardComponent implements OnInit, OnDestroy {\n\n  websocket: WebSocket;\n\n  @ViewChild('scrollMe') private myScrollContainer: ElementRef;\n  lockScroll = false;\n\n  infoSubscription: Subscription;\n  info = [];\n\n  session: Session;\n\n  testStatus = 'DISCONNECTED';\n  testButton = 'Test';\n  tickClass = 'trigger';\n  showSpinner = false;\n  msgChain = [];\n\n  openviduPublicUrl: string;\n\n  constructor(private infoService: InfoService, private restService: RestService, public dialog: MatDialog) {\n    // Subscription to info updated event raised by InfoService\n    this.infoSubscription = this.infoService.newInfo$.subscribe(\n      info => {\n        this.info.push(info);\n        this.scrollToBottom();\n      });\n  }\n\n  ngOnInit() {\n\n    const protocol = location.protocol.includes('https') ? 'wss://' : 'ws://';\n    const port = (location.port) ? (':' + location.port) : '';\n\n    this.websocket = new WebSocket(protocol + location.hostname + port + '/info');\n\n    this.websocket.onopen = (event) => {\n      console.log('Info websocket connected');\n    };\n    this.websocket.onclose = (event) => {\n      console.log('Info websocket closed');\n    };\n    this.websocket.onerror = (event) => {\n      console.log('Info websocket error');\n    };\n    this.websocket.onmessage = (event) => {\n      console.log('Info websocket message');\n      console.log(event.data);\n      this.infoService.updateInfo(event.data);\n    };\n\n    this.restService.getOpenViduPublicUrl()\n      .then(url => {\n        this.openviduPublicUrl = url.replace('https://', 'wss://').replace('http://', 'ws://');\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }\n\n  @HostListener('window:beforeunload')\n  beforeunloadHandler() {\n    // On window closed leave test session and close info websocket\n    if (this.session) {\n      this.endTestVideo();\n    }\n    this.websocket.close();\n  }\n\n  ngOnDestroy() {\n    // On component destroyed leave test session and close info websocket\n    if (this.session) {\n      this.endTestVideo();\n    }\n    this.websocket.close();\n  }\n\n  toggleTestVideo() {\n    if (!this.session) {\n      this.testVideo();\n    } else {\n      this.endTestVideo();\n    }\n  }\n\n  testVideo() {\n    let dialogRef: MatDialogRef<CredentialsDialogComponent>;\n    dialogRef = this.dialog.open(CredentialsDialogComponent);\n    dialogRef.componentInstance.myReference = dialogRef;\n\n    dialogRef.afterClosed().subscribe(secret => {\n      if (secret) {\n        if (!this.openviduPublicUrl) {\n          this.restService.getOpenViduPublicUrl()\n            .then((url => {\n              this.openviduPublicUrl = url.replace('https://', 'wss://').replace('http://', 'ws://');\n              this.connectToSession(this.openviduPublicUrl + '?sessionId=testSession&secret=' + secret);\n            }))\n            .catch(error => {\n              console.error(error);\n            });\n        } else {\n          this.connectToSession(this.openviduPublicUrl + '?sessionId=testSession&secret=' + secret);\n        }\n      }\n    });\n  }\n\n  connectToSession(token: string) {\n    this.msgChain = [];\n\n    const OV = new OpenVidu();\n    this.session = OV.initSession();\n\n    this.testStatus = 'CONNECTING';\n    this.testButton = 'Testing...';\n\n    this.session.connect(token)\n      .then(() => {\n\n        this.msgChain.push('Connected to session');\n\n        this.testStatus = 'CONNECTED';\n\n        const publisherRemote = OV.initPublisher('mirrored-video', {\n          publishAudio: true,\n          publishVideo: true,\n          resolution: '640x480'\n        },\n          e => {\n            if (!!e) {\n              console.error(e);\n            }\n          }\n        );\n\n        publisherRemote.on('accessAllowed', () => {\n          this.msgChain.push('Camera access allowed');\n        });\n\n        publisherRemote.on('accessDenied', () => {\n          this.endTestVideo();\n          this.msgChain.push('Camera access denied');\n        });\n\n        publisherRemote.on('videoElementCreated', (video) => {\n          this.showSpinner = true;\n          this.msgChain.push('Video element created');\n        });\n\n        publisherRemote.on('streamCreated', (video) => {\n          this.msgChain.push('Stream created');\n        });\n\n        publisherRemote.on('streamPlaying', (video) => {\n          this.msgChain.push('Stream playing');\n          this.testButton = 'End test';\n          this.testStatus = 'PLAYING';\n          this.showSpinner = false;\n        });\n\n        publisherRemote.subscribeToRemote();\n        this.session.publish(publisherRemote);\n\n      })\n      .catch(error => {\n        if (error.code === 401) { // User unauthorized error. OpenVidu security is active\n          this.endTestVideo();\n          let dialogRef: MatDialogRef<CredentialsDialogComponent>;\n          dialogRef = this.dialog.open(CredentialsDialogComponent);\n          dialogRef.componentInstance.myReference = dialogRef;\n\n          dialogRef.afterClosed().subscribe(secret => {\n            if (secret) {\n              this.connectToSession(this.openviduPublicUrl + '?sessionId=testSession&secret=' + secret);\n            }\n          });\n        } else {\n          console.error(error);\n          this.msgChain.push('Error connecting to session');\n        }\n      });\n  }\n\n  endTestVideo() {\n    this.session.disconnect();\n    this.session = null;\n    this.testStatus = 'DISCONNECTED';\n    this.testButton = 'Test';\n    this.showSpinner = false;\n    this.info = [];\n    this.msgChain = [];\n  }\n\n  scrollToBottom(): void {\n    try {\n      if (!this.lockScroll) {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n      }\n    } catch (err) {\n      console.error('[Error]:' + err.toString());\n    }\n  }\n\n}\n","module.exports = \".bounds {\\n  background-color: black;\\n  overflow: hidden;\\n  cursor: none !important;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n}\\n\\napp-ov-video video {\\n  -o-object-fit: cover;\\n  object-fit: cover;\\n  display: block;\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  color: #ffffff;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-size: 100%;\\n  font-family: Arial, Helvetica, sans-serif;\\n}\\n\\n/*!\\n * Copyright (c) 2017 TokBox, Inc.\\n * Released under the MIT license\\n * http://opensource.org/licenses/MIT\\n */\\n\\n.custom-class {\\n  min-height: 0px !important;\\n}\\n\\n/**\\n * OT Base styles\\n */\\n\\n/* Root OT object, this is where our CSS reset happens */\\n\\n.OT_root, .OT_root * {\\n  color: #ffffff;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-size: 100%;\\n  font-family: Arial, Helvetica, sans-serif;\\n  vertical-align: baseline;\\n}\\n\\n.OT_dialog-centering {\\n  display: table;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.OT_dialog-centering-child {\\n  display: table-cell;\\n  vertical-align: middle;\\n}\\n\\n.OT_dialog {\\n  position: relative;\\n  box-sizing: border-box;\\n  max-width: 576px;\\n  margin-right: auto;\\n  margin-left: auto;\\n  padding: 36px;\\n  text-align: center;\\n  /* centers all the inline content */\\n  background-color: #363636;\\n  color: #fff;\\n  box-shadow: 2px 4px 6px #999;\\n  font-family: 'Didact Gothic', sans-serif;\\n  font-size: 13px;\\n  line-height: 1.4;\\n}\\n\\n.OT_dialog * {\\n  font-family: inherit;\\n  box-sizing: inherit;\\n}\\n\\n.OT_closeButton {\\n  color: #999999;\\n  cursor: pointer;\\n  font-size: 32px;\\n  line-height: 36px;\\n  position: absolute;\\n  right: 18px;\\n  top: 0;\\n}\\n\\n.OT_dialog-messages {\\n  text-align: center;\\n}\\n\\n.OT_dialog-messages-main {\\n  margin-bottom: 36px;\\n  line-height: 36px;\\n  font-weight: 300;\\n  font-size: 24px;\\n}\\n\\n.OT_dialog-messages-minor {\\n  margin-bottom: 18px;\\n  font-size: 13px;\\n  line-height: 18px;\\n  color: #A4A4A4;\\n}\\n\\n.OT_dialog-messages-minor strong {\\n  color: #ffffff;\\n}\\n\\n.OT_dialog-actions-card {\\n  display: inline-block;\\n}\\n\\n.OT_dialog-button-title {\\n  margin-bottom: 18px;\\n  line-height: 18px;\\n  font-weight: 300;\\n  text-align: center;\\n  font-size: 14px;\\n  color: #999999;\\n}\\n\\n.OT_dialog-button-title label {\\n  color: #999999;\\n}\\n\\n.OT_dialog-button-title a, .OT_dialog-button-title a:link, .OT_dialog-button-title a:active {\\n  color: #02A1DE;\\n}\\n\\n.OT_dialog-button-title strong {\\n  color: #ffffff;\\n  font-weight: 100;\\n  display: block;\\n}\\n\\n.OT_dialog-button {\\n  display: inline-block;\\n  margin-bottom: 18px;\\n  padding: 0 1em;\\n  background-color: #1CA3DC;\\n  text-align: center;\\n  cursor: pointer;\\n}\\n\\n.OT_dialog-button:disabled {\\n  cursor: not-allowed;\\n  opacity: 0.5;\\n}\\n\\n.OT_dialog-button-large {\\n  line-height: 36px;\\n  padding-top: 9px;\\n  padding-bottom: 9px;\\n  font-weight: 100;\\n  font-size: 24px;\\n}\\n\\n.OT_dialog-button-small {\\n  line-height: 18px;\\n  padding-top: 9px;\\n  padding-bottom: 9px;\\n  background-color: #444444;\\n  color: #999999;\\n  font-size: 16px;\\n}\\n\\n.OT_dialog-progress-bar {\\n  display: inline-block;\\n  /* prevents margin collapse */\\n  width: 100%;\\n  margin-top: 5px;\\n  margin-bottom: 41px;\\n  border: 1px solid #4E4E4E;\\n  height: 8px;\\n}\\n\\n.OT_dialog-progress-bar-fill {\\n  height: 100%;\\n  background-color: #29A4DA;\\n}\\n\\n.OT_dialog-plugin-upgrading .OT_dialog-plugin-upgrade-percentage {\\n  line-height: 54px;\\n  font-size: 48px;\\n  font-weight: 100;\\n}\\n\\n/* Helpers */\\n\\n.OT_centered {\\n  position: fixed;\\n  left: 50%;\\n  top: 50%;\\n  margin: 0;\\n}\\n\\n.OT_dialog-hidden {\\n  display: none;\\n}\\n\\n.OT_dialog-button-block {\\n  display: block;\\n}\\n\\n.OT_dialog-no-natural-margin {\\n  margin-bottom: 0;\\n}\\n\\n/* Publisher and Subscriber styles */\\n\\n.OT_publisher, .OT_subscriber {\\n  position: relative;\\n  min-width: 48px;\\n  min-height: 48px;\\n}\\n\\n.OT_publisher .OT_video-element, .OT_subscriber .OT_video-element {\\n  display: block;\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  -webkit-transform-origin: 0 0;\\n  transform-origin: 0 0;\\n}\\n\\n/* Styles that are applied when the video element should be mirrored */\\n\\n.OT_publisher.OT_mirrored .OT_video-element {\\n  -webkit-transform: scale(-1, 1);\\n  transform: scale(-1, 1);\\n  -webkit-transform-origin: 50% 50%;\\n  transform-origin: 50% 50%;\\n}\\n\\n.OT_subscriber_error {\\n  background-color: #000;\\n  color: #fff;\\n  text-align: center;\\n}\\n\\n.OT_subscriber_error>p {\\n  padding: 20px;\\n}\\n\\n/* The publisher/subscriber name/mute background */\\n\\n.OT_publisher .OT_bar, .OT_subscriber .OT_bar, .OT_publisher .OT_name, .OT_subscriber .OT_name, .OT_publisher .OT_archiving, .OT_subscriber .OT_archiving, .OT_publisher .OT_archiving-status, .OT_subscriber .OT_archiving-status, .OT_publisher .OT_archiving-light-box, .OT_subscriber .OT_archiving-light-box {\\n  -ms-box-sizing: border-box;\\n  box-sizing: border-box;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  display: block;\\n  height: 34px;\\n  position: absolute;\\n}\\n\\n.OT_publisher .OT_bar, .OT_subscriber .OT_bar {\\n  background: rgba(0, 0, 0, 0.4);\\n}\\n\\n.OT_publisher .OT_edge-bar-item, .OT_subscriber .OT_edge-bar-item {\\n  z-index: 1;\\n  /* required to get audio level meter underneath */\\n}\\n\\n/* The publisher/subscriber name panel/archiving status bar */\\n\\n.OT_publisher .OT_name, .OT_subscriber .OT_name {\\n  background-color: transparent;\\n  color: #ffffff;\\n  font-size: 15px;\\n  line-height: 34px;\\n  font-weight: normal;\\n  padding: 0 4px 0 36px;\\n}\\n\\n.OT_publisher .OT_archiving-status, .OT_subscriber .OT_archiving-status {\\n  background: rgba(0, 0, 0, 0.4);\\n  top: auto;\\n  bottom: 0;\\n  left: 34px;\\n  padding: 0 4px;\\n  color: rgba(255, 255, 255, 0.8);\\n  font-size: 15px;\\n  line-height: 34px;\\n  font-weight: normal;\\n}\\n\\n.OT_micro .OT_archiving-status, .OT_micro:hover .OT_archiving-status, .OT_mini .OT_archiving-status, .OT_mini:hover .OT_archiving-status {\\n  display: none;\\n}\\n\\n.OT_publisher .OT_archiving-light-box, .OT_subscriber .OT_archiving-light-box {\\n  background: rgba(0, 0, 0, 0.4);\\n  top: auto;\\n  bottom: 0;\\n  right: auto;\\n  width: 34px;\\n  height: 34px;\\n}\\n\\n.OT_archiving-light {\\n  width: 7px;\\n  height: 7px;\\n  border-radius: 30px;\\n  position: absolute;\\n  top: 14px;\\n  left: 14px;\\n  background-color: #575757;\\n  box-shadow: 0 0 5px 1px #575757;\\n}\\n\\n.OT_archiving-light.OT_active {\\n  background-color: #970d13;\\n  animation: OT_pulse 1.3s ease-in;\\n  -webkit-animation: OT_pulse 1.3s ease-in;\\n  -moz-animation: OT_pulse 1.3s ease-in;\\n  -webkit-animation: OT_pulse 1.3s ease-in;\\n  animation-iteration-count: infinite;\\n  -webkit-animation-iteration-count: infinite;\\n  -moz-animation-iteration-count: infinite;\\n  -webkit-animation-iteration-count: infinite;\\n}\\n\\n@-webkit-keyframes OT_pulse {\\n  0% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n  30% {\\n    box-shadow: 0 0 5px 1px #c70019;\\n  }\\n  50% {\\n    box-shadow: 0 0 5px 1px #c70019;\\n  }\\n  80% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n  100% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n}\\n\\n@-webkit-keyframes OT_pulse {\\n  0% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n  30% {\\n    box-shadow: 0 0 5px 1px #c70019;\\n  }\\n  50% {\\n    box-shadow: 0 0 5px 1px #c70019;\\n  }\\n  80% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n  100% {\\n    box-shadow: 0 0 0px 0px #c70019;\\n  }\\n}\\n\\n.OT_mini .OT_bar, .OT_bar.OT_mode-mini, .OT_bar.OT_mode-mini-auto {\\n  bottom: 0;\\n  height: auto;\\n}\\n\\n.OT_mini .OT_name.OT_mode-off, .OT_mini .OT_name.OT_mode-on, .OT_mini .OT_name.OT_mode-auto, .OT_mini:hover .OT_name.OT_mode-auto {\\n  display: none;\\n}\\n\\n.OT_publisher .OT_name, .OT_subscriber .OT_name {\\n  left: 10px;\\n  right: 37px;\\n  height: 34px;\\n  padding-left: 0;\\n}\\n\\n.OT_publisher .OT_mute, .OT_subscriber .OT_mute {\\n  border: none;\\n  cursor: pointer;\\n  display: block;\\n  position: absolute;\\n  text-align: center;\\n  text-indent: -9999em;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n}\\n\\n.OT_publisher .OT_mute, .OT_subscriber .OT_mute {\\n  right: 0;\\n  top: 0;\\n  border-left: 1px solid rgba(255, 255, 255, 0.2);\\n  height: 36px;\\n  width: 37px;\\n}\\n\\n.OT_mini .OT_mute, .OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold, .OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {\\n  top: 50%;\\n  left: 50%;\\n  right: auto;\\n  margin-top: -18px;\\n  margin-left: -18.5px;\\n  border-left: none;\\n}\\n\\n.OT_publisher .OT_mute {\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII=);\\n  background-position: 9px 5px;\\n}\\n\\n.OT_publisher .OT_mute.OT_active {\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg==);\\n  background-position: 9px 4px;\\n}\\n\\n.OT_subscriber .OT_mute {\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII=);\\n  background-position: 8px 7px;\\n}\\n\\n.OT_subscriber .OT_mute.OT_active {\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg==);\\n  background-position: 7px 7px;\\n}\\n\\n/**\\n * Styles for display modes\\n *\\n * Note: It's important that these completely control the display and opacity\\n * attributes, no other selectors should atempt to change them.\\n */\\n\\n/* Default display mode transitions for various chrome elements */\\n\\n.OT_publisher .OT_edge-bar-item, .OT_subscriber .OT_edge-bar-item {\\n  transition-property: top, bottom, opacity;\\n  transition-duration: 0.5s;\\n  transition-timing-function: ease-in;\\n}\\n\\n.OT_publisher .OT_edge-bar-item.OT_mode-off, .OT_subscriber .OT_edge-bar-item.OT_mode-off, .OT_publisher .OT_edge-bar-item.OT_mode-auto, .OT_subscriber .OT_edge-bar-item.OT_mode-auto, .OT_publisher .OT_edge-bar-item.OT_mode-mini-auto, .OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {\\n  top: -25px;\\n  opacity: 0;\\n}\\n\\n.OT_publisher .OT_edge-bar-item.OT_mode-off, .OT_subscriber .OT_edge-bar-item.OT_mode-off {\\n  display: none;\\n}\\n\\n.OT_mini .OT_mute.OT_mode-auto, .OT_publisher .OT_mute.OT_mode-mini-auto, .OT_subscriber .OT_mute.OT_mode-mini-auto {\\n  top: 50%;\\n}\\n\\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off, .OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off, .OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto, .OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto, .OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto, .OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {\\n  top: auto;\\n  bottom: -25px;\\n}\\n\\n.OT_publisher .OT_edge-bar-item.OT_mode-on, .OT_subscriber .OT_edge-bar-item.OT_mode-on, .OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold, .OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold, .OT_publisher:hover .OT_edge-bar-item.OT_mode-auto, .OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto, .OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto, .OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {\\n  top: 0;\\n  opacity: 1;\\n}\\n\\n.OT_mini .OT_mute.OT_mode-on, .OT_mini:hover .OT_mute.OT_mode-auto, .OT_mute.OT_mode-mini, .OT_root:hover .OT_mute.OT_mode-mini-auto {\\n  top: 50%;\\n}\\n\\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on, .OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on, .OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto, .OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {\\n  top: auto;\\n  bottom: 0;\\n  opacity: 1;\\n}\\n\\n/* Contains the video element, used to fix video letter-boxing */\\n\\n.OT_widget-container {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  background-color: #000000;\\n  overflow: hidden;\\n}\\n\\n/* Load animation */\\n\\n.OT_root .OT_video-loading {\\n  position: absolute;\\n  z-index: 1;\\n  width: 100%;\\n  height: 100%;\\n  display: none;\\n  background-color: rgba(0, 0, 0, .75);\\n}\\n\\n.OT_root .OT_video-loading .OT_video-loading-spinner {\\n  background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwIDEgMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2IpIiBkPSJNODYuNiA1MEExMDAgMTAwIDAgMCAxIDAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNjKSIgZD0iTTAgMTAwYTEwMCAxMDAgMCAwIDEtODYuNi01MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48cGF0aCBzdHJva2U9InVybCgjZCkiIGQ9Ik0tODYuNiA1MGExMDAgMTAwIDAgMCAxIDAtMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNlKSIgZD0iTS04Ni42LTUwQTEwMCAxMDAgMCAwIDEgMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAgMSA4Ni42IDUwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjwvZz48L21hc2s+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9Ii0yMCIgeT0iLTIwIiBtYXNrPSJ1cmwoI2cpIiBmaWxsPSIjZmZmIi8+PC9zdmc+) no-repeat;\\n  position: absolute;\\n  width: 32px;\\n  height: 32px;\\n  left: 50%;\\n  top: 50%;\\n  margin-left: -16px;\\n  margin-top: -16px;\\n  -webkit-animation: OT_spin 2s linear infinite;\\n  animation: OT_spin 2s linear infinite;\\n}\\n\\n@-webkit-keyframes OT_spin {\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes OT_spin {\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n.OT_publisher.OT_loading .OT_video-loading, .OT_subscriber.OT_loading .OT_video-loading {\\n  display: block;\\n}\\n\\n.OT_video-centering {\\n  display: table;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.OT_video-container {\\n  display: table-cell;\\n  vertical-align: middle;\\n}\\n\\n.OT_video-poster {\\n  position: absolute;\\n  z-index: 1;\\n  width: 100%;\\n  height: 100%;\\n  display: none;\\n  opacity: .25;\\n  background-repeat: no-repeat;\\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSI2Ni42NiUiIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTc5IDMwOGMxNC4yNS02LjUgNTQuMjUtMTkuNzUgNzEtMjkgOS0zLjI1IDI1LTIxIDI1LTIxczMuNzUtMTMgMy0yMmMtMS43NS02Ljc1LTE1LTQzLTE1LTQzLTIuNSAzLTQuNzQxIDMuMjU5LTcgMS0zLjI1LTcuNS0yMC41LTQ0LjUtMTYtNTcgMS4yNS03LjUgMTAtNiAxMC02LTExLjI1LTMzLjc1LTgtNjctOC02N3MuMDczLTcuMzQ2IDYtMTVjLTMuNDguNjM3LTkgNC05IDQgMi41NjMtMTEuNzI3IDE1LTIxIDE1LTIxIC4xNDgtLjMxMi0xLjMyMS0xLjQ1NC0xMCAxIDEuNS0yLjc4IDE2LjY3NS04LjY1NCAzMC0xMSAzLjc4Ny05LjM2MSAxMi43ODItMTcuMzk4IDIyLTIyLTIuMzY1IDMuMTMzLTMgNi0zIDZzMTUuNjQ3LTguMDg4IDQxLTZjLTE5Ljc1IDItMjQgNi0yNCA2czc0LjUtMTAuNzUgMTA0IDM3YzcuNSA5LjUgMjQuNzUgNTUuNzUgMTAgODkgMy43NS0xLjUgNC41LTQuNSA5IDEgLjI1IDE0Ljc1LTExLjUgNjMtMTkgNjItMi43NSAxLTQtMy00LTMtMTAuNzUgMjkuNS0xNCAzOC0xNCAzOC0yIDQuMjUtMy43NSAxOC41LTEgMjIgMS4yNSA0LjUgMjMgMjMgMjMgMjNsMTI3IDUzYzM3IDM1IDIzIDEzNSAyMyAxMzVMMCA0NjRzLTMtOTYuNzUgMTQtMTIwYzUuMjUtNi4yNSAyMS43NS0xOS43NSA2NS0zNnoiLz48L3N2Zz4=);\\n  background-size: auto 76%;\\n}\\n\\n.OT_fit-mode-cover .OT_video-element {\\n  -o-object-fit: cover;\\n  object-fit: cover;\\n}\\n\\n/* Workaround for iOS freezing issue when cropping videos */\\n\\n/* https://bugs.webkit.org/show_bug.cgi?id=176439 */\\n\\n@media only screen and (orientation: portrait) {\\n  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {\\n    -o-object-fit: contain !important;\\n    object-fit: contain !important;\\n  }\\n}\\n\\n.OT_fit-mode-contain .OT_video-element {\\n  -o-object-fit: contain;\\n  object-fit: contain;\\n}\\n\\n.OT_fit-mode-cover .OT_video-poster {\\n  background-position: center bottom;\\n}\\n\\n.OT_fit-mode-contain .OT_video-poster {\\n  background-position: center;\\n}\\n\\n.OT_audio-level-meter {\\n  position: absolute;\\n  width: 25%;\\n  max-width: 224px;\\n  min-width: 21px;\\n  top: 0;\\n  right: 0;\\n  overflow: hidden;\\n}\\n\\n.OT_audio-level-meter:before {\\n  /* makes the height of the container equals its width */\\n  content: '';\\n  display: block;\\n  padding-top: 100%;\\n}\\n\\n.OT_audio-level-meter__bar {\\n  position: absolute;\\n  width: 192%;\\n  /* meter value can overflow of 8% */\\n  height: 192%;\\n  top: -96%/* half of the size */\\n  ;\\n  right: -96%;\\n  border-radius: 50%;\\n  background-color: rgba(0, 0, 0, .8);\\n}\\n\\n.OT_audio-level-meter__audio-only-img {\\n  position: absolute;\\n  top: 22%;\\n  right: 15%;\\n  width: 40%;\\n  opacity: .7;\\n  background: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+) no-repeat center;\\n}\\n\\n.OT_audio-level-meter__audio-only-img:before {\\n  /* makes the height of the container equals its width */\\n  content: '';\\n  display: block;\\n  padding-top: 100%;\\n}\\n\\n.OT_audio-level-meter__value {\\n  position: absolute;\\n  border-radius: 50%;\\n  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);\\n}\\n\\n.OT_audio-level-meter.OT_mode-off {\\n  display: none;\\n}\\n\\n.OT_audio-level-meter.OT_mode-on, .OT_audio-only .OT_audio-level-meter.OT_mode-auto {\\n  display: block;\\n}\\n\\n.OT_audio-only.OT_publisher .OT_video-element, .OT_audio-only.OT_subscriber .OT_video-element {\\n  display: none;\\n}\\n\\n.OT_video-disabled-indicator {\\n  opacity: 1;\\n  border: none;\\n  display: none;\\n  position: absolute;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n  background-position: bottom right;\\n  pointer-events: none;\\n  top: 0;\\n  left: 0;\\n  bottom: 3px;\\n  right: 3px;\\n}\\n\\n.OT_video-disabled {\\n  background-image: url(data:image/png;base64,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);\\n  background-size: 33px auto;\\n}\\n\\n.OT_video-disabled-warning {\\n  background-image: url(data:image/png;base64,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);\\n  background-size: 33px auto;\\n}\\n\\n.OT_video-disabled-indicator.OT_active {\\n  display: block;\\n}\\n\\n.OT_audio-blocked-indicator {\\n  opacity: 1;\\n  border: none;\\n  display: none;\\n  position: absolute;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  pointer-events: none;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n}\\n\\n.OT_audio-blocked {\\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwIDEgNDMgNDRhOC45ODggOC45ODggMCAwIDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAgMSAxMC4zNzQtLjQyQzUxLjcwMiAxOS4xMTQgNTQgMjkuMjA4IDU0IDQ1LjIwOGMwIDE0LjUyNy0yLjM0MyAyMy44OC03LjAzIDI4LjA1OGE3LjI4IDcuMjggMCAwIDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwIDEtNS01di0xM2E1IDUgMCAwIDEgNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);\\n  background-size: 90px auto;\\n}\\n\\n.OT_container-audio-blocked {\\n  cursor: pointer;\\n}\\n\\n.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {\\n  display: none;\\n}\\n\\n.OT_container-audio-blocked .OT_mute {\\n  display: none;\\n}\\n\\n.OT_audio-blocked-indicator.OT_active {\\n  display: block;\\n}\\n\\n.OT_video-unsupported {\\n  opacity: 1;\\n  border: none;\\n  display: none;\\n  position: absolute;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);\\n  background-size: 58px auto;\\n  pointer-events: none;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin-top: -30px;\\n}\\n\\n.OT_video-unsupported-bar {\\n  display: none;\\n  position: absolute;\\n  width: 192%;\\n  /* copy the size of the audio meter bar for symmetry */\\n  height: 192%;\\n  top: -96%/* half of the size */\\n  ;\\n  left: -96%;\\n  border-radius: 50%;\\n  background-color: rgba(0, 0, 0, .8);\\n}\\n\\n.OT_video-unsupported-img {\\n  display: none;\\n  position: absolute;\\n  top: 11%;\\n  left: 15%;\\n  width: 70%;\\n  opacity: .7;\\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-size: 100% auto;\\n}\\n\\n.OT_video-unsupported-img:before {\\n  /* makes the height of the container 93% of its width (90/97 px) */\\n  content: '';\\n  display: block;\\n  padding-top: 93%;\\n}\\n\\n.OT_video-unsupported-text {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  text-align: center;\\n  height: 100%;\\n  margin-top: 40px;\\n}\"","module.exports = \"<div id=\\\"layout\\\" class=\\\"bounds\\\">\\n  <div *ngFor=\\\"let s of subscribers\\\" class=\\\"OT_root OT_publisher custom-class\\\">\\n    <div class=\\\"OT_widget-container\\\">\\n      <app-ov-video [subscriber]=\\\"s\\\"></app-ov-video>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, OnDestroy, HostListener, ViewEncapsulation, ApplicationRef } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { OpenVidu, Session, Stream, Subscriber, StreamEvent, StreamManagerEvent } from 'openvidu-browser';\n\nimport { OpenViduLayout } from '../openvidu-layout';\n\n@Component({\n  selector: 'app-layout-best-fit',\n  templateUrl: './layout-best-fit.component.html',\n  styleUrls: ['./layout-best-fit.component.css'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class LayoutBestFitComponent implements OnInit, OnDestroy {\n\n  openviduLayout: OpenViduLayout;\n  sessionId: string;\n  secret: string;\n\n  session: Session;\n  subscribers: Subscriber[] = [];\n\n  layout: any;\n  resizeTimeout;\n  numberOfScreenStreams = 0;\n\n  layoutOptions = {\n    maxRatio: 3 / 2,      // The narrowest ratio that will be used (default 2x3)\n    minRatio: 9 / 16,     // The widest ratio that will be used (default 16x9)\n    fixedRatio: false,    /* If this is true then the aspect ratio of the video is maintained\n      and minRatio and maxRatio are ignored (default false) */\n    bigClass: 'OV_big',   // The class to add to elements that should be sized bigger\n    bigPercentage: 0.8,   // The maximum percentage of space the big ones should take up\n    bigFixedRatio: false, // fixedRatio for the big ones\n    bigMaxRatio: 3 / 2,   // The narrowest ratio to use for the big elements (default 2x3)\n    bigMinRatio: 9 / 16,  // The widest ratio to use for the big elements (default 16x9)\n    bigFirst: true,       // Whether to place the big one in the top left (true) or bottom right\n    animate: true         // Whether you want to animate the transitions\n  };\n\n  constructor(private route: ActivatedRoute, private appRef: ApplicationRef) {\n    this.route.params.subscribe(params => {\n      this.sessionId = params.sessionId;\n      this.secret = params.secret;\n    });\n  }\n\n  @HostListener('window:beforeunload')\n  beforeunloadHandler() {\n    this.leaveSession();\n  }\n\n  @HostListener('window:resize', ['$event'])\n  sizeChange(event) {\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(() => {\n      this.openviduLayout.updateLayout();\n    }, 20);\n  }\n\n  ngOnDestroy() {\n    this.leaveSession();\n  }\n\n  ngOnInit() {\n    const OV = new OpenVidu();\n    this.session = OV.initSession();\n\n    this.session.on('streamCreated', (event: StreamEvent) => {\n      let changeFixedRatio = false;\n      if (event.stream.typeOfVideo === 'SCREEN') {\n        this.numberOfScreenStreams++;\n        changeFixedRatio = true;\n      }\n      const subscriber: Subscriber = this.session.subscribe(event.stream, undefined);\n      subscriber.on('streamPlaying', (e: StreamManagerEvent) => {\n        const video: HTMLVideoElement = subscriber.videos[0].video;\n        video.parentElement.parentElement.classList.remove('custom-class');\n        this.updateLayout(changeFixedRatio);\n      });\n      this.addSubscriber(subscriber);\n    });\n\n    this.session.on('streamDestroyed', (event: StreamEvent) => {\n      let changeFixedRatio = false;\n      if (event.stream.typeOfVideo === 'SCREEN') {\n        this.numberOfScreenStreams--;\n        changeFixedRatio = true;\n      }\n      this.deleteSubscriber(<Subscriber>event.stream.streamManager);\n      this.updateLayout(changeFixedRatio);\n    });\n\n    const port = !!location.port ? (':' + location.port) : '';\n    const token = 'wss://' + location.hostname + port + '?sessionId=' + this.sessionId + '&secret=' + this.secret + '&recorder=true';\n    this.session.connect(token)\n      .catch(error => {\n        console.error(error);\n      })\n\n    this.openviduLayout = new OpenViduLayout();\n    this.openviduLayout.initLayoutContainer(document.getElementById('layout'), this.layoutOptions);\n  }\n\n  private addSubscriber(subscriber: Subscriber): void {\n    this.subscribers.push(subscriber);\n    this.appRef.tick();\n  }\n\n  private deleteSubscriber(subscriber: Subscriber): void {\n    let index = -1;\n    for (let i = 0; i < this.subscribers.length; i++) {\n      if (this.subscribers[i] === subscriber) {\n        index = i;\n        break;\n      }\n    }\n    if (index > -1) {\n      this.subscribers.splice(index, 1);\n    }\n    this.appRef.tick();\n  }\n\n  leaveSession() {\n    if (this.session) { this.session.disconnect(); };\n    this.subscribers = [];\n    this.session = null;\n  }\n\n  updateLayout(changeFixedRatio: boolean) {\n    if (changeFixedRatio) {\n      this.layoutOptions.fixedRatio = this.numberOfScreenStreams > 0;\n      this.openviduLayout.setLayoutOptions(this.layoutOptions);\n    }\n    this.openviduLayout.updateLayout();\n  }\n\n}\n","declare var $: any;\n\nexport interface OpenViduLayoutOptions {\n    maxRatio: number;\n    minRatio: number;\n    fixedRatio: boolean;\n    animate: any;\n    bigClass: string;\n    bigPercentage: any;\n    bigFixedRatio: any;\n    bigMaxRatio: any;\n    bigMinRatio: any;\n    bigFirst: any;\n}\n\nexport class OpenViduLayout {\n\n    private layoutContainer: HTMLElement;\n    private opts: OpenViduLayoutOptions;\n\n    private fixAspectRatio(elem: HTMLVideoElement, width: number) {\n        const sub: HTMLVideoElement = <HTMLVideoElement>elem.querySelector('.OT_root');\n        if (sub) {\n            // If this is the parent of a subscriber or publisher then we need\n            // to force the mutation observer on the publisher or subscriber to\n            // trigger to get it to fix it's layout\n            const oldWidth = sub.style.width;\n            sub.style.width = width + 'px';\n            // sub.style.height = height + 'px';\n            sub.style.width = oldWidth || '';\n        }\n    }\n\n    private positionElement(elem: HTMLVideoElement, x: number, y: number, width: number, height: number, animate: any) {\n        const targetPosition = {\n            left: x + 'px',\n            top: y + 'px',\n            width: width + 'px',\n            height: height + 'px'\n        };\n\n        this.fixAspectRatio(elem, width);\n\n        if (animate && $) {\n            $(elem).stop();\n            $(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing',\n                () => {\n                    this.fixAspectRatio(elem, width);\n                    if (animate.complete) { animate.complete.call(this); }\n                });\n        } else {\n            $(elem).css(targetPosition);\n        }\n        this.fixAspectRatio(elem, width);\n    }\n\n    private getVideoRatio(elem: HTMLVideoElement) {\n        if (!elem) {\n            return 3 / 4;\n        }\n        const video: HTMLVideoElement = <HTMLVideoElement>elem.querySelector('video');\n        if (video && video.videoHeight && video.videoWidth) {\n            return video.videoHeight / video.videoWidth;\n        } else if (elem.videoHeight && elem.videoWidth) {\n            return elem.videoHeight / elem.videoWidth;\n        }\n        return 3 / 4;\n    }\n\n    private getCSSNumber(elem: HTMLElement, prop: string) {\n        const cssStr = $(elem).css(prop);\n        return cssStr ? parseInt(cssStr, 10) : 0;\n    }\n\n    // Really cheap UUID function\n    private cheapUUID() {\n        return (Math.random() * 100000000).toFixed(0);\n    }\n\n    private getHeight(elem: HTMLElement) {\n        const heightStr = $(elem).css('height');\n        return heightStr ? parseInt(heightStr, 10) : 0;\n    }\n\n    private getWidth(elem: HTMLElement) {\n        const widthStr = $(elem).css('width');\n        return widthStr ? parseInt(widthStr, 10) : 0;\n    }\n\n    private getBestDimensions(minR: number, maxR: number, count: number, WIDTH: number, HEIGHT: number, targetHeight: number) {\n        let maxArea,\n            targetCols,\n            targetRows,\n            targetWidth,\n            tWidth,\n            tHeight,\n            tRatio;\n\n        // Iterate through every possible combination of rows and columns\n        // and see which one has the least amount of whitespace\n        for (let i = 1; i <= count; i++) {\n            const colsAux = i;\n            const rowsAux = Math.ceil(count / colsAux);\n\n            // Try taking up the whole height and width\n            tHeight = Math.floor(HEIGHT / rowsAux);\n            tWidth = Math.floor(WIDTH / colsAux);\n\n            tRatio = tHeight / tWidth;\n            if (tRatio > maxR) {\n                // We went over decrease the height\n                tRatio = maxR;\n                tHeight = tWidth * tRatio;\n            } else if (tRatio < minR) {\n                // We went under decrease the width\n                tRatio = minR;\n                tWidth = tHeight / tRatio;\n            }\n\n            const area = (tWidth * tHeight) * count;\n\n            // If this width and height takes up the most space then we're going with that\n            if (maxArea === undefined || (area > maxArea)) {\n                maxArea = area;\n                targetHeight = tHeight;\n                targetWidth = tWidth;\n                targetCols = colsAux;\n                targetRows = rowsAux;\n            }\n        }\n        return {\n            maxArea: maxArea,\n            targetCols: targetCols,\n            targetRows: targetRows,\n            targetHeight: targetHeight,\n            targetWidth: targetWidth,\n            ratio: targetHeight / targetWidth\n        };\n    };\n\n    private arrange(children: HTMLVideoElement[], WIDTH: number, HEIGHT: number, offsetLeft: number, offsetTop: number, fixedRatio: boolean,\n        minRatio: number, maxRatio: number, animate: any) {\n\n        let targetHeight;\n\n        const count = children.length;\n        let dimensions;\n\n        if (!fixedRatio) {\n            dimensions = this.getBestDimensions(minRatio, maxRatio, count, WIDTH, HEIGHT, targetHeight);\n        } else {\n            // Use the ratio of the first video element we find to approximate\n            const ratio = this.getVideoRatio(children.length > 0 ? children[0] : null);\n            dimensions = this.getBestDimensions(ratio, ratio, count, WIDTH, HEIGHT, targetHeight);\n        }\n\n        // Loop through each stream in the container and place it inside\n        let x = 0,\n            y = 0;\n        const rows = [];\n        let row;\n        // Iterate through the children and create an array with a new item for each row\n        // and calculate the width of each row so that we know if we go over the size and need\n        // to adjust\n        for (let i = 0; i < children.length; i++) {\n            if (i % dimensions.targetCols === 0) {\n                // This is a new row\n                row = {\n                    children: [],\n                    width: 0,\n                    height: 0\n                };\n                rows.push(row);\n            }\n            const elem: HTMLVideoElement = children[i];\n            row.children.push(elem);\n            let targetWidth = dimensions.targetWidth;\n            targetHeight = dimensions.targetHeight;\n            // If we're using a fixedRatio then we need to set the correct ratio for this element\n            if (fixedRatio) {\n                targetWidth = targetHeight / this.getVideoRatio(elem);\n            }\n            row.width += targetWidth;\n            row.height = targetHeight;\n        }\n        // Calculate total row height adjusting if we go too wide\n        let totalRowHeight = 0;\n        let remainingShortRows = 0;\n        for (let i = 0; i < rows.length; i++) {\n            row = rows[i];\n            if (row.width > WIDTH) {\n                // Went over on the width, need to adjust the height proportionally\n                row.height = Math.floor(row.height * (WIDTH / row.width));\n                row.width = WIDTH;\n            } else if (row.width < WIDTH) {\n                remainingShortRows += 1;\n            }\n            totalRowHeight += row.height;\n        }\n        if (totalRowHeight < HEIGHT && remainingShortRows > 0) {\n            // We can grow some of the rows, we're not taking up the whole height\n            let remainingHeightDiff = HEIGHT - totalRowHeight;\n            totalRowHeight = 0;\n            for (let i = 0; i < rows.length; i++) {\n                 row = rows[i];\n                if (row.width < WIDTH) {\n                    // Evenly distribute the extra height between the short rows\n                    let extraHeight = remainingHeightDiff / remainingShortRows;\n                    if ((extraHeight / row.height) > ((WIDTH - row.width) / row.width)) {\n                        // We can't go that big or we'll go too wide\n                        extraHeight = Math.floor(((WIDTH - row.width) / row.width) * row.height);\n                    }\n                    row.width += Math.floor((extraHeight / row.height) * row.width);\n                    row.height += extraHeight;\n                    remainingHeightDiff -= extraHeight;\n                    remainingShortRows -= 1;\n                }\n                totalRowHeight += row.height;\n            }\n        }\n        // vertical centering\n        y = ((HEIGHT - (totalRowHeight)) / 2);\n        // Iterate through each row and place each child\n        for (let i = 0; i < rows.length; i++) {\n            row = rows[i];\n            // center the row\n            const rowMarginLeft = ((WIDTH - row.width) / 2);\n            x = rowMarginLeft;\n            for (let j = 0; j < row.children.length; j++) {\n                const elem: HTMLVideoElement = row.children[j];\n\n                let targetWidth = dimensions.targetWidth;\n                targetHeight = row.height;\n                // If we're using a fixedRatio then we need to set the correct ratio for this element\n                if (fixedRatio) {\n                    targetWidth = Math.floor(targetHeight / this.getVideoRatio(elem));\n                }\n                elem.style.position = 'absolute';\n                // $(elem).css('position', 'absolute');\n                const actualWidth = targetWidth - this.getCSSNumber(elem, 'paddingLeft') -\n                    this.getCSSNumber(elem, 'paddingRight') -\n                    this.getCSSNumber(elem, 'marginLeft') -\n                    this.getCSSNumber(elem, 'marginRight') -\n                    this.getCSSNumber(elem, 'borderLeft') -\n                    this.getCSSNumber(elem, 'borderRight');\n\n                const actualHeight = targetHeight - this.getCSSNumber(elem, 'paddingTop') -\n                    this.getCSSNumber(elem, 'paddingBottom') -\n                    this.getCSSNumber(elem, 'marginTop') -\n                    this.getCSSNumber(elem, 'marginBottom') -\n                    this.getCSSNumber(elem, 'borderTop') -\n                    this.getCSSNumber(elem, 'borderBottom');\n\n                this.positionElement(elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n                x += targetWidth;\n            }\n            y += targetHeight;\n        }\n    }\n\n    private filterDisplayNone(element: HTMLElement) {\n        return element.style.display !== 'none';\n    }\n\n    updateLayout() {\n        if (this.layoutContainer.style.display === 'none') {\n            return;\n        }\n        let id = this.layoutContainer.id;\n        if (!id) {\n            id = 'OT_' + this.cheapUUID();\n            this.layoutContainer.id = id;\n        }\n\n        const HEIGHT = this.getHeight(this.layoutContainer) -\n            this.getCSSNumber(this.layoutContainer, 'borderTop') -\n            this.getCSSNumber(this.layoutContainer, 'borderBottom');\n        const WIDTH = this.getWidth(this.layoutContainer) -\n            this.getCSSNumber(this.layoutContainer, 'borderLeft') -\n            this.getCSSNumber(this.layoutContainer, 'borderRight');\n\n        const availableRatio = HEIGHT / WIDTH;\n\n        let offsetLeft = 0;\n        let offsetTop = 0;\n        let bigOffsetTop = 0;\n        let bigOffsetLeft = 0;\n\n        const bigOnes = Array.prototype.filter.call(\n            this.layoutContainer.querySelectorAll('#' + id + '>.' + this.opts.bigClass),\n            this.filterDisplayNone);\n        const smallOnes = Array.prototype.filter.call(\n            this.layoutContainer.querySelectorAll('#' + id + '>*:not(.' + this.opts.bigClass + ')'),\n            this.filterDisplayNone);\n\n        if (bigOnes.length > 0 && smallOnes.length > 0) {\n            let bigWidth, bigHeight;\n\n            if (availableRatio > this.getVideoRatio(bigOnes[0])) {\n                // We are tall, going to take up the whole width and arrange small\n                // guys at the bottom\n                bigWidth = WIDTH;\n                bigHeight = Math.floor(HEIGHT * this.opts.bigPercentage);\n                offsetTop = bigHeight;\n                bigOffsetTop = HEIGHT - offsetTop;\n            } else {\n                // We are wide, going to take up the whole height and arrange the small\n                // guys on the right\n                bigHeight = HEIGHT;\n                bigWidth = Math.floor(WIDTH * this.opts.bigPercentage);\n                offsetLeft = bigWidth;\n                bigOffsetLeft = WIDTH - offsetLeft;\n            }\n            if (this.opts.bigFirst) {\n                this.arrange(bigOnes, bigWidth, bigHeight, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio,\n                    this.opts.bigMaxRatio, this.opts.animate);\n                this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop,\n                    this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n            } else {\n                this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, 0, 0, this.opts.fixedRatio,\n                    this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n                this.arrange(bigOnes, bigWidth, bigHeight, bigOffsetLeft, bigOffsetTop,\n                    this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n            }\n        } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n            this.\n                // We only have one bigOne just center it\n                arrange(bigOnes, WIDTH, HEIGHT, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio,\n                    this.opts.bigMaxRatio, this.opts.animate);\n        } else {\n            this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop,\n                this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n        }\n    }\n\n    initLayoutContainer(container, opts) {\n        this.opts = {\n            maxRatio: (opts.maxRatio != null) ? opts.maxRatio : 3 / 2,\n            minRatio: (opts.minRatio != null) ? opts.minRatio : 9 / 16,\n            fixedRatio: (opts.fixedRatio != null) ? opts.fixedRatio : false,\n            animate: (opts.animate != null) ? opts.animate : false,\n            bigClass: (opts.bigClass != null) ? opts.bigClass : 'OT_big',\n            bigPercentage: (opts.bigPercentage != null) ? opts.bigPercentage : 0.8,\n            bigFixedRatio: (opts.bigFixedRatio != null) ? opts.bigFixedRatio : false,\n            bigMaxRatio: (opts.bigMaxRatio != null) ? opts.bigMaxRatio : 3 / 2,\n            bigMinRatio: (opts.bigMinRatio != null) ? opts.bigMinRatio : 9 / 16,\n            bigFirst: (opts.bigFirst != null) ? opts.bigFirst : true\n        };\n        this.layoutContainer = typeof (container) === 'string' ? $(container) : container;\n    }\n\n    setLayoutOptions(options: OpenViduLayoutOptions) {\n        this.opts = options;\n    }\n\n}\n\n","import { Component, Input, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { Subscriber } from 'openvidu-browser';\n\n@Component({\n    selector: 'app-ov-video',\n    template: '<video #videoElement></video>'\n})\nexport class OpenViduVideoComponent implements AfterViewInit {\n\n    @ViewChild('videoElement') elementRef: ElementRef;\n\n    _subscriber: Subscriber;\n\n    ngAfterViewInit() {\n        this._subscriber.addVideoElement(this.elementRef.nativeElement);\n    }\n\n    @Input()\n    set subscriber(subscriber: Subscriber) {\n        this._subscriber = subscriber;\n        if (!!this.elementRef) {\n            this._subscriber.addVideoElement(this.elementRef.nativeElement);\n        }\n    }\n\n}\n","module.exports = \"\"","module.exports = \"<p>\\n  session-details works!\\n</p>\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-session-details',\n  templateUrl: './session-details.component.html',\n  styleUrls: ['./session-details.component.css']\n})\nexport class SessionDetailsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable()\nexport class InfoService {\n\n  info: string;\n  newInfo$: Subject<string>;\n\n  constructor() {\n    this.newInfo$ = new Subject<string>();\n  }\n\n  getInfo() {\n    return this.info;\n  }\n\n  updateInfo(info: string) {\n    this.info = info;\n    this.newInfo$.next(info);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable()\nexport class RestService {\n\n    private openviduPublicUrl: string;\n\n    getOpenViduPublicUrl(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!!this.openviduPublicUrl) {\n                resolve(this.openviduPublicUrl);\n            } else {\n                const url = location.protocol + '//' + location.hostname + ((!!location.port) ? (':' + location.port) : '') +\n                    '/config/openvidu-publicurl';\n                const http = new XMLHttpRequest();\n\n                http.onreadystatechange = () => {\n                    if (http.readyState === 4) {\n                        if (http.status === 200) {\n                            this.openviduPublicUrl = http.responseText;\n                            resolve(http.responseText);\n                        } else {\n                            reject('Error getting OpenVidu publicurl');\n                        }\n                    };\n                }\n                http.open('GET', url, true);\n                http.send();\n            }\n        });\n    }\n\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n"],"sourceRoot":""}